{"version":3,"sources":["webpack:///./node_modules/websocket-as-promised/src/requests.js","webpack:///./node_modules/promise-controller/src/utils.js","webpack:///./node_modules/promise.prototype.finally/index.js","webpack:///./node_modules/function-bind/index.js","webpack:///./node_modules/websocket/lib/version.js","webpack:///./node_modules/has-symbols/shams.js","webpack:///./node_modules/promise-controller/src/defaults.js","webpack:///./node_modules/es-abstract/helpers/isNaN.js","webpack:///./node_modules/is-callable/index.js","webpack:///./node_modules/util/node_modules/inherits/inherits_browser.js","webpack:///./node_modules/es-abstract/helpers/callBound.js","webpack:///./node_modules/es-abstract/helpers/DefineOwnProperty.js","webpack:///./node_modules/es-abstract/2018/IsConstructor.js","webpack:///./node_modules/util/util.js","webpack:///./node_modules/websocket-as-promised/src/index.js","webpack:///./node_modules/zksync/build/utils.js","webpack:///./node_modules/es-abstract/2018/Type.js","webpack:///./node_modules/es-abstract/2018/IsDataDescriptor.js","webpack:///./node_modules/es-abstract/helpers/callBind.js","webpack:///./node_modules/es-abstract/2018/DefinePropertyOrThrow.js","webpack:///./node_modules/has-symbols/index.js","webpack:///./node_modules/es-abstract/5/Type.js","webpack:///./node_modules/promise.prototype.finally/shim.js","webpack:///./node_modules/zksync/build/crypto.js","webpack:///./node_modules/zksync-crypto/dist/zksync-crypto-bundler.js","webpack:///./node_modules/es-abstract/2018/IsPropertyKey.js","webpack:///./node_modules/es5-ext/global.js","webpack:///./node_modules/function-bind/implementation.js","webpack:///./node_modules/zksync/build/signer.js","webpack:///./node_modules/es-abstract/2018/ToBoolean.js","webpack:///./node_modules/chnl/dist/channel.cjs.js","webpack:///./node_modules/promise.prototype.finally/implementation.js","webpack:///./node_modules/websocket/lib/browser.js","webpack:///./node_modules/es-abstract/2018/IsCallable.js","webpack:///./node_modules/es-abstract/2018/SpeciesConstructor.js","webpack:///./node_modules/zksync/build/wallet.js","webpack:///./node_modules/promise.prototype.finally/polyfill.js","webpack:///./node_modules/es-abstract/2018/IsAccessorDescriptor.js","webpack:///./node_modules/zksync/build/transport.js","webpack:///./node_modules/es-abstract/2018/FromPropertyDescriptor.js","webpack:///./node_modules/has/src/index.js","webpack:///./node_modules/zksync/build/types.js","webpack:///./node_modules/object-keys/implementation.js","webpack:///./node_modules/promise.prototype.finally/requirePromise.js","webpack:///./node_modules/zksync/build/provider.js","webpack:///./node_modules/es-abstract/helpers/assertRecord.js","webpack:///./node_modules/promise-controller/src/index.js","webpack:///./node_modules/object-keys/isArguments.js","webpack:///./node_modules/websocket-as-promised/src/options.js","webpack:///./node_modules/util/support/isBufferBrowser.js","webpack:///./node_modules/object-keys/index.js","webpack:///./node_modules/es-abstract/2018/SameValue.js","webpack:///./node_modules/websocket-as-promised/src/utils.js","webpack:///./node_modules/es-abstract/GetIntrinsic.js","webpack:///./node_modules/zksync/build/index.js","webpack:///./node_modules/es-abstract/2018/ToPropertyDescriptor.js","webpack:///./node_modules/define-properties/index.js","webpack:///./node_modules/es-abstract/helpers/isPropertyDescriptor.js"],"names":["PromiseController","promiseFinally","module","exports","this","_items","Map","requestId","fn","timeout","_rejectExistingRequest","_createNewRequest","data","has","get","resolve","error","forEach","request","isPending","reject","existingRequest","Error","timeoutReason","set","call","_deleteRequest","delete","isPromise","p","then","tryCall","value","createErrorType","name","E","message","captureStackTrace","constructor","stack","prototype","bind","define","implementation","getPolyfill","shim","bound","Function","version","Symbol","Object","getOwnPropertySymbols","iterator","obj","sym","symObj","toString","symVal","keys","length","getOwnPropertyNames","syms","propertyIsEnumerable","getOwnPropertyDescriptor","descriptor","enumerable","resetReason","Number","isNaN","a","badArrayLike","isCallableMarker","fnToStr","reflectApply","Reflect","apply","defineProperty","_","constructorRegex","isES6ClassFn","fnStr","test","e","tryFunctionObject","toStr","fnClass","genClass","hasToStringTag","toStringTag","strClass","create","ctor","superCtor","super_","writable","configurable","TempCtor","GetIntrinsic","callBind","$indexOf","allowMissing","intrinsic","$defineProperty","callBound","$isEnumerable","IsDataDescriptor","SameValue","FromPropertyDescriptor","O","P","desc","V","$construct","DefinePropertyOrThrow","isConstructorMarker","argument","err","getOwnPropertyDescriptors","descriptors","i","formatRegExp","format","f","isString","objects","arguments","push","inspect","join","args","len","str","String","replace","x","JSON","stringify","isNull","isObject","deprecate","msg","process","noDeprecation","warned","deprecated","throwDeprecation","traceDeprecation","console","trace","debugEnviron","debugs","opts","ctx","seen","stylize","stylizeNoColor","depth","colors","isBoolean","showHidden","_extend","isUndefined","customInspect","stylizeWithColor","formatValue","styleType","style","styles","arrayToHash","array","hash","val","idx","recurseTimes","isFunction","ret","primitive","formatPrimitive","visibleKeys","isError","indexOf","formatError","isRegExp","RegExp","isDate","Date","output","base","braces","isArray","n","toUTCString","formatArray","map","key","formatProperty","pop","reduceToSingleString","simple","isNumber","l","hasOwnProperty","match","split","line","substr","reduce","prev","cur","numLinesEst","ar","Array","arg","isNullOrUndefined","isSymbol","re","objectToString","d","isPrimitive","o","pad","debuglog","NODE_DEBUG","toUpperCase","pid","isBuffer","months","timestamp","time","getHours","getMinutes","getSeconds","getDate","getMonth","prop","log","inherits","origin","add","kCustomPromisifiedSymbol","undefined","callbackifyOnRejected","reason","cb","newReason","callbackify","original","TypeError","callbackified","maybeCb","self","nextTick","rej","setPrototypeOf","getPrototypeOf","defineProperties","promisify","promiseResolve","promiseReject","promise","Promise","custom","Channel","Requests","defaultOptions","throwIf","STATE","CONNECTING","OPEN","CLOSING","CLOSED","WebSocketAsPromised","url","options","_assertOptions","_url","_options","assign","_requests","_ws","_wsSubscription","_createOpeningController","_createClosingController","_createChannels","Boolean","readyState","_onOpen","_onSend","_onMessage","_onUnpackedMessage","_onResponse","_onClose","_onError","isClosing","isOpened","_opening","catch","_cleanup","_createWS","Math","random","_assertRequestIdHandlers","finalData","attachRequestId","sendPacked","_assertPackingHandlers","packMessage","send","dispatchAsync","code","isClosed","_closing","close","removeAllListeners","connectionTimeout","closingTimeout","createWebSocket","Subscription","channel","event","listener","_handleOpen","_handleMessage","_handleError","_handleClose","on","extractMessageData","_tryUnpack","unpackMessage","_tryHandleResponse","extractRequestId","off","_cleanupWS","rejectAll","__awaiter","thisArg","_arguments","generator","adopt","fulfilled","step","next","rejected","result","done","serializeTransfer","serializeNonce","serializeFeePacked","serializeAmountFull","serializeAmountPacked","serializeTokenId","serializeAccountId","serializeAddress","getEthSignatureType","verifyERC1271Signature","signMessagePersonalAPI","getSignedBytesFromMessage","getChangePubkeyMessage","TokenSet","isTokenETH","sleep","buffer2bitsBE","isTransactionFeePackable","closestPackableTransactionFee","isTransactionAmountPackable","closestPackableTransactionAmount","packFeeChecked","packAmountChecked","reverseBits","integerToFloat","bitsIntoBytesInBEOrder","floatToInteger","ERC20_DEPOSIT_GAS_LIMIT","ERC20_APPROVE_TRESHOLD","MAX_ERC20_APPROVE_AMOUNT","IEIP1271_INTERFACE","SYNC_GOV_CONTRACT_INTERFACE","SYNC_MAIN_CONTRACT_INTERFACE","IERC20_INTERFACE","ethers_1","MAX_NUMBER_OF_TOKENS","MAX_NUMBER_OF_ACCOUNTS","pow","utils","Interface","abi","BigNumber","from","AMOUNT_EXPONENT_BIT_WIDTH","AMOUNT_MANTISSA_BIT_WIDTH","FEE_EXPONENT_BIT_WIDTH","FEE_MANTISSA_BIT_WIDTH","floatBytes","expBits","mantissaBits","expBaseNumber","bits","reverse","exponent","expPow2","mul","mantissa","mantissaPow2","nBytes","resultBytes","Uint8Array","byte","numberToBits","integer","exp_bits","mantissa_bits","exp_base","max_exponent","max_mantissa","sub","gt","div","encoding","mantissaNumber","toNumber","buffer","reversed","b","packAmount","amount","packFee","packedAmount","eq","fee","packedFee","buff","res","ms","setTimeout","token","constants","AddressZero","tokensBySymbol","tokenLike","values","address","toLocaleLowerCase","parsedAmount","parseToken","decimals","resolveTokenDecimals","formatUnits","parseUnits","resolveTokenObject","id","symbol","pubKeyHash","nonce","accountId","msgNonce","hexlify","msgAccId","pubKeyHashHex","toLowerCase","addPrefix","messageBytes","toUtf8Bytes","arrayify","concat","signer","ethers","providers","JsonRpcSigner","provider","getAddress","sign","includes","signMessage","signature","signerOrProvider","EIP1271_SUCCESS_VALUE","keccak256","eip1271","Contract","eipRetVal","isValidSignature","messageNoPrefix","messageWithPrefix","prefixedECDSASigner","recoverAddress","verificationMethod","isSignedMsgPrefixed","notPrefixedMsgECDSASigner","removeAddressPrefix","startsWith","prefixlessAddress","addressBytes","numberToBytesBE","tokenId","bnAmount","zeroPad","transfer","type","to","number","bytes","ES5Type","assertRecord","Type","Desc","$apply","$call","$reflectApply","applyBind","$TypeError","isPropertyDescriptor","DefineOwnProperty","IsAccessorDescriptor","IsPropertyKey","ToPropertyDescriptor","origSymbol","global","hasSymbolSham","requirePromise","polyfill","__createBinding","m","k","k2","__setModuleDefault","v","__importStar","mod","__esModule","loadZkSyncCrypto","privateKeyToPubKeyHash","signTransactionBytes","privateKeyFromSeed","zksync_crypto_1","zks","zksync_crypto_2","privKey","signaturePacked","sign_musig","pubKey","slice","privateKey","private_key_to_pubkey_hash","zksyncCryptoLoaded","wasmFileUrl","default","DefaultZksyncCryptoWasmURL","heap","fill","getObject","heap_next","dropObject","takeObject","zksync_crypto_init","cachegetUint8Memory0","getUint8Memory0","WASM_VECTOR_LEN","passArray8ToWasm0","malloc","ptr","cachegetInt32Memory0","getInt32Memory0","Int32Array","getArrayU8FromWasm0","subarray","seed","ptr0","len0","r0","r1","v1","private_key","private_key_to_pubkey","ptr1","len1","v2","lTextDecoder","TextDecoder","cachedTextDecoder","ignoreBOM","fatal","getStringFromWasm0","decode","addHeapObject","lTextEncoder","TextEncoder","cachedTextEncoder","encodeString","encodeInto","view","buf","encode","read","written","passStringToWasm0","realloc","mem","offset","charCodeAt","__wbg_new_59cb74e423758ede","__wbg_stack_558ba5917b466edd","arg0","arg1","__wbg_error_4bb6c2a97407129a","__wbindgen_object_drop_ref","naiveFallback","window","globalThis","__global__","ERROR_MESSAGE","funcType","that","target","binder","boundLength","max","boundArgs","Empty","Signer","crypto_1","utils_1","msgBytes","withdraw","typeBytes","accountBytes","ethAddressBytes","ethAddress","tokenIdBytes","amountBytes","feeBytes","nonceBytes","forcedExit","initiatorAccountIdBytes","initiatorAccountId","targetBytes","changePubKey","accountIdBytes","account","pubKeyHashBytes","newPkHash","feeTokenId","feeToken","ethSignature","pk","ethSigner","chainID","network","getNetwork","chainId","signedBytes","ethSignatureType","fromSeed","_typeof","_classCallCheck","t","_defineProperties","r","_createClass","_inherits","_setPrototypeOf","_getPrototypeOf","__proto__","_isNativeReflectConstruct","construct","sham","Proxy","_assertThisInitialized","ReferenceError","_possibleConstructorReturn","_createSuper","_toConsumableArray","_arrayWithoutHoles","_iterableToArray","_unsupportedIterableToArray","_nonIterableSpread","_arrayLikeToArray","c","_listeners","_mute","_accumulate","_accumulatedEvents","_name","_onListenerAdded","_onFirstListenerAdded","_onListenerRemoved","_onLastListenerRemoved","_pushListener","_ensureListener","_indexOfListener","_spliceListener","hasListeners","_invokeListeners","async","accumulate","_dispatchAccumulated","_invokeListener","once","removeListener","callback","context","dispatch","isValidListener","s","_checkForDuplicates","_dispatchInnerAddEvents","hasListener","splice","_dispatchInnerRemoveEvents","EventEmitter","_channels","_getChannel","addListener","addOnceListener","SubscriptionItem","_params","_isOn","_assertParams","addEventListener","_applyMethod","removeEventListener","ReactSubscription","_overrideComponentCallback","chnl","IsCallable","SpeciesConstructor","C","OriginalPromise","createThenFinally","onFinally","valueThunk","createCatchFinally","thrower","thenFinally","catchFinally","_globalThis","NativeWebSocket","WebSocket","MozWebSocket","websocket_version","W3CWebSocket","uri","protocols","native_instance","$species","IsConstructor","defaultConstructor","S","submitSignedTransaction","Wallet","logger_1","provider_1","signer_1","EthersErrorCode","ErrorCode","ZKSyncTxError","super","cachedAddress","ethSignerType","ethWallet","signerResult","fromETHSignature","wallet","connect","setRequiredAccountIdFromServer","tokenSet","resolveTokenId","transactionData","signSyncTransfer","signedTransferTransaction","getTransfer","stringAmount","formatToken","stringFee","stringToken","resolveTokenSymbol","humanReadableTxInfo","txMessageEthSignature","getEthMessageSignature","tx","ethereumSignature","signedForcedExitTransaction","signSyncForcedExit","getNonce","fullFee","getTransactionFee","totalFee","transfers","batch","nextNonce","transactionHashes","submitTxsBatch","txHash","Transaction","signedWithdrawTransaction","signSyncWithdraw","feeType","fastProcessing","signWithdrawFromSyncToEthereum","currentPubKeyHash","getCurrentPubKeyHash","signerPubKeyHash","newPubKeyHash","changePubKeyMessage","onchainAuth","changePubKeyTx","signSyncChangePubKey","ChangePubKey","onchainPubkeyAuth","txData","signSetSigningKey","mainZkSyncContract","contractAddress","mainContract","numNonce","onchainAuthFact","authFacts","modifyEthersError","ethTxOptions","setAuthPubkeyHash","gasLimit","getState","committed","accountState","getAccountState","tokenSymbol","balance","balances","verified","getBalance","erc20contract","resolveTokenAddress","balanceOf","tokenAddress","currentAllowance","allowance","gte","approve","deposit","gasPrice","getGasPrice","ethTransaction","depositETH","depositTo","approveDepositAmountForERC20","approveTx","txRequest","gasEstimate","estimateGas","depositERC20","estimate","_err","ETHOperation","ethProxy","ETHProxy","fullExit","correct_errors","NONCE_EXPIRED","INSUFFICIENT_FUNDS","REPLACEMENT_UNDERPRICED","UNPREDICTABLE_GAS_LIMIT","actionName","accountIdFromServer","getAccountId","ethTx","zkSyncProvider","state","txReceipt","wait","logs","priorityQueueLog","parseLog","serialId","priorityOpId","_a","throwErrorIfFailedState","awaitEthereumTxCommit","receipt","notifyPriorityOp","executed","setErrorState","awaitReceipt","sidechainProvider","notifyTransaction","success","failReason","signedTx","transactionHash","submitTx","__importDefault","WSTransport","HTTPTransport","JRPCError","AbstractJSONRPCTransport","axios_1","websocket","w3cwebsocket","subMethod","subParams","unsubMethod","jrpcError","unsubscribe","method","params","jsonrpc","response","post","resp","ws","parse","subscriptionCallback","onUnpackedMessage","subscription","transport","open","req","sendRequest","subId","unsubRep","keysShim","isArgs","isEnumerable","hasDontEnumBug","hasProtoEnumBug","dontEnums","equalsConstructorPrototype","excludedKeys","$applicationCache","$console","$external","$frame","$frameElement","$frames","$innerHeight","$innerWidth","$onmozfullscreenchange","$onmozfullscreenerror","$outerHeight","$outerWidth","$pageXOffset","$pageYOffset","$parent","$scrollLeft","$scrollTop","$scrollX","$scrollY","$self","$webkitIndexedDB","$webkitStorageInfo","$window","hasAutomationEqualityBug","equalsConstructorPrototypeIfNotBuggy","object","isArguments","theKeys","skipProto","j","skipConstructor","Provider","getDefaultProvider","transport_1","newWebsocketProvider","newHttpProvider","pollIntervalMilliSecs","getContractAddress","getTokens","transactions","withdrawal_hash","action","subscriptionsSupported","getTime","subscribe","priorOpStatus","getPriorityOpStatus","notifyDone","block","transactionStatus","getTxReceipt","txType","transactionFee","gasTxAmount","gasPriceWei","gasFee","zkpFee","txTypes","addresses","batchFee","tokenPrice","parseFloat","disconnect","ethersProvider","governanceContract","govContract","tokenIds","$SyntaxError","predicates","allowed","isData","IsAccessor","recordType","argumentName","predicate","defaults","_resolve","_reject","_isPending","_isFulfilled","_isRejected","_value","_promise","_timer","reset","_createPromise","_createTimer","_callFn","_tryAttachToPromise","_settle","ResetError","_clearTimer","messageTpl","TimeoutError","_handleTimeout","clearTimeout","callee","copy","readUInt8","origKeys","originalKeys","keysWorksWithArguments","$isNaN","y","condition","$gOPD","asyncFn","asyncGen","throwTypeError","ThrowTypeError","calleeThrows","gOPDthrows","hasSymbols","getProto","generatorFunction","asyncFunction","asyncGenFunction","asyncGenIterator","TypedArray","INTRINSICS","ArrayBuffer","entries","asyncIterator","Atomics","DataView","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","eval","EvalError","Float32Array","Float64Array","Int8Array","Int16Array","isFinite","valueOf","parseInt","all","RangeError","Set","SharedArrayBuffer","SyntaxError","Uint8ClampedArray","Uint16Array","Uint32Array","URIError","WeakMap","WeakSet","$replace","rePropName","reEscapeChar","stringToPath","string","quote","subString","getBaseIntrinsic","parts","crypto","types","wallet_1","ToBoolean","Obj","getter","setter","origDefineProperty","arePropertyDescriptorsSupported","supportsDescriptors","props","ES"],"mappings":"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","file":"js/chunk-09148364.59de944a.js","sourcesContent":["/**\n * Class for manage pending requests.\n * @private\n */\n\nconst PromiseController = require('promise-controller');\nconst promiseFinally = require('promise.prototype.finally');\n\nmodule.exports = class Requests {\n  constructor() {\n    this._items = new Map();\n  }\n\n  /**\n   * Creates new request and stores it in the list.\n   *\n   * @param {String|Number} requestId\n   * @param {Function} fn\n   * @param {Number} timeout\n   * @returns {Promise}\n   */\n  create(requestId, fn, timeout) {\n    this._rejectExistingRequest(requestId);\n    return this._createNewRequest(requestId, fn, timeout);\n  }\n\n  resolve(requestId, data) {\n    if (requestId && this._items.has(requestId)) {\n      this._items.get(requestId).resolve(data);\n    }\n  }\n\n  rejectAll(error) {\n    this._items.forEach(request => request.isPending ? request.reject(error) : null);\n  }\n\n  _rejectExistingRequest(requestId) {\n    const existingRequest = this._items.get(requestId);\n    if (existingRequest && existingRequest.isPending) {\n      existingRequest.reject(new Error(`WebSocket request is replaced, id: ${requestId}`));\n    }\n  }\n\n  _createNewRequest(requestId, fn, timeout) {\n    const request = new PromiseController({\n      timeout,\n      timeoutReason: `WebSocket request was rejected by timeout (${timeout} ms). RequestId: ${requestId}`\n    });\n    this._items.set(requestId, request);\n    return promiseFinally(request.call(fn), () => this._deleteRequest(requestId, request));\n  }\n\n  _deleteRequest(requestId, request) {\n    // this check is important when request was replaced\n    if (this._items.get(requestId) === request) {\n      this._items.delete(requestId);\n    }\n  }\n};\n","\n/**\n * Simple check for Promise.\n * @param {*} p\n * @returns {Boolean}\n * @ignore\n */\nexports.isPromise = function (p) {\n  return p && typeof p.then === 'function';\n};\n\n/**\n * Calls argument if it is function\n * @param {*} value\n * @returns {*}\n * @ignore\n */\nexports.tryCall = function (value) {\n  return typeof value === 'function' ? value() : value;\n};\n\n/**\n * Just `class MyError extends Error` does not work with transpiler.\n * See: https://stackoverflow.com/questions/1382107/whats-a-good-way-to-extend-error-in-javascript\n * @ignore\n */\nexports.createErrorType = function (name) {\n  function E(message) {\n    if (!Error.captureStackTrace) {\n      this.stack = (new Error()).stack;\n    } else {\n      Error.captureStackTrace(this, this.constructor);\n    }\n    this.message = message;\n  }\n  E.prototype = new Error();\n  E.prototype.name = name;\n  E.prototype.constructor = E;\n  return E;\n};\n","'use strict';\n\nvar bind = require('function-bind');\nvar define = require('define-properties');\n\nvar implementation = require('./implementation');\nvar getPolyfill = require('./polyfill');\nvar shim = require('./shim');\n\nvar bound = bind.call(Function.call, getPolyfill());\n\ndefine(bound, {\n\tgetPolyfill: getPolyfill,\n\timplementation: implementation,\n\tshim: shim\n});\n\nmodule.exports = bound;\n","'use strict';\n\nvar implementation = require('./implementation');\n\nmodule.exports = Function.prototype.bind || implementation;\n","module.exports = require('../package.json').version;\n","'use strict';\n\n/* eslint complexity: [2, 18], max-statements: [2, 33] */\nmodule.exports = function hasSymbols() {\n\tif (typeof Symbol !== 'function' || typeof Object.getOwnPropertySymbols !== 'function') { return false; }\n\tif (typeof Symbol.iterator === 'symbol') { return true; }\n\n\tvar obj = {};\n\tvar sym = Symbol('test');\n\tvar symObj = Object(sym);\n\tif (typeof sym === 'string') { return false; }\n\n\tif (Object.prototype.toString.call(sym) !== '[object Symbol]') { return false; }\n\tif (Object.prototype.toString.call(symObj) !== '[object Symbol]') { return false; }\n\n\t// temp disabled per https://github.com/ljharb/object.assign/issues/17\n\t// if (sym instanceof Symbol) { return false; }\n\t// temp disabled per https://github.com/WebReflection/get-own-property-symbols/issues/4\n\t// if (!(symObj instanceof Symbol)) { return false; }\n\n\t// if (typeof Symbol.prototype.toString !== 'function') { return false; }\n\t// if (String(sym) !== Symbol.prototype.toString.call(sym)) { return false; }\n\n\tvar symVal = 42;\n\tobj[sym] = symVal;\n\tfor (sym in obj) { return false; } // eslint-disable-line no-restricted-syntax\n\tif (typeof Object.keys === 'function' && Object.keys(obj).length !== 0) { return false; }\n\n\tif (typeof Object.getOwnPropertyNames === 'function' && Object.getOwnPropertyNames(obj).length !== 0) { return false; }\n\n\tvar syms = Object.getOwnPropertySymbols(obj);\n\tif (syms.length !== 1 || syms[0] !== sym) { return false; }\n\n\tif (!Object.prototype.propertyIsEnumerable.call(obj, sym)) { return false; }\n\n\tif (typeof Object.getOwnPropertyDescriptor === 'function') {\n\t\tvar descriptor = Object.getOwnPropertyDescriptor(obj, sym);\n\t\tif (descriptor.value !== symVal || descriptor.enumerable !== true) { return false; }\n\t}\n\n\treturn true;\n};\n","/**\n * @typedef {Object} Options\n *\n * @property {Number} [timeout=0] - Timeout in ms after that promise will be rejected automatically.\n * @property {String|Function} [timeoutReason] - Rejection reason for timeout.\n * Promise will be rejected with {@link PromiseController.TimeoutError} and this message. The message can contain\n * placeholder `{timeout}` for actual timeout value. If timeoutReason is a function,\n * it will be evaluated and returned value will be used as message.\n * @property {String|Function} [resetReason] - Rejection reason used when `.reset()` is called while promise is pending.\n * Promise will be rejected with {@link PromiseController.ResetError} and this message. If resetReason is a function,\n * it will be evaluated and returned value will be used as message.\n */\n\nmodule.exports = {\n  timeout: 0,\n  timeoutReason: 'Promise rejected by PromiseController timeout {timeout} ms.',\n  resetReason: 'Promise rejected by PromiseController reset.',\n};\n","'use strict';\n\nmodule.exports = Number.isNaN || function isNaN(a) {\n\treturn a !== a;\n};\n","'use strict';\n\nvar fnToStr = Function.prototype.toString;\nvar reflectApply = typeof Reflect === 'object' && Reflect !== null && Reflect.apply;\nvar badArrayLike;\nvar isCallableMarker;\nif (typeof reflectApply === 'function' && typeof Object.defineProperty === 'function') {\n\ttry {\n\t\tbadArrayLike = Object.defineProperty({}, 'length', {\n\t\t\tget: function () {\n\t\t\t\tthrow isCallableMarker;\n\t\t\t}\n\t\t});\n\t\tisCallableMarker = {};\n\t\t// eslint-disable-next-line no-throw-literal\n\t\treflectApply(function () { throw 42; }, null, badArrayLike);\n\t} catch (_) {\n\t\tif (_ !== isCallableMarker) {\n\t\t\treflectApply = null;\n\t\t}\n\t}\n} else {\n\treflectApply = null;\n}\n\nvar constructorRegex = /^\\s*class\\b/;\nvar isES6ClassFn = function isES6ClassFunction(value) {\n\ttry {\n\t\tvar fnStr = fnToStr.call(value);\n\t\treturn constructorRegex.test(fnStr);\n\t} catch (e) {\n\t\treturn false; // not a function\n\t}\n};\n\nvar tryFunctionObject = function tryFunctionToStr(value) {\n\ttry {\n\t\tif (isES6ClassFn(value)) { return false; }\n\t\tfnToStr.call(value);\n\t\treturn true;\n\t} catch (e) {\n\t\treturn false;\n\t}\n};\nvar toStr = Object.prototype.toString;\nvar fnClass = '[object Function]';\nvar genClass = '[object GeneratorFunction]';\nvar hasToStringTag = typeof Symbol === 'function' && typeof Symbol.toStringTag === 'symbol';\n\nmodule.exports = reflectApply\n\t? function isCallable(value) {\n\t\tif (!value) { return false; }\n\t\tif (typeof value !== 'function' && typeof value !== 'object') { return false; }\n\t\tif (typeof value === 'function' && !value.prototype) { return true; }\n\t\ttry {\n\t\t\treflectApply(value, null, badArrayLike);\n\t\t} catch (e) {\n\t\t\tif (e !== isCallableMarker) { return false; }\n\t\t}\n\t\treturn !isES6ClassFn(value);\n\t}\n\t: function isCallable(value) {\n\t\tif (!value) { return false; }\n\t\tif (typeof value !== 'function' && typeof value !== 'object') { return false; }\n\t\tif (typeof value === 'function' && !value.prototype) { return true; }\n\t\tif (hasToStringTag) { return tryFunctionObject(value); }\n\t\tif (isES6ClassFn(value)) { return false; }\n\t\tvar strClass = toStr.call(value);\n\t\treturn strClass === fnClass || strClass === genClass;\n\t};\n","if (typeof Object.create === 'function') {\n  // implementation from standard node.js 'util' module\n  module.exports = function inherits(ctor, superCtor) {\n    ctor.super_ = superCtor\n    ctor.prototype = Object.create(superCtor.prototype, {\n      constructor: {\n        value: ctor,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n  };\n} else {\n  // old school shim for old browsers\n  module.exports = function inherits(ctor, superCtor) {\n    ctor.super_ = superCtor\n    var TempCtor = function () {}\n    TempCtor.prototype = superCtor.prototype\n    ctor.prototype = new TempCtor()\n    ctor.prototype.constructor = ctor\n  }\n}\n","'use strict';\n\nvar GetIntrinsic = require('../GetIntrinsic');\n\nvar callBind = require('./callBind');\n\nvar $indexOf = callBind(GetIntrinsic('String.prototype.indexOf'));\n\nmodule.exports = function callBoundIntrinsic(name, allowMissing) {\n\tvar intrinsic = GetIntrinsic(name, !!allowMissing);\n\tif (typeof intrinsic === 'function' && $indexOf(name, '.prototype.')) {\n\t\treturn callBind(intrinsic);\n\t}\n\treturn intrinsic;\n};\n","'use strict';\n\nvar GetIntrinsic = require('../GetIntrinsic');\n\nvar $defineProperty = GetIntrinsic('%Object.defineProperty%', true);\n\nif ($defineProperty) {\n\ttry {\n\t\t$defineProperty({}, 'a', { value: 1 });\n\t} catch (e) {\n\t\t// IE 8 has a broken defineProperty\n\t\t$defineProperty = null;\n\t}\n}\n\nvar callBound = require('../helpers/callBound');\n\nvar $isEnumerable = callBound('Object.prototype.propertyIsEnumerable');\n\n// eslint-disable-next-line max-params\nmodule.exports = function DefineOwnProperty(IsDataDescriptor, SameValue, FromPropertyDescriptor, O, P, desc) {\n\tif (!$defineProperty) {\n\t\tif (!IsDataDescriptor(desc)) {\n\t\t\t// ES3 does not support getters/setters\n\t\t\treturn false;\n\t\t}\n\t\tif (!desc['[[Configurable]]'] || !desc['[[Writable]]']) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// fallback for ES3\n\t\tif (P in O && $isEnumerable(O, P) !== !!desc['[[Enumerable]]']) {\n\t\t\t// a non-enumerable existing property\n\t\t\treturn false;\n\t\t}\n\n\t\t// property does not exist at all, or exists but is enumerable\n\t\tvar V = desc['[[Value]]'];\n\t\t// eslint-disable-next-line no-param-reassign\n\t\tO[P] = V; // will use [[Define]]\n\t\treturn SameValue(O[P], V);\n\t}\n\t$defineProperty(O, P, FromPropertyDescriptor(desc));\n\treturn true;\n};\n","'use strict';\n\nvar GetIntrinsic = require('../GetIntrinsic.js');\n\nvar $construct = GetIntrinsic('%Reflect.construct%', true);\n\nvar DefinePropertyOrThrow = require('./DefinePropertyOrThrow');\ntry {\n\tDefinePropertyOrThrow({}, '', { '[[Get]]': function () {} });\n} catch (e) {\n\t// Accessor properties aren't supported\n\tDefinePropertyOrThrow = null;\n}\n\n// https://www.ecma-international.org/ecma-262/6.0/#sec-isconstructor\n\nif (DefinePropertyOrThrow && $construct) {\n\tvar isConstructorMarker = {};\n\tvar badArrayLike = {};\n\tDefinePropertyOrThrow(badArrayLike, 'length', {\n\t\t'[[Get]]': function () {\n\t\t\tthrow isConstructorMarker;\n\t\t},\n\t\t'[[Enumerable]]': true\n\t});\n\n\tmodule.exports = function IsConstructor(argument) {\n\t\ttry {\n\t\t\t// `Reflect.construct` invokes `IsConstructor(target)` before `Get(args, 'length')`:\n\t\t\t$construct(argument, badArrayLike);\n\t\t} catch (err) {\n\t\t\treturn err === isConstructorMarker;\n\t\t}\n\t};\n} else {\n\tmodule.exports = function IsConstructor(argument) {\n\t\t// unfortunately there's no way to truly check this without try/catch `new argument` in old environments\n\t\treturn typeof argument === 'function' && !!argument.prototype;\n\t};\n}\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nvar getOwnPropertyDescriptors = Object.getOwnPropertyDescriptors ||\n  function getOwnPropertyDescriptors(obj) {\n    var keys = Object.keys(obj);\n    var descriptors = {};\n    for (var i = 0; i < keys.length; i++) {\n      descriptors[keys[i]] = Object.getOwnPropertyDescriptor(obj, keys[i]);\n    }\n    return descriptors;\n  };\n\nvar formatRegExp = /%[sdj%]/g;\nexports.format = function(f) {\n  if (!isString(f)) {\n    var objects = [];\n    for (var i = 0; i < arguments.length; i++) {\n      objects.push(inspect(arguments[i]));\n    }\n    return objects.join(' ');\n  }\n\n  var i = 1;\n  var args = arguments;\n  var len = args.length;\n  var str = String(f).replace(formatRegExp, function(x) {\n    if (x === '%%') return '%';\n    if (i >= len) return x;\n    switch (x) {\n      case '%s': return String(args[i++]);\n      case '%d': return Number(args[i++]);\n      case '%j':\n        try {\n          return JSON.stringify(args[i++]);\n        } catch (_) {\n          return '[Circular]';\n        }\n      default:\n        return x;\n    }\n  });\n  for (var x = args[i]; i < len; x = args[++i]) {\n    if (isNull(x) || !isObject(x)) {\n      str += ' ' + x;\n    } else {\n      str += ' ' + inspect(x);\n    }\n  }\n  return str;\n};\n\n\n// Mark that a method should not be used.\n// Returns a modified function which warns once by default.\n// If --no-deprecation is set, then it is a no-op.\nexports.deprecate = function(fn, msg) {\n  if (typeof process !== 'undefined' && process.noDeprecation === true) {\n    return fn;\n  }\n\n  // Allow for deprecating things in the process of starting up.\n  if (typeof process === 'undefined') {\n    return function() {\n      return exports.deprecate(fn, msg).apply(this, arguments);\n    };\n  }\n\n  var warned = false;\n  function deprecated() {\n    if (!warned) {\n      if (process.throwDeprecation) {\n        throw new Error(msg);\n      } else if (process.traceDeprecation) {\n        console.trace(msg);\n      } else {\n        console.error(msg);\n      }\n      warned = true;\n    }\n    return fn.apply(this, arguments);\n  }\n\n  return deprecated;\n};\n\n\nvar debugs = {};\nvar debugEnviron;\nexports.debuglog = function(set) {\n  if (isUndefined(debugEnviron))\n    debugEnviron = process.env.NODE_DEBUG || '';\n  set = set.toUpperCase();\n  if (!debugs[set]) {\n    if (new RegExp('\\\\b' + set + '\\\\b', 'i').test(debugEnviron)) {\n      var pid = process.pid;\n      debugs[set] = function() {\n        var msg = exports.format.apply(exports, arguments);\n        console.error('%s %d: %s', set, pid, msg);\n      };\n    } else {\n      debugs[set] = function() {};\n    }\n  }\n  return debugs[set];\n};\n\n\n/**\n * Echos the value of a value. Trys to print the value out\n * in the best way possible given the different types.\n *\n * @param {Object} obj The object to print out.\n * @param {Object} opts Optional options object that alters the output.\n */\n/* legacy: obj, showHidden, depth, colors*/\nfunction inspect(obj, opts) {\n  // default options\n  var ctx = {\n    seen: [],\n    stylize: stylizeNoColor\n  };\n  // legacy...\n  if (arguments.length >= 3) ctx.depth = arguments[2];\n  if (arguments.length >= 4) ctx.colors = arguments[3];\n  if (isBoolean(opts)) {\n    // legacy...\n    ctx.showHidden = opts;\n  } else if (opts) {\n    // got an \"options\" object\n    exports._extend(ctx, opts);\n  }\n  // set default options\n  if (isUndefined(ctx.showHidden)) ctx.showHidden = false;\n  if (isUndefined(ctx.depth)) ctx.depth = 2;\n  if (isUndefined(ctx.colors)) ctx.colors = false;\n  if (isUndefined(ctx.customInspect)) ctx.customInspect = true;\n  if (ctx.colors) ctx.stylize = stylizeWithColor;\n  return formatValue(ctx, obj, ctx.depth);\n}\nexports.inspect = inspect;\n\n\n// http://en.wikipedia.org/wiki/ANSI_escape_code#graphics\ninspect.colors = {\n  'bold' : [1, 22],\n  'italic' : [3, 23],\n  'underline' : [4, 24],\n  'inverse' : [7, 27],\n  'white' : [37, 39],\n  'grey' : [90, 39],\n  'black' : [30, 39],\n  'blue' : [34, 39],\n  'cyan' : [36, 39],\n  'green' : [32, 39],\n  'magenta' : [35, 39],\n  'red' : [31, 39],\n  'yellow' : [33, 39]\n};\n\n// Don't use 'blue' not visible on cmd.exe\ninspect.styles = {\n  'special': 'cyan',\n  'number': 'yellow',\n  'boolean': 'yellow',\n  'undefined': 'grey',\n  'null': 'bold',\n  'string': 'green',\n  'date': 'magenta',\n  // \"name\": intentionally not styling\n  'regexp': 'red'\n};\n\n\nfunction stylizeWithColor(str, styleType) {\n  var style = inspect.styles[styleType];\n\n  if (style) {\n    return '\\u001b[' + inspect.colors[style][0] + 'm' + str +\n           '\\u001b[' + inspect.colors[style][1] + 'm';\n  } else {\n    return str;\n  }\n}\n\n\nfunction stylizeNoColor(str, styleType) {\n  return str;\n}\n\n\nfunction arrayToHash(array) {\n  var hash = {};\n\n  array.forEach(function(val, idx) {\n    hash[val] = true;\n  });\n\n  return hash;\n}\n\n\nfunction formatValue(ctx, value, recurseTimes) {\n  // Provide a hook for user-specified inspect functions.\n  // Check that value is an object with an inspect function on it\n  if (ctx.customInspect &&\n      value &&\n      isFunction(value.inspect) &&\n      // Filter out the util module, it's inspect function is special\n      value.inspect !== exports.inspect &&\n      // Also filter out any prototype objects using the circular check.\n      !(value.constructor && value.constructor.prototype === value)) {\n    var ret = value.inspect(recurseTimes, ctx);\n    if (!isString(ret)) {\n      ret = formatValue(ctx, ret, recurseTimes);\n    }\n    return ret;\n  }\n\n  // Primitive types cannot have properties\n  var primitive = formatPrimitive(ctx, value);\n  if (primitive) {\n    return primitive;\n  }\n\n  // Look up the keys of the object.\n  var keys = Object.keys(value);\n  var visibleKeys = arrayToHash(keys);\n\n  if (ctx.showHidden) {\n    keys = Object.getOwnPropertyNames(value);\n  }\n\n  // IE doesn't make error fields non-enumerable\n  // http://msdn.microsoft.com/en-us/library/ie/dww52sbt(v=vs.94).aspx\n  if (isError(value)\n      && (keys.indexOf('message') >= 0 || keys.indexOf('description') >= 0)) {\n    return formatError(value);\n  }\n\n  // Some type of object without properties can be shortcutted.\n  if (keys.length === 0) {\n    if (isFunction(value)) {\n      var name = value.name ? ': ' + value.name : '';\n      return ctx.stylize('[Function' + name + ']', 'special');\n    }\n    if (isRegExp(value)) {\n      return ctx.stylize(RegExp.prototype.toString.call(value), 'regexp');\n    }\n    if (isDate(value)) {\n      return ctx.stylize(Date.prototype.toString.call(value), 'date');\n    }\n    if (isError(value)) {\n      return formatError(value);\n    }\n  }\n\n  var base = '', array = false, braces = ['{', '}'];\n\n  // Make Array say that they are Array\n  if (isArray(value)) {\n    array = true;\n    braces = ['[', ']'];\n  }\n\n  // Make functions say that they are functions\n  if (isFunction(value)) {\n    var n = value.name ? ': ' + value.name : '';\n    base = ' [Function' + n + ']';\n  }\n\n  // Make RegExps say that they are RegExps\n  if (isRegExp(value)) {\n    base = ' ' + RegExp.prototype.toString.call(value);\n  }\n\n  // Make dates with properties first say the date\n  if (isDate(value)) {\n    base = ' ' + Date.prototype.toUTCString.call(value);\n  }\n\n  // Make error with message first say the error\n  if (isError(value)) {\n    base = ' ' + formatError(value);\n  }\n\n  if (keys.length === 0 && (!array || value.length == 0)) {\n    return braces[0] + base + braces[1];\n  }\n\n  if (recurseTimes < 0) {\n    if (isRegExp(value)) {\n      return ctx.stylize(RegExp.prototype.toString.call(value), 'regexp');\n    } else {\n      return ctx.stylize('[Object]', 'special');\n    }\n  }\n\n  ctx.seen.push(value);\n\n  var output;\n  if (array) {\n    output = formatArray(ctx, value, recurseTimes, visibleKeys, keys);\n  } else {\n    output = keys.map(function(key) {\n      return formatProperty(ctx, value, recurseTimes, visibleKeys, key, array);\n    });\n  }\n\n  ctx.seen.pop();\n\n  return reduceToSingleString(output, base, braces);\n}\n\n\nfunction formatPrimitive(ctx, value) {\n  if (isUndefined(value))\n    return ctx.stylize('undefined', 'undefined');\n  if (isString(value)) {\n    var simple = '\\'' + JSON.stringify(value).replace(/^\"|\"$/g, '')\n                                             .replace(/'/g, \"\\\\'\")\n                                             .replace(/\\\\\"/g, '\"') + '\\'';\n    return ctx.stylize(simple, 'string');\n  }\n  if (isNumber(value))\n    return ctx.stylize('' + value, 'number');\n  if (isBoolean(value))\n    return ctx.stylize('' + value, 'boolean');\n  // For some reason typeof null is \"object\", so special case here.\n  if (isNull(value))\n    return ctx.stylize('null', 'null');\n}\n\n\nfunction formatError(value) {\n  return '[' + Error.prototype.toString.call(value) + ']';\n}\n\n\nfunction formatArray(ctx, value, recurseTimes, visibleKeys, keys) {\n  var output = [];\n  for (var i = 0, l = value.length; i < l; ++i) {\n    if (hasOwnProperty(value, String(i))) {\n      output.push(formatProperty(ctx, value, recurseTimes, visibleKeys,\n          String(i), true));\n    } else {\n      output.push('');\n    }\n  }\n  keys.forEach(function(key) {\n    if (!key.match(/^\\d+$/)) {\n      output.push(formatProperty(ctx, value, recurseTimes, visibleKeys,\n          key, true));\n    }\n  });\n  return output;\n}\n\n\nfunction formatProperty(ctx, value, recurseTimes, visibleKeys, key, array) {\n  var name, str, desc;\n  desc = Object.getOwnPropertyDescriptor(value, key) || { value: value[key] };\n  if (desc.get) {\n    if (desc.set) {\n      str = ctx.stylize('[Getter/Setter]', 'special');\n    } else {\n      str = ctx.stylize('[Getter]', 'special');\n    }\n  } else {\n    if (desc.set) {\n      str = ctx.stylize('[Setter]', 'special');\n    }\n  }\n  if (!hasOwnProperty(visibleKeys, key)) {\n    name = '[' + key + ']';\n  }\n  if (!str) {\n    if (ctx.seen.indexOf(desc.value) < 0) {\n      if (isNull(recurseTimes)) {\n        str = formatValue(ctx, desc.value, null);\n      } else {\n        str = formatValue(ctx, desc.value, recurseTimes - 1);\n      }\n      if (str.indexOf('\\n') > -1) {\n        if (array) {\n          str = str.split('\\n').map(function(line) {\n            return '  ' + line;\n          }).join('\\n').substr(2);\n        } else {\n          str = '\\n' + str.split('\\n').map(function(line) {\n            return '   ' + line;\n          }).join('\\n');\n        }\n      }\n    } else {\n      str = ctx.stylize('[Circular]', 'special');\n    }\n  }\n  if (isUndefined(name)) {\n    if (array && key.match(/^\\d+$/)) {\n      return str;\n    }\n    name = JSON.stringify('' + key);\n    if (name.match(/^\"([a-zA-Z_][a-zA-Z_0-9]*)\"$/)) {\n      name = name.substr(1, name.length - 2);\n      name = ctx.stylize(name, 'name');\n    } else {\n      name = name.replace(/'/g, \"\\\\'\")\n                 .replace(/\\\\\"/g, '\"')\n                 .replace(/(^\"|\"$)/g, \"'\");\n      name = ctx.stylize(name, 'string');\n    }\n  }\n\n  return name + ': ' + str;\n}\n\n\nfunction reduceToSingleString(output, base, braces) {\n  var numLinesEst = 0;\n  var length = output.reduce(function(prev, cur) {\n    numLinesEst++;\n    if (cur.indexOf('\\n') >= 0) numLinesEst++;\n    return prev + cur.replace(/\\u001b\\[\\d\\d?m/g, '').length + 1;\n  }, 0);\n\n  if (length > 60) {\n    return braces[0] +\n           (base === '' ? '' : base + '\\n ') +\n           ' ' +\n           output.join(',\\n  ') +\n           ' ' +\n           braces[1];\n  }\n\n  return braces[0] + base + ' ' + output.join(', ') + ' ' + braces[1];\n}\n\n\n// NOTE: These type checking functions intentionally don't use `instanceof`\n// because it is fragile and can be easily faked with `Object.create()`.\nfunction isArray(ar) {\n  return Array.isArray(ar);\n}\nexports.isArray = isArray;\n\nfunction isBoolean(arg) {\n  return typeof arg === 'boolean';\n}\nexports.isBoolean = isBoolean;\n\nfunction isNull(arg) {\n  return arg === null;\n}\nexports.isNull = isNull;\n\nfunction isNullOrUndefined(arg) {\n  return arg == null;\n}\nexports.isNullOrUndefined = isNullOrUndefined;\n\nfunction isNumber(arg) {\n  return typeof arg === 'number';\n}\nexports.isNumber = isNumber;\n\nfunction isString(arg) {\n  return typeof arg === 'string';\n}\nexports.isString = isString;\n\nfunction isSymbol(arg) {\n  return typeof arg === 'symbol';\n}\nexports.isSymbol = isSymbol;\n\nfunction isUndefined(arg) {\n  return arg === void 0;\n}\nexports.isUndefined = isUndefined;\n\nfunction isRegExp(re) {\n  return isObject(re) && objectToString(re) === '[object RegExp]';\n}\nexports.isRegExp = isRegExp;\n\nfunction isObject(arg) {\n  return typeof arg === 'object' && arg !== null;\n}\nexports.isObject = isObject;\n\nfunction isDate(d) {\n  return isObject(d) && objectToString(d) === '[object Date]';\n}\nexports.isDate = isDate;\n\nfunction isError(e) {\n  return isObject(e) &&\n      (objectToString(e) === '[object Error]' || e instanceof Error);\n}\nexports.isError = isError;\n\nfunction isFunction(arg) {\n  return typeof arg === 'function';\n}\nexports.isFunction = isFunction;\n\nfunction isPrimitive(arg) {\n  return arg === null ||\n         typeof arg === 'boolean' ||\n         typeof arg === 'number' ||\n         typeof arg === 'string' ||\n         typeof arg === 'symbol' ||  // ES6 symbol\n         typeof arg === 'undefined';\n}\nexports.isPrimitive = isPrimitive;\n\nexports.isBuffer = require('./support/isBuffer');\n\nfunction objectToString(o) {\n  return Object.prototype.toString.call(o);\n}\n\n\nfunction pad(n) {\n  return n < 10 ? '0' + n.toString(10) : n.toString(10);\n}\n\n\nvar months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep',\n              'Oct', 'Nov', 'Dec'];\n\n// 26 Feb 16:19:34\nfunction timestamp() {\n  var d = new Date();\n  var time = [pad(d.getHours()),\n              pad(d.getMinutes()),\n              pad(d.getSeconds())].join(':');\n  return [d.getDate(), months[d.getMonth()], time].join(' ');\n}\n\n\n// log is just a thin wrapper to console.log that prepends a timestamp\nexports.log = function() {\n  console.log('%s - %s', timestamp(), exports.format.apply(exports, arguments));\n};\n\n\n/**\n * Inherit the prototype methods from one constructor into another.\n *\n * The Function.prototype.inherits from lang.js rewritten as a standalone\n * function (not on Function.prototype). NOTE: If this file is to be loaded\n * during bootstrapping this function needs to be rewritten using some native\n * functions as prototype setup using normal JavaScript does not work as\n * expected during bootstrapping (see mirror.js in r114903).\n *\n * @param {function} ctor Constructor function which needs to inherit the\n *     prototype.\n * @param {function} superCtor Constructor function to inherit prototype from.\n */\nexports.inherits = require('inherits');\n\nexports._extend = function(origin, add) {\n  // Don't do anything if add isn't an object\n  if (!add || !isObject(add)) return origin;\n\n  var keys = Object.keys(add);\n  var i = keys.length;\n  while (i--) {\n    origin[keys[i]] = add[keys[i]];\n  }\n  return origin;\n};\n\nfunction hasOwnProperty(obj, prop) {\n  return Object.prototype.hasOwnProperty.call(obj, prop);\n}\n\nvar kCustomPromisifiedSymbol = typeof Symbol !== 'undefined' ? Symbol('util.promisify.custom') : undefined;\n\nexports.promisify = function promisify(original) {\n  if (typeof original !== 'function')\n    throw new TypeError('The \"original\" argument must be of type Function');\n\n  if (kCustomPromisifiedSymbol && original[kCustomPromisifiedSymbol]) {\n    var fn = original[kCustomPromisifiedSymbol];\n    if (typeof fn !== 'function') {\n      throw new TypeError('The \"util.promisify.custom\" argument must be of type Function');\n    }\n    Object.defineProperty(fn, kCustomPromisifiedSymbol, {\n      value: fn, enumerable: false, writable: false, configurable: true\n    });\n    return fn;\n  }\n\n  function fn() {\n    var promiseResolve, promiseReject;\n    var promise = new Promise(function (resolve, reject) {\n      promiseResolve = resolve;\n      promiseReject = reject;\n    });\n\n    var args = [];\n    for (var i = 0; i < arguments.length; i++) {\n      args.push(arguments[i]);\n    }\n    args.push(function (err, value) {\n      if (err) {\n        promiseReject(err);\n      } else {\n        promiseResolve(value);\n      }\n    });\n\n    try {\n      original.apply(this, args);\n    } catch (err) {\n      promiseReject(err);\n    }\n\n    return promise;\n  }\n\n  Object.setPrototypeOf(fn, Object.getPrototypeOf(original));\n\n  if (kCustomPromisifiedSymbol) Object.defineProperty(fn, kCustomPromisifiedSymbol, {\n    value: fn, enumerable: false, writable: false, configurable: true\n  });\n  return Object.defineProperties(\n    fn,\n    getOwnPropertyDescriptors(original)\n  );\n}\n\nexports.promisify.custom = kCustomPromisifiedSymbol\n\nfunction callbackifyOnRejected(reason, cb) {\n  // `!reason` guard inspired by bluebird (Ref: https://goo.gl/t5IS6M).\n  // Because `null` is a special error value in callbacks which means \"no error\n  // occurred\", we error-wrap so the callback consumer can distinguish between\n  // \"the promise rejected with null\" or \"the promise fulfilled with undefined\".\n  if (!reason) {\n    var newReason = new Error('Promise was rejected with a falsy value');\n    newReason.reason = reason;\n    reason = newReason;\n  }\n  return cb(reason);\n}\n\nfunction callbackify(original) {\n  if (typeof original !== 'function') {\n    throw new TypeError('The \"original\" argument must be of type Function');\n  }\n\n  // We DO NOT return the promise as it gives the user a false sense that\n  // the promise is actually somehow related to the callback's execution\n  // and that the callback throwing will reject the promise.\n  function callbackified() {\n    var args = [];\n    for (var i = 0; i < arguments.length; i++) {\n      args.push(arguments[i]);\n    }\n\n    var maybeCb = args.pop();\n    if (typeof maybeCb !== 'function') {\n      throw new TypeError('The last argument must be of type Function');\n    }\n    var self = this;\n    var cb = function() {\n      return maybeCb.apply(self, arguments);\n    };\n    // In true node style we process the callback on `nextTick` with all the\n    // implications (stack, `uncaughtException`, `async_hooks`)\n    original.apply(this, args)\n      .then(function(ret) { process.nextTick(cb, null, ret) },\n            function(rej) { process.nextTick(callbackifyOnRejected, rej, cb) });\n  }\n\n  Object.setPrototypeOf(callbackified, Object.getPrototypeOf(original));\n  Object.defineProperties(callbackified,\n                          getOwnPropertyDescriptors(original));\n  return callbackified;\n}\nexports.callbackify = callbackify;\n","/**\n * WebSocket with promise api\n */\n\n/**\n * @external Channel\n */\n\nconst Channel = require('chnl');\nconst PromiseController = require('promise-controller');\nconst Requests = require('./requests');\nconst defaultOptions = require('./options');\nconst {throwIf} = require('./utils');\n\n// see: https://developer.mozilla.org/en-US/docs/Web/API/WebSocket#Ready_state_constants\nconst STATE = {\n  CONNECTING: 0,\n  OPEN: 1,\n  CLOSING: 2,\n  CLOSED: 3,\n};\n\n/**\n * @typicalname wsp\n */\nclass WebSocketAsPromised {\n  /**\n   * Constructor. Unlike original WebSocket it does not immediately open connection.\n   * Please call `open()` method to connect.\n   *\n   * @param {String} url WebSocket URL\n   * @param {Options} [options]\n   */\n  constructor(url, options) {\n    this._assertOptions(options);\n    this._url = url;\n    this._options = Object.assign({}, defaultOptions, options);\n    this._requests = new Requests();\n    this._ws = null;\n    this._wsSubscription = null;\n    this._createOpeningController();\n    this._createClosingController();\n    this._createChannels();\n  }\n\n  /**\n   * Returns original WebSocket instance created by `options.createWebSocket`.\n   *\n   * @returns {WebSocket}\n   */\n  get ws() {\n    return this._ws;\n  }\n\n  /**\n   * Returns WebSocket url.\n   *\n   * @returns {String}\n   */\n  get url() {\n    return this._url;\n  }\n\n  /**\n   * Is WebSocket connection in opening state.\n   *\n   * @returns {Boolean}\n   */\n  get isOpening() {\n    return Boolean(this._ws && this._ws.readyState === STATE.CONNECTING);\n  }\n\n  /**\n   * Is WebSocket connection opened.\n   *\n   * @returns {Boolean}\n   */\n  get isOpened() {\n    return Boolean(this._ws && this._ws.readyState === STATE.OPEN);\n  }\n\n  /**\n   * Is WebSocket connection in closing state.\n   *\n   * @returns {Boolean}\n   */\n  get isClosing() {\n    return Boolean(this._ws && this._ws.readyState === STATE.CLOSING);\n  }\n\n  /**\n   * Is WebSocket connection closed.\n   *\n   * @returns {Boolean}\n   */\n  get isClosed() {\n    return Boolean(!this._ws || this._ws.readyState === STATE.CLOSED);\n  }\n\n  /**\n   * Event channel triggered when connection is opened.\n   *\n   * @see https://vitalets.github.io/chnl/#channel\n   * @example\n   * wsp.onOpen.addListener(() => console.log('Connection opened'));\n   *\n   * @returns {Channel}\n   */\n  get onOpen() {\n    return this._onOpen;\n  }\n\n  /**\n   * Event channel triggered every time when message is sent to server.\n   *\n   * @see https://vitalets.github.io/chnl/#channel\n   * @example\n   * wsp.onSend.addListener(data => console.log('Message sent', data));\n   *\n   * @returns {Channel}\n   */\n  get onSend() {\n    return this._onSend;\n  }\n\n  /**\n   * Event channel triggered every time when message received from server.\n   *\n   * @see https://vitalets.github.io/chnl/#channel\n   * @example\n   * wsp.onMessage.addListener(message => console.log(message));\n   *\n   * @returns {Channel}\n   */\n  get onMessage() {\n    return this._onMessage;\n  }\n\n  /**\n   * Event channel triggered every time when received message is successfully unpacked.\n   * For example, if you are using JSON transport, the listener will receive already JSON parsed data.\n   *\n   * @see https://vitalets.github.io/chnl/#channel\n   * @example\n   * wsp.onUnpackedMessage.addListener(data => console.log(data.foo));\n   *\n   * @returns {Channel}\n   */\n  get onUnpackedMessage() {\n    return this._onUnpackedMessage;\n  }\n\n  /**\n   * Event channel triggered every time when response to some request comes.\n   * Received message considered a response if requestId is found in it.\n   *\n   * @see https://vitalets.github.io/chnl/#channel\n   * @example\n   * wsp.onResponse.addListener(data => console.log(data));\n   *\n   * @returns {Channel}\n   */\n  get onResponse() {\n    return this._onResponse;\n  }\n\n  /**\n   * Event channel triggered when connection closed.\n   * Listener accepts single argument `{code, reason}`.\n   *\n   * @see https://vitalets.github.io/chnl/#channel\n   * @example\n   * wsp.onClose.addListener(event => console.log(`Connections closed: ${event.reason}`));\n   *\n   * @returns {Channel}\n   */\n  get onClose() {\n    return this._onClose;\n  }\n\n  /**\n   * Event channel triggered when by Websocket 'error' event.\n   *\n   * @see https://vitalets.github.io/chnl/#channel\n   * @example\n   * wsp.onError.addListener(event => console.error(event));\n   *\n   * @returns {Channel}\n   */\n  get onError() {\n    return this._onError;\n  }\n\n  /**\n   * Opens WebSocket connection. If connection already opened, promise will be resolved with \"open event\".\n   *\n   * @returns {Promise<Event>}\n   */\n  open() {\n    if (this.isClosing) {\n      return Promise.reject(new Error(`Can't open WebSocket while closing.`));\n    }\n    if (this.isOpened) {\n      return this._opening.promise;\n    }\n    return this._opening.call(() => {\n      this._opening.promise.catch(e => this._cleanup(e));\n      this._createWS();\n    });\n  }\n\n  /**\n   * Performs request and waits for response.\n   *\n   * @param {*} data\n   * @param {Object} [options]\n   * @param {String|Number} [options.requestId=<auto-generated>]\n   * @param {Number} [options.timeout=0]\n   * @returns {Promise}\n   */\n  sendRequest(data, options = {}) {\n    const requestId = options.requestId || `${Math.random()}`;\n    const timeout = options.timeout !== undefined ? options.timeout : this._options.timeout;\n    return this._requests.create(requestId, () => {\n      this._assertRequestIdHandlers();\n      const finalData = this._options.attachRequestId(data, requestId);\n      this.sendPacked(finalData);\n    }, timeout);\n  }\n\n  /**\n   * Packs data with `options.packMessage` and sends to the server.\n   *\n   * @param {*} data\n   */\n  sendPacked(data) {\n    this._assertPackingHandlers();\n    const message = this._options.packMessage(data);\n    this.send(message);\n  }\n\n  /**\n   * Sends data without packing.\n   *\n   * @param {String|Blob|ArrayBuffer} data\n   */\n  send(data) {\n    throwIf(!this.isOpened, `Can't send data because WebSocket is not opened.`);\n    this._ws.send(data);\n    this._onSend.dispatchAsync(data);\n  }\n\n  /**\n   * Closes WebSocket connection. If connection already closed, promise will be resolved with \"close event\".\n   *\n   * @param {number=} [code=1000] A numeric value indicating the status code.\n   * @param {string=} [reason] A human-readable reason for closing connection.\n   * @returns {Promise<Event>}\n   */\n  close(code, reason) { // https://developer.mozilla.org/en-US/docs/Web/API/WebSocket/close\n    return this.isClosed\n      ? Promise.resolve(this._closing.value)\n      : this._closing.call(() => this._ws.close(code, reason));\n  }\n\n  /**\n   * Removes all listeners from WSP instance. Useful for cleanup.\n   */\n  removeAllListeners() {\n    this._onOpen.removeAllListeners();\n    this._onMessage.removeAllListeners();\n    this._onUnpackedMessage.removeAllListeners();\n    this._onResponse.removeAllListeners();\n    this._onSend.removeAllListeners();\n    this._onClose.removeAllListeners();\n    this._onError.removeAllListeners();\n  }\n\n  _createOpeningController() {\n    const connectionTimeout = this._options.connectionTimeout || this._options.timeout;\n    this._opening = new PromiseController({\n      timeout: connectionTimeout,\n      timeoutReason: `Can't open WebSocket within allowed timeout: ${connectionTimeout} ms.`\n    });\n  }\n\n  _createClosingController() {\n    const closingTimeout = this._options.timeout;\n    this._closing = new PromiseController({\n      timeout: closingTimeout,\n      timeoutReason: `Can't close WebSocket within allowed timeout: ${closingTimeout} ms.`\n    });\n  }\n\n  _createChannels() {\n    this._onOpen = new Channel();\n    this._onMessage = new Channel();\n    this._onUnpackedMessage = new Channel();\n    this._onResponse = new Channel();\n    this._onSend = new Channel();\n    this._onClose = new Channel();\n    this._onError = new Channel();\n  }\n\n  _createWS() {\n    this._ws = this._options.createWebSocket(this._url);\n    this._wsSubscription = new Channel.Subscription([\n      { channel: this._ws, event: 'open', listener: e => this._handleOpen(e) },\n      { channel: this._ws, event: 'message', listener: e => this._handleMessage(e) },\n      { channel: this._ws, event: 'error', listener: e => this._handleError(e) },\n      { channel: this._ws, event: 'close', listener: e => this._handleClose(e) },\n    ]).on();\n  }\n\n  _handleOpen(event) {\n    this._onOpen.dispatchAsync(event);\n    this._opening.resolve(event);\n  }\n\n  _handleMessage(event) {\n    const data = this._options.extractMessageData(event);\n    this._onMessage.dispatchAsync(data);\n    this._tryUnpack(data);\n  }\n\n  _tryUnpack(data) {\n    if (this._options.unpackMessage) {\n      data = this._options.unpackMessage(data);\n      if (data !== undefined) {\n        this._onUnpackedMessage.dispatchAsync(data);\n        this._tryHandleResponse(data);\n      }\n    }\n  }\n\n  _tryHandleResponse(data) {\n    if (this._options.extractRequestId) {\n      const requestId = this._options.extractRequestId(data);\n      if (requestId) {\n        this._onResponse.dispatchAsync(data, requestId);\n        this._requests.resolve(requestId, data);\n      }\n    }\n  }\n\n  _handleError(event) {\n    this._onError.dispatchAsync(event);\n  }\n\n  _handleClose(event) {\n    this._onClose.dispatchAsync(event);\n    this._closing.resolve(event);\n    const error = new Error(`WebSocket closed with reason: ${event.reason} (${event.code}).`);\n    if (this._opening.isPending) {\n      this._opening.reject(error);\n    }\n    this._cleanup(error);\n  }\n\n  _cleanupWS() {\n    if (this._wsSubscription) {\n      this._wsSubscription.off();\n      this._wsSubscription = null;\n    }\n    this._ws = null;\n  }\n\n  _cleanup(error) {\n    this._cleanupWS();\n    this._requests.rejectAll(error);\n  }\n\n  _assertOptions(options) {\n    Object.keys(options || {}).forEach(key => {\n      if (!defaultOptions.hasOwnProperty(key)) {\n        throw new Error(`Unknown option: ${key}`);\n      }\n    });\n  }\n\n  _assertPackingHandlers() {\n    const { packMessage, unpackMessage } = this._options;\n    throwIf(!packMessage || !unpackMessage,\n      `Please define 'options.packMessage / options.unpackMessage' for sending packed messages.`\n    );\n  }\n\n  _assertRequestIdHandlers() {\n    const { attachRequestId, extractRequestId } = this._options;\n    throwIf(!attachRequestId || !extractRequestId,\n      `Please define 'options.attachRequestId / options.extractRequestId' for sending requests.`\n    );\n  }\n}\n\nmodule.exports = WebSocketAsPromised;\n","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.serializeTransfer = exports.serializeNonce = exports.serializeFeePacked = exports.serializeAmountFull = exports.serializeAmountPacked = exports.serializeTokenId = exports.serializeAccountId = exports.serializeAddress = exports.getEthSignatureType = exports.verifyERC1271Signature = exports.signMessagePersonalAPI = exports.getSignedBytesFromMessage = exports.getChangePubkeyMessage = exports.TokenSet = exports.isTokenETH = exports.sleep = exports.buffer2bitsBE = exports.isTransactionFeePackable = exports.closestPackableTransactionFee = exports.isTransactionAmountPackable = exports.closestPackableTransactionAmount = exports.packFeeChecked = exports.packAmountChecked = exports.reverseBits = exports.integerToFloat = exports.bitsIntoBytesInBEOrder = exports.floatToInteger = exports.ERC20_DEPOSIT_GAS_LIMIT = exports.ERC20_APPROVE_TRESHOLD = exports.MAX_ERC20_APPROVE_AMOUNT = exports.IEIP1271_INTERFACE = exports.SYNC_GOV_CONTRACT_INTERFACE = exports.SYNC_MAIN_CONTRACT_INTERFACE = exports.IERC20_INTERFACE = void 0;\nconst ethers_1 = require(\"ethers\");\n// Max number of tokens for the current version, it is determined by the zkSync circuit implementation.\nconst MAX_NUMBER_OF_TOKENS = 128;\n// Max number of accounts for the current version, it is determined by the zkSync circuit implementation.\nconst MAX_NUMBER_OF_ACCOUNTS = Math.pow(2, 24);\nexports.IERC20_INTERFACE = new ethers_1.utils.Interface(require('../abi/IERC20.json').abi);\nexports.SYNC_MAIN_CONTRACT_INTERFACE = new ethers_1.utils.Interface(require('../abi/SyncMain.json').abi);\nexports.SYNC_GOV_CONTRACT_INTERFACE = new ethers_1.utils.Interface(require('../abi/SyncGov.json').abi);\nexports.IEIP1271_INTERFACE = new ethers_1.utils.Interface(require('../abi/IEIP1271.json').abi);\nexports.MAX_ERC20_APPROVE_AMOUNT = '115792089237316195423570985008687907853269984665640564039457584007913129639935'; // 2^256 - 1\nexports.ERC20_APPROVE_TRESHOLD = '57896044618658097711785492504343953926634992332820282019728792003956564819968'; // 2^255\nexports.ERC20_DEPOSIT_GAS_LIMIT = ethers_1.BigNumber.from('300000'); // 300k\nconst AMOUNT_EXPONENT_BIT_WIDTH = 5;\nconst AMOUNT_MANTISSA_BIT_WIDTH = 35;\nconst FEE_EXPONENT_BIT_WIDTH = 5;\nconst FEE_MANTISSA_BIT_WIDTH = 11;\nfunction floatToInteger(floatBytes, expBits, mantissaBits, expBaseNumber) {\n    if (floatBytes.length * 8 !== mantissaBits + expBits) {\n        throw new Error('Float unpacking, incorrect input length');\n    }\n    const bits = buffer2bitsBE(floatBytes).reverse();\n    let exponent = ethers_1.BigNumber.from(0);\n    let expPow2 = ethers_1.BigNumber.from(1);\n    for (let i = 0; i < expBits; i++) {\n        if (bits[i] === 1) {\n            exponent = exponent.add(expPow2);\n        }\n        expPow2 = expPow2.mul(2);\n    }\n    exponent = ethers_1.BigNumber.from(expBaseNumber).pow(exponent);\n    let mantissa = ethers_1.BigNumber.from(0);\n    let mantissaPow2 = ethers_1.BigNumber.from(1);\n    for (let i = expBits; i < expBits + mantissaBits; i++) {\n        if (bits[i] === 1) {\n            mantissa = mantissa.add(mantissaPow2);\n        }\n        mantissaPow2 = mantissaPow2.mul(2);\n    }\n    return exponent.mul(mantissa);\n}\nexports.floatToInteger = floatToInteger;\nfunction bitsIntoBytesInBEOrder(bits) {\n    if (bits.length % 8 !== 0) {\n        throw new Error('wrong number of bits to pack');\n    }\n    const nBytes = bits.length / 8;\n    const resultBytes = new Uint8Array(nBytes);\n    for (let byte = 0; byte < nBytes; ++byte) {\n        let value = 0;\n        if (bits[byte * 8] === 1) {\n            value |= 0x80;\n        }\n        if (bits[byte * 8 + 1] === 1) {\n            value |= 0x40;\n        }\n        if (bits[byte * 8 + 2] === 1) {\n            value |= 0x20;\n        }\n        if (bits[byte * 8 + 3] === 1) {\n            value |= 0x10;\n        }\n        if (bits[byte * 8 + 4] === 1) {\n            value |= 0x08;\n        }\n        if (bits[byte * 8 + 5] === 1) {\n            value |= 0x04;\n        }\n        if (bits[byte * 8 + 6] === 1) {\n            value |= 0x02;\n        }\n        if (bits[byte * 8 + 7] === 1) {\n            value |= 0x01;\n        }\n        resultBytes[byte] = value;\n    }\n    return resultBytes;\n}\nexports.bitsIntoBytesInBEOrder = bitsIntoBytesInBEOrder;\nfunction numberToBits(integer, bits) {\n    const result = [];\n    for (let i = 0; i < bits; i++) {\n        result.push(integer & 1);\n        integer /= 2;\n    }\n    return result;\n}\nfunction integerToFloat(integer, exp_bits, mantissa_bits, exp_base) {\n    const max_exponent = ethers_1.BigNumber.from(10).pow(Math.pow(2, exp_bits) - 1);\n    const max_mantissa = ethers_1.BigNumber.from(2).pow(mantissa_bits).sub(1);\n    if (integer.gt(max_mantissa.mul(max_exponent))) {\n        throw new Error('Integer is too big');\n    }\n    let exponent = 0;\n    let mantissa = integer;\n    while (mantissa.gt(max_mantissa)) {\n        mantissa = mantissa.div(exp_base);\n        exponent += 1;\n    }\n    // encode into bits. First bits of mantissa in LE order\n    const encoding = [];\n    encoding.push(...numberToBits(exponent, exp_bits));\n    const mantissaNumber = mantissa.toNumber();\n    encoding.push(...numberToBits(mantissaNumber, mantissa_bits));\n    return bitsIntoBytesInBEOrder(encoding.reverse()).reverse();\n}\nexports.integerToFloat = integerToFloat;\nfunction reverseBits(buffer) {\n    const reversed = buffer.reverse();\n    reversed.map((b) => {\n        // reverse bits in byte\n        b = ((b & 0xf0) >> 4) | ((b & 0x0f) << 4);\n        b = ((b & 0xcc) >> 2) | ((b & 0x33) << 2);\n        b = ((b & 0xaa) >> 1) | ((b & 0x55) << 1);\n        return b;\n    });\n    return reversed;\n}\nexports.reverseBits = reverseBits;\nfunction packAmount(amount) {\n    return reverseBits(integerToFloat(amount, AMOUNT_EXPONENT_BIT_WIDTH, AMOUNT_MANTISSA_BIT_WIDTH, 10));\n}\nfunction packFee(amount) {\n    return reverseBits(integerToFloat(amount, FEE_EXPONENT_BIT_WIDTH, FEE_MANTISSA_BIT_WIDTH, 10));\n}\nfunction packAmountChecked(amount) {\n    if (closestPackableTransactionAmount(amount.toString()).toString() !== amount.toString()) {\n        throw new Error('Transaction Amount is not packable');\n    }\n    return packAmount(amount);\n}\nexports.packAmountChecked = packAmountChecked;\nfunction packFeeChecked(amount) {\n    if (closestPackableTransactionFee(amount.toString()).toString() !== amount.toString()) {\n        throw new Error('Fee Amount is not packable');\n    }\n    return packFee(amount);\n}\nexports.packFeeChecked = packFeeChecked;\n/**\n * packs and unpacks the amount, returning the closest packed value.\n * e.g 1000000003 => 1000000000\n * @param amount\n */\nfunction closestPackableTransactionAmount(amount) {\n    const packedAmount = packAmount(ethers_1.BigNumber.from(amount));\n    return floatToInteger(packedAmount, AMOUNT_EXPONENT_BIT_WIDTH, AMOUNT_MANTISSA_BIT_WIDTH, 10);\n}\nexports.closestPackableTransactionAmount = closestPackableTransactionAmount;\nfunction isTransactionAmountPackable(amount) {\n    return closestPackableTransactionAmount(amount).eq(amount);\n}\nexports.isTransactionAmountPackable = isTransactionAmountPackable;\n/**\n * packs and unpacks the amount, returning the closest packed value.\n * e.g 1000000003 => 1000000000\n * @param fee\n */\nfunction closestPackableTransactionFee(fee) {\n    const packedFee = packFee(ethers_1.BigNumber.from(fee));\n    return floatToInteger(packedFee, FEE_EXPONENT_BIT_WIDTH, FEE_MANTISSA_BIT_WIDTH, 10);\n}\nexports.closestPackableTransactionFee = closestPackableTransactionFee;\nfunction isTransactionFeePackable(amount) {\n    return closestPackableTransactionFee(amount).eq(amount);\n}\nexports.isTransactionFeePackable = isTransactionFeePackable;\nfunction buffer2bitsBE(buff) {\n    const res = new Array(buff.length * 8);\n    for (let i = 0; i < buff.length; i++) {\n        const b = buff[i];\n        res[i * 8] = (b & 0x80) !== 0 ? 1 : 0;\n        res[i * 8 + 1] = (b & 0x40) !== 0 ? 1 : 0;\n        res[i * 8 + 2] = (b & 0x20) !== 0 ? 1 : 0;\n        res[i * 8 + 3] = (b & 0x10) !== 0 ? 1 : 0;\n        res[i * 8 + 4] = (b & 0x08) !== 0 ? 1 : 0;\n        res[i * 8 + 5] = (b & 0x04) !== 0 ? 1 : 0;\n        res[i * 8 + 6] = (b & 0x02) !== 0 ? 1 : 0;\n        res[i * 8 + 7] = (b & 0x01) !== 0 ? 1 : 0;\n    }\n    return res;\n}\nexports.buffer2bitsBE = buffer2bitsBE;\nfunction sleep(ms) {\n    return new Promise((resolve) => setTimeout(resolve, ms));\n}\nexports.sleep = sleep;\nfunction isTokenETH(token) {\n    return token === 'ETH' || token === ethers_1.constants.AddressZero;\n}\nexports.isTokenETH = isTokenETH;\nclass TokenSet {\n    // TODO: handle stale entries, edge case when we rename token after adding it (#1132).\n    constructor(tokensBySymbol) {\n        this.tokensBySymbol = tokensBySymbol;\n    }\n    resolveTokenObject(tokenLike) {\n        if (this.tokensBySymbol[tokenLike]) {\n            return this.tokensBySymbol[tokenLike];\n        }\n        for (const token of Object.values(this.tokensBySymbol)) {\n            if (token.address.toLocaleLowerCase() == tokenLike.toLocaleLowerCase()) {\n                return token;\n            }\n        }\n        throw new Error(`Token ${tokenLike} is not supported`);\n    }\n    isTokenTransferAmountPackable(tokenLike, amount) {\n        const parsedAmount = this.parseToken(tokenLike, amount);\n        return isTransactionAmountPackable(parsedAmount);\n    }\n    isTokenTransactionFeePackable(tokenLike, amount) {\n        const parsedAmount = this.parseToken(tokenLike, amount);\n        return isTransactionFeePackable(parsedAmount);\n    }\n    formatToken(tokenLike, amount) {\n        const decimals = this.resolveTokenDecimals(tokenLike);\n        return ethers_1.utils.formatUnits(amount, decimals);\n    }\n    parseToken(tokenLike, amount) {\n        const decimals = this.resolveTokenDecimals(tokenLike);\n        return ethers_1.utils.parseUnits(amount, decimals);\n    }\n    resolveTokenDecimals(tokenLike) {\n        return this.resolveTokenObject(tokenLike).decimals;\n    }\n    resolveTokenId(tokenLike) {\n        return this.resolveTokenObject(tokenLike).id;\n    }\n    resolveTokenAddress(tokenLike) {\n        return this.resolveTokenObject(tokenLike).address;\n    }\n    resolveTokenSymbol(tokenLike) {\n        return this.resolveTokenObject(tokenLike).symbol;\n    }\n}\nexports.TokenSet = TokenSet;\nfunction getChangePubkeyMessage(pubKeyHash, nonce, accountId) {\n    const msgNonce = ethers_1.utils.hexlify(serializeNonce(nonce));\n    const msgAccId = ethers_1.utils.hexlify(serializeAccountId(accountId));\n    const pubKeyHashHex = pubKeyHash.replace('sync:', '').toLowerCase();\n    const message = `Register zkSync pubkey:\\n\\n` +\n        `${pubKeyHashHex}\\n` +\n        `nonce: ${msgNonce}\\n` +\n        `account id: ${msgAccId}\\n\\n` +\n        `Only sign this message for a trusted client!`;\n    return message;\n}\nexports.getChangePubkeyMessage = getChangePubkeyMessage;\nfunction getSignedBytesFromMessage(message, addPrefix) {\n    let messageBytes = typeof message === 'string' ? ethers_1.utils.toUtf8Bytes(message) : ethers_1.utils.arrayify(message);\n    if (addPrefix) {\n        messageBytes = ethers_1.utils.concat([\n            ethers_1.utils.toUtf8Bytes(`\\x19Ethereum Signed Message:\\n${messageBytes.length}`),\n            messageBytes\n        ]);\n    }\n    return messageBytes;\n}\nexports.getSignedBytesFromMessage = getSignedBytesFromMessage;\nfunction signMessagePersonalAPI(signer, message) {\n    return __awaiter(this, void 0, void 0, function* () {\n        if (signer instanceof ethers_1.ethers.providers.JsonRpcSigner) {\n            return signer.provider.send('personal_sign', [ethers_1.utils.hexlify(message), yield signer.getAddress()]).then((sign) => sign, (err) => {\n                // We check for method name in the error string because error messages about invalid method name\n                // often contain method name.\n                if (err.message.includes('personal_sign')) {\n                    // If no \"personal_sign\", use \"eth_sign\"\n                    return signer.signMessage(message);\n                }\n                throw err;\n            });\n        }\n        else {\n            return signer.signMessage(message);\n        }\n    });\n}\nexports.signMessagePersonalAPI = signMessagePersonalAPI;\nfunction verifyERC1271Signature(address, message, signature, signerOrProvider) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const EIP1271_SUCCESS_VALUE = '0x1626ba7e';\n        const hash = ethers_1.utils.keccak256(message);\n        const eip1271 = new ethers_1.ethers.Contract(address, exports.IEIP1271_INTERFACE, signerOrProvider);\n        const eipRetVal = yield eip1271.isValidSignature(ethers_1.utils.hexlify(hash), signature);\n        return eipRetVal === EIP1271_SUCCESS_VALUE;\n    });\n}\nexports.verifyERC1271Signature = verifyERC1271Signature;\nfunction getEthSignatureType(provider, message, signature, address) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const messageNoPrefix = getSignedBytesFromMessage(message, false);\n        const messageWithPrefix = getSignedBytesFromMessage(message, true);\n        const prefixedECDSASigner = ethers_1.utils.recoverAddress(ethers_1.utils.keccak256(messageWithPrefix), signature);\n        if (prefixedECDSASigner.toLowerCase() === address.toLowerCase()) {\n            return {\n                verificationMethod: 'ECDSA',\n                isSignedMsgPrefixed: true\n            };\n        }\n        const notPrefixedMsgECDSASigner = ethers_1.utils.recoverAddress(ethers_1.utils.keccak256(messageNoPrefix), signature);\n        if (notPrefixedMsgECDSASigner.toLowerCase() === address.toLowerCase()) {\n            return {\n                verificationMethod: 'ECDSA',\n                isSignedMsgPrefixed: false\n            };\n        }\n        return {\n            verificationMethod: 'ERC-1271',\n            isSignedMsgPrefixed: true\n        };\n    });\n}\nexports.getEthSignatureType = getEthSignatureType;\nfunction removeAddressPrefix(address) {\n    if (address.startsWith('0x'))\n        return address.substr(2);\n    if (address.startsWith('sync:'))\n        return address.substr(5);\n    throw new Error(\"ETH address must start with '0x' and PubKeyHash must start with 'sync:'\");\n}\n// PubKeyHash or eth address\nfunction serializeAddress(address) {\n    const prefixlessAddress = removeAddressPrefix(address);\n    const addressBytes = ethers_1.utils.arrayify(`0x${prefixlessAddress}`);\n    if (addressBytes.length !== 20) {\n        throw new Error('Address must be 20 bytes long');\n    }\n    return addressBytes;\n}\nexports.serializeAddress = serializeAddress;\nfunction serializeAccountId(accountId) {\n    if (accountId < 0) {\n        throw new Error('Negative account id');\n    }\n    if (accountId >= MAX_NUMBER_OF_ACCOUNTS) {\n        throw new Error('AccountId is too big');\n    }\n    return numberToBytesBE(accountId, 4);\n}\nexports.serializeAccountId = serializeAccountId;\nfunction serializeTokenId(tokenId) {\n    if (tokenId < 0) {\n        throw new Error('Negative tokenId');\n    }\n    if (tokenId >= MAX_NUMBER_OF_TOKENS) {\n        throw new Error('TokenId is too big');\n    }\n    return numberToBytesBE(tokenId, 2);\n}\nexports.serializeTokenId = serializeTokenId;\nfunction serializeAmountPacked(amount) {\n    return packAmountChecked(ethers_1.BigNumber.from(amount));\n}\nexports.serializeAmountPacked = serializeAmountPacked;\nfunction serializeAmountFull(amount) {\n    const bnAmount = ethers_1.BigNumber.from(amount);\n    return ethers_1.utils.zeroPad(ethers_1.utils.arrayify(bnAmount), 16);\n}\nexports.serializeAmountFull = serializeAmountFull;\nfunction serializeFeePacked(fee) {\n    return packFeeChecked(ethers_1.BigNumber.from(fee));\n}\nexports.serializeFeePacked = serializeFeePacked;\nfunction serializeNonce(nonce) {\n    if (nonce < 0) {\n        throw new Error('Negative nonce');\n    }\n    return numberToBytesBE(nonce, 4);\n}\nexports.serializeNonce = serializeNonce;\nfunction serializeTransfer(transfer) {\n    const type = new Uint8Array([5]); // tx type\n    const accountId = serializeAccountId(transfer.accountId);\n    const from = serializeAddress(transfer.from);\n    const to = serializeAddress(transfer.to);\n    const token = serializeTokenId(transfer.token);\n    const amount = serializeAmountPacked(transfer.amount);\n    const fee = serializeFeePacked(transfer.fee);\n    const nonce = serializeNonce(transfer.nonce);\n    return ethers_1.ethers.utils.concat([type, accountId, from, to, token, amount, fee, nonce]);\n}\nexports.serializeTransfer = serializeTransfer;\nfunction numberToBytesBE(number, bytes) {\n    const result = new Uint8Array(bytes);\n    for (let i = bytes - 1; i >= 0; i--) {\n        result[i] = number & 0xff;\n        number >>= 8;\n    }\n    return result;\n}\n","'use strict';\n\nvar ES5Type = require('../5/Type');\n\n// https://ecma-international.org/ecma-262/6.0/#sec-ecmascript-data-types-and-values\n\nmodule.exports = function Type(x) {\n\tif (typeof x === 'symbol') {\n\t\treturn 'Symbol';\n\t}\n\treturn ES5Type(x);\n};\n","'use strict';\n\nvar has = require('has');\n\nvar assertRecord = require('../helpers/assertRecord');\n\nvar Type = require('./Type');\n\n// https://www.ecma-international.org/ecma-262/6.0/#sec-isdatadescriptor\n\nmodule.exports = function IsDataDescriptor(Desc) {\n\tif (typeof Desc === 'undefined') {\n\t\treturn false;\n\t}\n\n\tassertRecord(Type, 'Property Descriptor', 'Desc', Desc);\n\n\tif (!has(Desc, '[[Value]]') && !has(Desc, '[[Writable]]')) {\n\t\treturn false;\n\t}\n\n\treturn true;\n};\n","'use strict';\n\nvar bind = require('function-bind');\n\nvar GetIntrinsic = require('../GetIntrinsic');\n\nvar $apply = GetIntrinsic('%Function.prototype.apply%');\nvar $call = GetIntrinsic('%Function.prototype.call%');\nvar $reflectApply = GetIntrinsic('%Reflect.apply%', true) || bind.call($call, $apply);\n\nvar $defineProperty = GetIntrinsic('%Object.defineProperty%', true);\n\nif ($defineProperty) {\n\ttry {\n\t\t$defineProperty({}, 'a', { value: 1 });\n\t} catch (e) {\n\t\t// IE 8 has a broken defineProperty\n\t\t$defineProperty = null;\n\t}\n}\n\nmodule.exports = function callBind() {\n\treturn $reflectApply(bind, $call, arguments);\n};\n\nvar applyBind = function applyBind() {\n\treturn $reflectApply(bind, $apply, arguments);\n};\n\nif ($defineProperty) {\n\t$defineProperty(module.exports, 'apply', { value: applyBind });\n} else {\n\tmodule.exports.apply = applyBind;\n}\n","'use strict';\n\nvar GetIntrinsic = require('../GetIntrinsic');\n\nvar $TypeError = GetIntrinsic('%TypeError%');\n\nvar isPropertyDescriptor = require('../helpers/isPropertyDescriptor');\nvar DefineOwnProperty = require('../helpers/DefineOwnProperty');\n\nvar FromPropertyDescriptor = require('./FromPropertyDescriptor');\nvar IsAccessorDescriptor = require('./IsAccessorDescriptor');\nvar IsDataDescriptor = require('./IsDataDescriptor');\nvar IsPropertyKey = require('./IsPropertyKey');\nvar SameValue = require('./SameValue');\nvar ToPropertyDescriptor = require('./ToPropertyDescriptor');\nvar Type = require('./Type');\n\n// https://www.ecma-international.org/ecma-262/6.0/#sec-definepropertyorthrow\n\nmodule.exports = function DefinePropertyOrThrow(O, P, desc) {\n\tif (Type(O) !== 'Object') {\n\t\tthrow new $TypeError('Assertion failed: Type(O) is not Object');\n\t}\n\n\tif (!IsPropertyKey(P)) {\n\t\tthrow new $TypeError('Assertion failed: IsPropertyKey(P) is not true');\n\t}\n\n\tvar Desc = isPropertyDescriptor({\n\t\tType: Type,\n\t\tIsDataDescriptor: IsDataDescriptor,\n\t\tIsAccessorDescriptor: IsAccessorDescriptor\n\t}, desc) ? desc : ToPropertyDescriptor(desc);\n\tif (!isPropertyDescriptor({\n\t\tType: Type,\n\t\tIsDataDescriptor: IsDataDescriptor,\n\t\tIsAccessorDescriptor: IsAccessorDescriptor\n\t}, Desc)) {\n\t\tthrow new $TypeError('Assertion failed: Desc is not a valid Property Descriptor');\n\t}\n\n\treturn DefineOwnProperty(\n\t\tIsDataDescriptor,\n\t\tSameValue,\n\t\tFromPropertyDescriptor,\n\t\tO,\n\t\tP,\n\t\tDesc\n\t);\n};\n","'use strict';\n\nvar origSymbol = global.Symbol;\nvar hasSymbolSham = require('./shams');\n\nmodule.exports = function hasNativeSymbols() {\n\tif (typeof origSymbol !== 'function') { return false; }\n\tif (typeof Symbol !== 'function') { return false; }\n\tif (typeof origSymbol('foo') !== 'symbol') { return false; }\n\tif (typeof Symbol('bar') !== 'symbol') { return false; }\n\n\treturn hasSymbolSham();\n};\n","'use strict';\n\n// https://www.ecma-international.org/ecma-262/5.1/#sec-8\n\nmodule.exports = function Type(x) {\n\tif (x === null) {\n\t\treturn 'Null';\n\t}\n\tif (typeof x === 'undefined') {\n\t\treturn 'Undefined';\n\t}\n\tif (typeof x === 'function' || typeof x === 'object') {\n\t\treturn 'Object';\n\t}\n\tif (typeof x === 'number') {\n\t\treturn 'Number';\n\t}\n\tif (typeof x === 'boolean') {\n\t\treturn 'Boolean';\n\t}\n\tif (typeof x === 'string') {\n\t\treturn 'String';\n\t}\n};\n","'use strict';\n\nvar requirePromise = require('./requirePromise');\n\nvar getPolyfill = require('./polyfill');\nvar define = require('define-properties');\n\nmodule.exports = function shimPromiseFinally() {\n\trequirePromise();\n\n\tvar polyfill = getPolyfill();\n\tdefine(Promise.prototype, { 'finally': polyfill }, {\n\t\t'finally': function testFinally() {\n\t\t\treturn Promise.prototype['finally'] !== polyfill;\n\t\t}\n\t});\n\treturn polyfill;\n};\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.loadZkSyncCrypto = exports.privateKeyToPubKeyHash = exports.signTransactionBytes = exports.privateKeyFromSeed = void 0;\nconst zksync_crypto_1 = require(\"zksync-crypto\");\nconst zks = __importStar(require(\"zksync-crypto\"));\nconst ethers_1 = require(\"ethers\");\nvar zksync_crypto_2 = require(\"zksync-crypto\");\nObject.defineProperty(exports, \"privateKeyFromSeed\", { enumerable: true, get: function () { return zksync_crypto_2.privateKeyFromSeed; } });\nfunction signTransactionBytes(privKey, bytes) {\n    const signaturePacked = zksync_crypto_1.sign_musig(privKey, bytes);\n    const pubKey = ethers_1.utils.hexlify(signaturePacked.slice(0, 32)).substr(2);\n    const signature = ethers_1.utils.hexlify(signaturePacked.slice(32)).substr(2);\n    return {\n        pubKey,\n        signature\n    };\n}\nexports.signTransactionBytes = signTransactionBytes;\nfunction privateKeyToPubKeyHash(privateKey) {\n    return `sync:${ethers_1.utils.hexlify(zksync_crypto_1.private_key_to_pubkey_hash(privateKey)).substr(2)}`;\n}\nexports.privateKeyToPubKeyHash = privateKeyToPubKeyHash;\nlet zksyncCryptoLoaded = false;\nfunction loadZkSyncCrypto(wasmFileUrl) {\n    return __awaiter(this, void 0, void 0, function* () {\n        // Only runs in the browser\n        if (zks.default) {\n            // @ts-ignore\n            const url = wasmFileUrl ? wasmFileUrl : zks.DefaultZksyncCryptoWasmURL;\n            if (!zksyncCryptoLoaded) {\n                yield zks.default(url);\n                zksyncCryptoLoaded = true;\n            }\n        }\n    });\n}\nexports.loadZkSyncCrypto = loadZkSyncCrypto;\n","import * as wasm from './zksync-crypto-bundler_bg.wasm';\n\nconst heap = new Array(32).fill(undefined);\n\nheap.push(undefined, null, true, false);\n\nfunction getObject(idx) { return heap[idx]; }\n\nlet heap_next = heap.length;\n\nfunction dropObject(idx) {\n    if (idx < 36) return;\n    heap[idx] = heap_next;\n    heap_next = idx;\n}\n\nfunction takeObject(idx) {\n    const ret = getObject(idx);\n    dropObject(idx);\n    return ret;\n}\n/**\n* This method initializes params for current thread, otherwise they will be initialized when signing\n* first message.\n*/\nexport function zksync_crypto_init() {\n    wasm.zksync_crypto_init();\n}\n\nlet cachegetUint8Memory0 = null;\nfunction getUint8Memory0() {\n    if (cachegetUint8Memory0 === null || cachegetUint8Memory0.buffer !== wasm.memory.buffer) {\n        cachegetUint8Memory0 = new Uint8Array(wasm.memory.buffer);\n    }\n    return cachegetUint8Memory0;\n}\n\nlet WASM_VECTOR_LEN = 0;\n\nfunction passArray8ToWasm0(arg, malloc) {\n    const ptr = malloc(arg.length * 1);\n    getUint8Memory0().set(arg, ptr / 1);\n    WASM_VECTOR_LEN = arg.length;\n    return ptr;\n}\n\nlet cachegetInt32Memory0 = null;\nfunction getInt32Memory0() {\n    if (cachegetInt32Memory0 === null || cachegetInt32Memory0.buffer !== wasm.memory.buffer) {\n        cachegetInt32Memory0 = new Int32Array(wasm.memory.buffer);\n    }\n    return cachegetInt32Memory0;\n}\n\nfunction getArrayU8FromWasm0(ptr, len) {\n    return getUint8Memory0().subarray(ptr / 1, ptr / 1 + len);\n}\n/**\n* @param {Uint8Array} seed\n* @returns {Uint8Array}\n*/\nexport function privateKeyFromSeed(seed) {\n    var ptr0 = passArray8ToWasm0(seed, wasm.__wbindgen_malloc);\n    var len0 = WASM_VECTOR_LEN;\n    wasm.privateKeyFromSeed(8, ptr0, len0);\n    var r0 = getInt32Memory0()[8 / 4 + 0];\n    var r1 = getInt32Memory0()[8 / 4 + 1];\n    var v1 = getArrayU8FromWasm0(r0, r1).slice();\n    wasm.__wbindgen_free(r0, r1 * 1);\n    return v1;\n}\n\n/**\n* @param {Uint8Array} private_key\n* @returns {Uint8Array}\n*/\nexport function private_key_to_pubkey_hash(private_key) {\n    var ptr0 = passArray8ToWasm0(private_key, wasm.__wbindgen_malloc);\n    var len0 = WASM_VECTOR_LEN;\n    wasm.private_key_to_pubkey_hash(8, ptr0, len0);\n    var r0 = getInt32Memory0()[8 / 4 + 0];\n    var r1 = getInt32Memory0()[8 / 4 + 1];\n    var v1 = getArrayU8FromWasm0(r0, r1).slice();\n    wasm.__wbindgen_free(r0, r1 * 1);\n    return v1;\n}\n\n/**\n* @param {Uint8Array} private_key\n* @returns {Uint8Array}\n*/\nexport function private_key_to_pubkey(private_key) {\n    var ptr0 = passArray8ToWasm0(private_key, wasm.__wbindgen_malloc);\n    var len0 = WASM_VECTOR_LEN;\n    wasm.private_key_to_pubkey(8, ptr0, len0);\n    var r0 = getInt32Memory0()[8 / 4 + 0];\n    var r1 = getInt32Memory0()[8 / 4 + 1];\n    var v1 = getArrayU8FromWasm0(r0, r1).slice();\n    wasm.__wbindgen_free(r0, r1 * 1);\n    return v1;\n}\n\n/**\n* We use musig Schnorr signature scheme.\n* It is impossible to restore signer for signature, that is why we provide public key of the signer\n* along with signature.\n* [0..32] - packed public key of signer.\n* [32..64] - packed r point of the signature.\n* [64..96] - s poing of the signature.\n* @param {Uint8Array} private_key\n* @param {Uint8Array} msg\n* @returns {Uint8Array}\n*/\nexport function sign_musig(private_key, msg) {\n    var ptr0 = passArray8ToWasm0(private_key, wasm.__wbindgen_malloc);\n    var len0 = WASM_VECTOR_LEN;\n    var ptr1 = passArray8ToWasm0(msg, wasm.__wbindgen_malloc);\n    var len1 = WASM_VECTOR_LEN;\n    wasm.sign_musig(8, ptr0, len0, ptr1, len1);\n    var r0 = getInt32Memory0()[8 / 4 + 0];\n    var r1 = getInt32Memory0()[8 / 4 + 1];\n    var v2 = getArrayU8FromWasm0(r0, r1).slice();\n    wasm.__wbindgen_free(r0, r1 * 1);\n    return v2;\n}\n\nconst lTextDecoder = typeof TextDecoder === 'undefined' ? require('util').TextDecoder : TextDecoder;\n\nlet cachedTextDecoder = new lTextDecoder('utf-8', { ignoreBOM: true, fatal: true });\n\ncachedTextDecoder.decode();\n\nfunction getStringFromWasm0(ptr, len) {\n    return cachedTextDecoder.decode(getUint8Memory0().subarray(ptr, ptr + len));\n}\n\nfunction addHeapObject(obj) {\n    if (heap_next === heap.length) heap.push(heap.length + 1);\n    const idx = heap_next;\n    heap_next = heap[idx];\n\n    heap[idx] = obj;\n    return idx;\n}\n\nconst lTextEncoder = typeof TextEncoder === 'undefined' ? require('util').TextEncoder : TextEncoder;\n\nlet cachedTextEncoder = new lTextEncoder('utf-8');\n\nconst encodeString = (typeof cachedTextEncoder.encodeInto === 'function'\n    ? function (arg, view) {\n    return cachedTextEncoder.encodeInto(arg, view);\n}\n    : function (arg, view) {\n    const buf = cachedTextEncoder.encode(arg);\n    view.set(buf);\n    return {\n        read: arg.length,\n        written: buf.length\n    };\n});\n\nfunction passStringToWasm0(arg, malloc, realloc) {\n\n    if (realloc === undefined) {\n        const buf = cachedTextEncoder.encode(arg);\n        const ptr = malloc(buf.length);\n        getUint8Memory0().subarray(ptr, ptr + buf.length).set(buf);\n        WASM_VECTOR_LEN = buf.length;\n        return ptr;\n    }\n\n    let len = arg.length;\n    let ptr = malloc(len);\n\n    const mem = getUint8Memory0();\n\n    let offset = 0;\n\n    for (; offset < len; offset++) {\n        const code = arg.charCodeAt(offset);\n        if (code > 0x7F) break;\n        mem[ptr + offset] = code;\n    }\n\n    if (offset !== len) {\n        if (offset !== 0) {\n            arg = arg.slice(offset);\n        }\n        ptr = realloc(ptr, len, len = offset + arg.length * 3);\n        const view = getUint8Memory0().subarray(ptr + offset, ptr + len);\n        const ret = encodeString(arg, view);\n\n        offset += ret.written;\n    }\n\n    WASM_VECTOR_LEN = offset;\n    return ptr;\n}\n\nexport const __wbg_new_59cb74e423758ede = function() {\n    var ret = new Error();\n    return addHeapObject(ret);\n};\n\nexport const __wbg_stack_558ba5917b466edd = function(arg0, arg1) {\n    var ret = getObject(arg1).stack;\n    var ptr0 = passStringToWasm0(ret, wasm.__wbindgen_malloc, wasm.__wbindgen_realloc);\n    var len0 = WASM_VECTOR_LEN;\n    getInt32Memory0()[arg0 / 4 + 1] = len0;\n    getInt32Memory0()[arg0 / 4 + 0] = ptr0;\n};\n\nexport const __wbg_error_4bb6c2a97407129a = function(arg0, arg1) {\n    try {\n        console.error(getStringFromWasm0(arg0, arg1));\n    } finally {\n        wasm.__wbindgen_free(arg0, arg1);\n    }\n};\n\nexport const __wbindgen_object_drop_ref = function(arg0) {\n    takeObject(arg0);\n};\n\n","'use strict';\n\n// https://www.ecma-international.org/ecma-262/6.0/#sec-ispropertykey\n\nmodule.exports = function IsPropertyKey(argument) {\n\treturn typeof argument === 'string' || typeof argument === 'symbol';\n};\n","var naiveFallback = function () {\n\tif (typeof self === \"object\" && self) return self;\n\tif (typeof window === \"object\" && window) return window;\n\tthrow new Error(\"Unable to resolve global `this`\");\n};\n\nmodule.exports = (function () {\n\tif (this) return this;\n\n\t// Unexpected strict mode (may happen if e.g. bundled into ESM module)\n\n\t// Fallback to standard globalThis if available\n\tif (typeof globalThis === \"object\" && globalThis) return globalThis;\n\n\t// Thanks @mathiasbynens -> https://mathiasbynens.be/notes/globalthis\n\t// In all ES5+ engines global object inherits from Object.prototype\n\t// (if you approached one that doesn't please report)\n\ttry {\n\t\tObject.defineProperty(Object.prototype, \"__global__\", {\n\t\t\tget: function () { return this; },\n\t\t\tconfigurable: true\n\t\t});\n\t} catch (error) {\n\t\t// Unfortunate case of updates to Object.prototype being restricted\n\t\t// via preventExtensions, seal or freeze\n\t\treturn naiveFallback();\n\t}\n\ttry {\n\t\t// Safari case (window.__global__ works, but __global__ does not)\n\t\tif (!__global__) return naiveFallback();\n\t\treturn __global__;\n\t} finally {\n\t\tdelete Object.prototype.__global__;\n\t}\n})();\n","'use strict';\n\n/* eslint no-invalid-this: 1 */\n\nvar ERROR_MESSAGE = 'Function.prototype.bind called on incompatible ';\nvar slice = Array.prototype.slice;\nvar toStr = Object.prototype.toString;\nvar funcType = '[object Function]';\n\nmodule.exports = function bind(that) {\n    var target = this;\n    if (typeof target !== 'function' || toStr.call(target) !== funcType) {\n        throw new TypeError(ERROR_MESSAGE + target);\n    }\n    var args = slice.call(arguments, 1);\n\n    var bound;\n    var binder = function () {\n        if (this instanceof bound) {\n            var result = target.apply(\n                this,\n                args.concat(slice.call(arguments))\n            );\n            if (Object(result) === result) {\n                return result;\n            }\n            return this;\n        } else {\n            return target.apply(\n                that,\n                args.concat(slice.call(arguments))\n            );\n        }\n    };\n\n    var boundLength = Math.max(0, target.length - args.length);\n    var boundArgs = [];\n    for (var i = 0; i < boundLength; i++) {\n        boundArgs.push('$' + i);\n    }\n\n    bound = Function('binder', 'return function (' + boundArgs.join(',') + '){ return binder.apply(this,arguments); }')(binder);\n\n    if (target.prototype) {\n        var Empty = function Empty() {};\n        Empty.prototype = target.prototype;\n        bound.prototype = new Empty();\n        Empty.prototype = null;\n    }\n\n    return bound;\n};\n","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Signer = void 0;\nconst crypto_1 = require(\"./crypto\");\nconst ethers_1 = require(\"ethers\");\nconst utils_1 = require(\"./utils\");\nclass Signer {\n    constructor(privKey) {\n        this.privateKey = privKey;\n    }\n    pubKeyHash() {\n        return crypto_1.privateKeyToPubKeyHash(this.privateKey);\n    }\n    signSyncTransfer(transfer) {\n        const type = new Uint8Array([5]); // tx type\n        const accountId = utils_1.serializeAccountId(transfer.accountId);\n        const from = utils_1.serializeAddress(transfer.from);\n        const to = utils_1.serializeAddress(transfer.to);\n        const token = utils_1.serializeTokenId(transfer.tokenId);\n        const amount = utils_1.serializeAmountPacked(transfer.amount);\n        const fee = utils_1.serializeFeePacked(transfer.fee);\n        const nonce = utils_1.serializeNonce(transfer.nonce);\n        const msgBytes = ethers_1.ethers.utils.concat([type, accountId, from, to, token, amount, fee, nonce]);\n        const signature = crypto_1.signTransactionBytes(this.privateKey, msgBytes);\n        return {\n            type: 'Transfer',\n            accountId: transfer.accountId,\n            from: transfer.from,\n            to: transfer.to,\n            token: transfer.tokenId,\n            amount: ethers_1.BigNumber.from(transfer.amount).toString(),\n            fee: ethers_1.BigNumber.from(transfer.fee).toString(),\n            nonce: transfer.nonce,\n            signature\n        };\n    }\n    signSyncWithdraw(withdraw) {\n        const typeBytes = new Uint8Array([3]);\n        const accountId = utils_1.serializeAccountId(withdraw.accountId);\n        const accountBytes = utils_1.serializeAddress(withdraw.from);\n        const ethAddressBytes = utils_1.serializeAddress(withdraw.ethAddress);\n        const tokenIdBytes = utils_1.serializeTokenId(withdraw.tokenId);\n        const amountBytes = utils_1.serializeAmountFull(withdraw.amount);\n        const feeBytes = utils_1.serializeFeePacked(withdraw.fee);\n        const nonceBytes = utils_1.serializeNonce(withdraw.nonce);\n        const msgBytes = ethers_1.ethers.utils.concat([\n            typeBytes,\n            accountId,\n            accountBytes,\n            ethAddressBytes,\n            tokenIdBytes,\n            amountBytes,\n            feeBytes,\n            nonceBytes\n        ]);\n        const signature = crypto_1.signTransactionBytes(this.privateKey, msgBytes);\n        return {\n            type: 'Withdraw',\n            accountId: withdraw.accountId,\n            from: withdraw.from,\n            to: withdraw.ethAddress,\n            token: withdraw.tokenId,\n            amount: ethers_1.BigNumber.from(withdraw.amount).toString(),\n            fee: ethers_1.BigNumber.from(withdraw.fee).toString(),\n            nonce: withdraw.nonce,\n            signature\n        };\n    }\n    signSyncForcedExit(forcedExit) {\n        const typeBytes = new Uint8Array([8]);\n        const initiatorAccountIdBytes = utils_1.serializeAccountId(forcedExit.initiatorAccountId);\n        const targetBytes = utils_1.serializeAddress(forcedExit.target);\n        const tokenIdBytes = utils_1.serializeTokenId(forcedExit.tokenId);\n        const feeBytes = utils_1.serializeFeePacked(forcedExit.fee);\n        const nonceBytes = utils_1.serializeNonce(forcedExit.nonce);\n        const msgBytes = ethers_1.ethers.utils.concat([\n            typeBytes,\n            initiatorAccountIdBytes,\n            targetBytes,\n            tokenIdBytes,\n            feeBytes,\n            nonceBytes\n        ]);\n        const signature = crypto_1.signTransactionBytes(this.privateKey, msgBytes);\n        return {\n            type: 'ForcedExit',\n            initiatorAccountId: forcedExit.initiatorAccountId,\n            target: forcedExit.target,\n            token: forcedExit.tokenId,\n            fee: ethers_1.BigNumber.from(forcedExit.fee).toString(),\n            nonce: forcedExit.nonce,\n            signature\n        };\n    }\n    signSyncChangePubKey(changePubKey) {\n        const typeBytes = new Uint8Array([7]); // Tx type (1 byte)\n        const accountIdBytes = utils_1.serializeAccountId(changePubKey.accountId);\n        const accountBytes = utils_1.serializeAddress(changePubKey.account);\n        const pubKeyHashBytes = utils_1.serializeAddress(changePubKey.newPkHash);\n        const tokenIdBytes = utils_1.serializeTokenId(changePubKey.feeTokenId);\n        const feeBytes = utils_1.serializeFeePacked(changePubKey.fee);\n        const nonceBytes = utils_1.serializeNonce(changePubKey.nonce);\n        const msgBytes = ethers_1.ethers.utils.concat([\n            typeBytes,\n            accountIdBytes,\n            accountBytes,\n            pubKeyHashBytes,\n            tokenIdBytes,\n            feeBytes,\n            nonceBytes\n        ]);\n        const signature = crypto_1.signTransactionBytes(this.privateKey, msgBytes);\n        return {\n            type: 'ChangePubKey',\n            accountId: changePubKey.accountId,\n            account: changePubKey.account,\n            newPkHash: changePubKey.newPkHash,\n            feeToken: changePubKey.feeTokenId,\n            fee: ethers_1.BigNumber.from(changePubKey.fee).toString(),\n            nonce: changePubKey.nonce,\n            signature,\n            ethSignature: null\n        };\n    }\n    static fromPrivateKey(pk) {\n        return new Signer(pk);\n    }\n    static fromSeed(seed) {\n        return new Signer(crypto_1.privateKeyFromSeed(seed));\n    }\n    static fromETHSignature(ethSigner) {\n        return __awaiter(this, void 0, void 0, function* () {\n            let chainID = 1;\n            if (ethSigner.provider) {\n                const network = yield ethSigner.provider.getNetwork();\n                chainID = network.chainId;\n            }\n            let message = 'Access zkSync account.\\n\\nOnly sign this message for a trusted client!';\n            if (chainID !== 1) {\n                message += `\\nChain ID: ${chainID}.`;\n            }\n            const signedBytes = utils_1.getSignedBytesFromMessage(message, false);\n            const signature = yield utils_1.signMessagePersonalAPI(ethSigner, signedBytes);\n            const address = yield ethSigner.getAddress();\n            const ethSignatureType = yield utils_1.getEthSignatureType(ethSigner.provider, message, signature, address);\n            const seed = ethers_1.ethers.utils.arrayify(signature);\n            const signer = Signer.fromSeed(seed);\n            return { signer, ethSignatureType };\n        });\n    }\n}\nexports.Signer = Signer;\n","'use strict';\n\n// http://www.ecma-international.org/ecma-262/5.1/#sec-9.2\n\nmodule.exports = function ToBoolean(value) { return !!value; };\n","/* chnl v1.2.0 by Vitaliy Potapov @preserve */\n\"use strict\";function _typeof(e){return(_typeof=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _inherits(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function\");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _isNativeReflectConstruct(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return e}function _possibleConstructorReturn(e,t){return!t||\"object\"!=typeof t&&\"function\"!=typeof t?_assertThisInitialized(e):t}function _createSuper(r){var i=_isNativeReflectConstruct();return function(){var e,t=_getPrototypeOf(r);if(i){var n=_getPrototypeOf(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return _possibleConstructorReturn(this,e)}}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _iterableToArray(e){if(\"undefined\"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function _unsupportedIterableToArray(e,t){if(e){if(\"string\"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return\"Object\"===n&&e.constructor&&(n=e.constructor.name),\"Map\"===n||\"Set\"===n?Array.from(e):\"Arguments\"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _nonIterableSpread(){throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}var Channel=function(){function c(e){_classCallCheck(this,c),this._listeners=[],this._mute=!1,this._accumulate=!1,this._accumulatedEvents=[],this._name=e||\"\",this._onListenerAdded=null,this._onFirstListenerAdded=null,this._onListenerRemoved=null,this._onLastListenerRemoved=null}return _createClass(c,[{key:\"addListener\",value:function(e,t){this._pushListener(e,t,!1)}},{key:\"addOnceListener\",value:function(e,t){this._pushListener(e,t,!0)}},{key:\"removeListener\",value:function(e,t){this._ensureListener(e);var n=this._indexOfListener(e,t);0<=n&&this._spliceListener(n)}},{key:\"removeAllListeners\",value:function(){for(;this.hasListeners();)this._spliceListener(0)}},{key:\"hasListener\",value:function(e,t){return this._ensureListener(e),0<=this._indexOfListener(e,t)}},{key:\"hasListeners\",value:function(){return 0<this._listeners.length}},{key:\"dispatch\",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._invokeListeners({args:t,async:!1})}},{key:\"dispatchAsync\",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._invokeListeners({args:t,async:!0})}},{key:\"mute\",value:function(e){var t=0<arguments.length&&void 0!==e?e:{};this._mute=!0,t.accumulate?this._accumulate=!0:(this._accumulate=!1,this._accumulatedEvents=[])}},{key:\"unmute\",value:function(){this._mute=!1,this._accumulate&&(this._dispatchAccumulated(),this._accumulate=!1)}},{key:\"_invokeListeners\",value:function(e){var t=this,n=0<arguments.length&&void 0!==e?e:{args:[],async:!1};this._mute?this._accumulate&&this._accumulatedEvents.push(n):this._listeners.slice().forEach(function(e){t._invokeListener(e,n),e.once&&t.removeListener(e.callback,e.context)})}},{key:\"_invokeListener\",value:function(e,t){var n,r,i=e.callback instanceof c;t.async?i?(n=e.callback).dispatchAsync.apply(n,_toConsumableArray(t.args)):setTimeout(function(){return e.callback.apply(e.context,t.args)},0):i?(r=e.callback).dispatch.apply(r,_toConsumableArray(t.args)):e.callback.apply(e.context,t.args)}},{key:\"_ensureListener\",value:function(e){if(!c.isValidListener(e))throw new Error(\"Channel \"+this._name+\": listener is not a function and not a Channel\")}},{key:\"_dispatchInnerAddEvents\",value:function(){var e,t;this._onListenerAdded&&(e=this._onListenerAdded).dispatch.apply(e,arguments);this._onFirstListenerAdded&&1===this._listeners.length&&(t=this._onFirstListenerAdded).dispatch.apply(t,arguments)}},{key:\"_dispatchInnerRemoveEvents\",value:function(){var e,t;this._onListenerRemoved&&(e=this._onListenerRemoved).dispatch.apply(e,arguments);this._onLastListenerRemoved&&0===this._listeners.length&&(t=this._onLastListenerRemoved).dispatch.apply(t,arguments)}},{key:\"_indexOfListener\",value:function(e,t){for(var n=0;n<this._listeners.length;n++){var r=this._listeners[n],i=r.callback===e,s=e instanceof c,o=void 0===t&&void 0===r.context,a=t===r.context;if(i&&(s||o||a))return n}}},{key:\"_dispatchAccumulated\",value:function(){var t=this;this._accumulatedEvents.forEach(function(e){return t._invokeListeners(e)}),this._accumulatedEvents=[]}},{key:\"_pushListener\",value:function(e,t,n){this._ensureListener(e),this._checkForDuplicates(e,t),this._listeners.push({callback:e,context:t,once:n}),this._dispatchInnerAddEvents(e,t,n)}},{key:\"_checkForDuplicates\",value:function(e,t){if(this.hasListener(e,t))throw new Error(\"Channel \"+this._name+\": duplicating listeners\")}},{key:\"_spliceListener\",value:function(e){var t=this._listeners[e],n=t.callback,r=t.context,i=t.once;this._listeners.splice(e,1),this._dispatchInnerRemoveEvents(n,r,i)}},{key:\"onListenerAdded\",get:function(){return this._onListenerAdded||(this._onListenerAdded=new c(\"\".concat(this._name,\":onListenerAdded\"))),this._onListenerAdded}},{key:\"onFirstListenerAdded\",get:function(){return this._onFirstListenerAdded||(this._onFirstListenerAdded=new c(\"\".concat(this._name,\":onFirstListenerAdded\"))),this._onFirstListenerAdded}},{key:\"onListenerRemoved\",get:function(){return this._onListenerRemoved||(this._onListenerRemoved=new c(\"\".concat(this._name,\":onListenerRemoved\"))),this._onListenerRemoved}},{key:\"onLastListenerRemoved\",get:function(){return this._onLastListenerRemoved||(this._onLastListenerRemoved=new c(\"\".concat(this._name,\":onLastListenerRemoved\"))),this._onLastListenerRemoved}}],[{key:\"isValidListener\",value:function(e){return\"function\"==typeof e||e instanceof c}}]),c}(),EventEmitter=function(){function e(){_classCallCheck(this,e),this._channels=new Map}return _createClass(e,[{key:\"addListener\",value:function(e,t,n){this._getChannel(e).addListener(t,n)}},{key:\"on\",value:function(e,t,n){this.addListener(e,t,n)}},{key:\"addOnceListener\",value:function(e,t,n){this._getChannel(e).addOnceListener(t,n)}},{key:\"once\",value:function(e,t,n){this.addOnceListener(e,t,n)}},{key:\"removeListener\",value:function(e,t,n){this._getChannel(e).removeListener(t,n)}},{key:\"off\",value:function(e,t,n){this.removeListener(e,t,n)}},{key:\"hasListener\",value:function(e,t,n){return this._getChannel(e).hasListener(t,n)}},{key:\"has\",value:function(e,t,n){return this.hasListener(e,t,n)}},{key:\"hasListeners\",value:function(e){return this._getChannel(e).hasListeners()}},{key:\"dispatch\",value:function(e){for(var t,n=arguments.length,r=new Array(1<n?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];(t=this._getChannel(e)).dispatch.apply(t,r)}},{key:\"emit\",value:function(e){for(var t=arguments.length,n=new Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this.dispatch.apply(this,[e].concat(n))}},{key:\"_getChannel\",value:function(e){return this._channels.has(e)||this._channels.set(e,new Channel(e)),this._channels.get(e)}}]),e}(),SubscriptionItem=function(){function t(e){_classCallCheck(this,t),this._params=e,this._isOn=!1,this._assertParams()}return _createClass(t,[{key:\"on\",value:function(){if(!this._isOn){var e=this._params.channel,t=e.addListener||e.addEventListener||e.on;this._applyMethod(t),this._isOn=!0}}},{key:\"off\",value:function(){if(this._isOn){var e=this._params.channel,t=e.removeListener||e.removeEventListener||e.off;this._applyMethod(t),this._isOn=!1}}},{key:\"_applyMethod\",value:function(e){var t=this._params,n=t.channel,r=t.event,i=t.listener,s=r?[r,i]:[i];e.apply(n,s)}},{key:\"_assertParams\",value:function(){var e=this._params,t=e.channel,n=e.event,r=e.listener;if(!t||\"object\"!==_typeof(t))throw new Error(\"Channel should be object\");if(n&&\"string\"!=typeof n)throw new Error(\"Event should be string\");if(!r||!Channel.isValidListener(r))throw new Error(\"Listener should be function or Channel\")}}]),t}(),Subscription=function(){function t(e){_classCallCheck(this,t),this._items=e.map(function(e){return new SubscriptionItem(e)})}return _createClass(t,[{key:\"on\",value:function(){return this._items.forEach(function(e){return e.on()}),this}},{key:\"off\",value:function(){return this._items.forEach(function(e){return e.off()}),this}}]),t}(),ReactSubscription=function(){_inherits(i,Subscription);var r=_createSuper(i);function i(e,t){var n;return _classCallCheck(this,i),(n=r.call(this,t))._overrideComponentCallback(e,\"componentDidMount\",\"on\"),n._overrideComponentCallback(e,\"componentWillUnmount\",\"off\"),n}return _createClass(i,[{key:\"_overrideComponentCallback\",value:function(r,e,i){var s=this,o=r[e];r[e]=function(){if(s[i](),\"function\"==typeof o){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return o.apply(r,t)}}}}]),i}(),chnl=Channel;chnl.EventEmitter=EventEmitter,chnl.Subscription=Subscription,chnl.ReactSubscription=ReactSubscription,module.exports=chnl;\n","'use strict';\n\nvar requirePromise = require('./requirePromise');\n\nrequirePromise();\n\nvar IsCallable = require('es-abstract/2018/IsCallable');\nvar SpeciesConstructor = require('es-abstract/2018/SpeciesConstructor');\nvar Type = require('es-abstract/2018/Type');\n\nvar promiseResolve = function PromiseResolve(C, value) {\n\treturn new C(function (resolve) {\n\t\tresolve(value);\n\t});\n};\n\nvar OriginalPromise = Promise;\n\nvar createThenFinally = function CreateThenFinally(C, onFinally) {\n\treturn function (value) {\n\t\tvar result = onFinally();\n\t\tvar promise = promiseResolve(C, result);\n\t\tvar valueThunk = function () {\n\t\t\treturn value;\n\t\t};\n\t\treturn promise.then(valueThunk);\n\t};\n};\n\nvar createCatchFinally = function CreateCatchFinally(C, onFinally) {\n\treturn function (reason) {\n\t\tvar result = onFinally();\n\t\tvar promise = promiseResolve(C, result);\n\t\tvar thrower = function () {\n\t\t\tthrow reason;\n\t\t};\n\t\treturn promise.then(thrower);\n\t};\n};\n\nvar promiseFinally = function finally_(onFinally) {\n\t/* eslint no-invalid-this: 0 */\n\n\tvar promise = this;\n\n\tif (Type(promise) !== 'Object') {\n\t\tthrow new TypeError('receiver is not an Object');\n\t}\n\n\tvar C = SpeciesConstructor(promise, OriginalPromise); // may throw\n\n\tvar thenFinally = onFinally;\n\tvar catchFinally = onFinally;\n\tif (IsCallable(onFinally)) {\n\t\tthenFinally = createThenFinally(C, onFinally);\n\t\tcatchFinally = createCatchFinally(C, onFinally);\n\t}\n\n\treturn promise.then(thenFinally, catchFinally);\n};\n\nif (Object.getOwnPropertyDescriptor) {\n\tvar descriptor = Object.getOwnPropertyDescriptor(promiseFinally, 'name');\n\tif (descriptor && descriptor.configurable) {\n\t\tObject.defineProperty(promiseFinally, 'name', { configurable: true, value: 'finally' });\n\t}\n}\n\nmodule.exports = promiseFinally;\n","var _globalThis;\ntry {\n\t_globalThis = require('es5-ext/global');\n} catch (error) {\n} finally {\n\tif (!_globalThis && typeof window !== 'undefined') { _globalThis = window; }\n\tif (!_globalThis) { throw new Error('Could not determine global this'); }\n}\n\nvar NativeWebSocket = _globalThis.WebSocket || _globalThis.MozWebSocket;\nvar websocket_version = require('./version');\n\n\n/**\n * Expose a W3C WebSocket class with just one or two arguments.\n */\nfunction W3CWebSocket(uri, protocols) {\n\tvar native_instance;\n\n\tif (protocols) {\n\t\tnative_instance = new NativeWebSocket(uri, protocols);\n\t}\n\telse {\n\t\tnative_instance = new NativeWebSocket(uri);\n\t}\n\n\t/**\n\t * 'native_instance' is an instance of nativeWebSocket (the browser's WebSocket\n\t * class). Since it is an Object it will be returned as it is when creating an\n\t * instance of W3CWebSocket via 'new W3CWebSocket()'.\n\t *\n\t * ECMAScript 5: http://bclary.com/2004/11/07/#a-13.2.2\n\t */\n\treturn native_instance;\n}\nif (NativeWebSocket) {\n\t['CONNECTING', 'OPEN', 'CLOSING', 'CLOSED'].forEach(function(prop) {\n\t\tObject.defineProperty(W3CWebSocket, prop, {\n\t\t\tget: function() { return NativeWebSocket[prop]; }\n\t\t});\n\t});\n}\n\n/**\n * Module exports.\n */\nmodule.exports = {\n    'w3cwebsocket' : NativeWebSocket ? W3CWebSocket : null,\n    'version'      : websocket_version\n};\n","'use strict';\n\n// http://www.ecma-international.org/ecma-262/5.1/#sec-9.11\n\nmodule.exports = require('is-callable');\n","'use strict';\n\nvar GetIntrinsic = require('../GetIntrinsic');\n\nvar $species = GetIntrinsic('%Symbol.species%', true);\nvar $TypeError = GetIntrinsic('%TypeError%');\n\nvar IsConstructor = require('./IsConstructor');\nvar Type = require('./Type');\n\n// https://ecma-international.org/ecma-262/6.0/#sec-speciesconstructor\n\nmodule.exports = function SpeciesConstructor(O, defaultConstructor) {\n\tif (Type(O) !== 'Object') {\n\t\tthrow new $TypeError('Assertion failed: Type(O) is not Object');\n\t}\n\tvar C = O.constructor;\n\tif (typeof C === 'undefined') {\n\t\treturn defaultConstructor;\n\t}\n\tif (Type(C) !== 'Object') {\n\t\tthrow new $TypeError('O.constructor is not an Object');\n\t}\n\tvar S = $species ? C[$species] : void 0;\n\tif (S == null) {\n\t\treturn defaultConstructor;\n\t}\n\tif (IsConstructor(S)) {\n\t\treturn S;\n\t}\n\tthrow new $TypeError('no constructor found');\n};\n","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.submitSignedTransaction = exports.Wallet = void 0;\nconst ethers_1 = require(\"ethers\");\nconst logger_1 = require(\"@ethersproject/logger\");\nconst provider_1 = require(\"./provider\");\nconst signer_1 = require(\"./signer\");\nconst utils_1 = require(\"./utils\");\nconst EthersErrorCode = logger_1.ErrorCode;\nclass ZKSyncTxError extends Error {\n    constructor(message, value) {\n        super(message);\n        this.value = value;\n    }\n}\nclass Wallet {\n    constructor(ethSigner, cachedAddress, signer, accountId, ethSignerType) {\n        this.ethSigner = ethSigner;\n        this.cachedAddress = cachedAddress;\n        this.signer = signer;\n        this.accountId = accountId;\n        this.ethSignerType = ethSignerType;\n    }\n    connect(provider) {\n        this.provider = provider;\n        return this;\n    }\n    static fromEthSigner(ethWallet, provider, signer, accountId, ethSignerType) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (signer == null) {\n                const signerResult = yield signer_1.Signer.fromETHSignature(ethWallet);\n                signer = signerResult.signer;\n                ethSignerType = ethSignerType || signerResult.ethSignatureType;\n            }\n            else if (ethSignerType == null) {\n                throw new Error('If you passed signer, you must also pass ethSignerType.');\n            }\n            const wallet = new Wallet(ethWallet, yield ethWallet.getAddress(), signer, accountId, ethSignerType);\n            wallet.connect(provider);\n            return wallet;\n        });\n    }\n    static fromEthSignerNoKeys(ethWallet, provider, accountId, ethSignerType) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const wallet = new Wallet(ethWallet, yield ethWallet.getAddress(), undefined, accountId, ethSignerType);\n            wallet.connect(provider);\n            return wallet;\n        });\n    }\n    getEthMessageSignature(message) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (this.ethSignerType == null) {\n                throw new Error('ethSignerType is unknown');\n            }\n            const signedBytes = utils_1.getSignedBytesFromMessage(message, !this.ethSignerType.isSignedMsgPrefixed);\n            const signature = yield utils_1.signMessagePersonalAPI(this.ethSigner, signedBytes);\n            return {\n                type: this.ethSignerType.verificationMethod === 'ECDSA' ? 'EthereumSignature' : 'EIP1271Signature',\n                signature\n            };\n        });\n    }\n    getTransfer(transfer) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!this.signer) {\n                throw new Error('ZKSync signer is required for sending zksync transactions.');\n            }\n            yield this.setRequiredAccountIdFromServer('Transfer funds');\n            const tokenId = this.provider.tokenSet.resolveTokenId(transfer.token);\n            const transactionData = {\n                accountId: this.accountId,\n                from: this.address(),\n                to: transfer.to,\n                tokenId,\n                amount: transfer.amount,\n                fee: transfer.fee,\n                nonce: transfer.nonce\n            };\n            return this.signer.signSyncTransfer(transactionData);\n        });\n    }\n    signSyncTransfer(transfer) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const signedTransferTransaction = yield this.getTransfer(transfer);\n            const stringAmount = this.provider.tokenSet.formatToken(transfer.token, transfer.amount);\n            const stringFee = this.provider.tokenSet.formatToken(transfer.token, transfer.fee);\n            const stringToken = this.provider.tokenSet.resolveTokenSymbol(transfer.token);\n            const humanReadableTxInfo = `Transfer ${stringAmount} ${stringToken}\\n` +\n                `To: ${transfer.to.toLowerCase()}\\n` +\n                `Nonce: ${transfer.nonce}\\n` +\n                `Fee: ${stringFee} ${stringToken}\\n` +\n                `Account Id: ${this.accountId}`;\n            const txMessageEthSignature = yield this.getEthMessageSignature(humanReadableTxInfo);\n            return {\n                tx: signedTransferTransaction,\n                ethereumSignature: txMessageEthSignature\n            };\n        });\n    }\n    signSyncForcedExit(forcedExit) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!this.signer) {\n                throw new Error('ZKSync signer is required for sending zksync transactions.');\n            }\n            yield this.setRequiredAccountIdFromServer('perform a Forced Exit');\n            const tokenId = this.provider.tokenSet.resolveTokenId(forcedExit.token);\n            const transactionData = {\n                initiatorAccountId: this.accountId,\n                target: forcedExit.target,\n                tokenId,\n                fee: forcedExit.fee,\n                nonce: forcedExit.nonce\n            };\n            const signedForcedExitTransaction = this.signer.signSyncForcedExit(transactionData);\n            return {\n                tx: signedForcedExitTransaction\n            };\n        });\n    }\n    syncForcedExit(forcedExit) {\n        return __awaiter(this, void 0, void 0, function* () {\n            forcedExit.nonce = forcedExit.nonce != null ? yield this.getNonce(forcedExit.nonce) : yield this.getNonce();\n            if (forcedExit.fee == null) {\n                // Fee for forced exit is defined by `Withdraw` transaction type (as it's essentially just a forced withdraw).\n                const fullFee = yield this.provider.getTransactionFee('Withdraw', forcedExit.target, forcedExit.token);\n                forcedExit.fee = fullFee.totalFee;\n            }\n            const signedForcedExitTransaction = yield this.signSyncForcedExit(forcedExit);\n            return submitSignedTransaction(signedForcedExitTransaction, this.provider);\n        });\n    }\n    // Note that in syncMultiTransfer, unlike in syncTransfer,\n    // users need to specify the fee for each transaction.\n    // The main reason is that multitransfer enables paying fees\n    // in multiple tokens, (as long as the total sum\n    // of fees is enough to cover up the fees for all of the transactions).\n    // That might bring an inattentive user in a trouble like the following:\n    //\n    // A user wants to submit transactions in multiple tokens and\n    // wants to pay the fees with only some of them. If the user forgets\n    // to set the fees' value to 0 for transactions with tokens\n    // he won't pay the fee with, then this user will overpay a lot.\n    //\n    // That's why we want the users to be explicit about fees in multitransfers.\n    syncMultiTransfer(transfers) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!this.signer) {\n                throw new Error('ZKSync signer is required for sending zksync transactions.');\n            }\n            if (transfers.length == 0)\n                return [];\n            yield this.setRequiredAccountIdFromServer('Transfer funds');\n            let batch = [];\n            let bytes = new Uint8Array([]);\n            let nextNonce = transfers[0].nonce != null ? yield this.getNonce(transfers[0].nonce) : yield this.getNonce();\n            for (let i = 0; i < transfers.length; i++) {\n                const transfer = transfers[i];\n                const nonce = nextNonce;\n                nextNonce += 1;\n                const tx = yield this.getTransfer({\n                    to: transfer.to,\n                    token: transfer.token,\n                    amount: transfer.amount,\n                    fee: transfer.fee,\n                    nonce\n                });\n                bytes = ethers_1.ethers.utils.concat([bytes, utils_1.serializeTransfer(tx)]);\n                batch.push({ tx, signature: null });\n            }\n            const ethSignature = yield this.getEthMessageSignature(ethers_1.ethers.utils.keccak256(bytes).slice(2));\n            const transactionHashes = yield this.provider.submitTxsBatch(batch, ethSignature);\n            return transactionHashes.map((txHash, idx) => new Transaction(batch[idx], txHash, this.provider));\n        });\n    }\n    syncTransfer(transfer) {\n        return __awaiter(this, void 0, void 0, function* () {\n            transfer.nonce = transfer.nonce != null ? yield this.getNonce(transfer.nonce) : yield this.getNonce();\n            if (transfer.fee == null) {\n                const fullFee = yield this.provider.getTransactionFee('Transfer', transfer.to, transfer.token);\n                transfer.fee = fullFee.totalFee;\n            }\n            const signedTransferTransaction = yield this.signSyncTransfer(transfer);\n            return submitSignedTransaction(signedTransferTransaction, this.provider);\n        });\n    }\n    signWithdrawFromSyncToEthereum(withdraw) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!this.signer) {\n                throw new Error('ZKSync signer is required for sending zksync transactions.');\n            }\n            yield this.setRequiredAccountIdFromServer('Withdraw funds');\n            const tokenId = this.provider.tokenSet.resolveTokenId(withdraw.token);\n            const transactionData = {\n                accountId: this.accountId,\n                from: this.address(),\n                ethAddress: withdraw.ethAddress,\n                tokenId,\n                amount: withdraw.amount,\n                fee: withdraw.fee,\n                nonce: withdraw.nonce\n            };\n            const stringAmount = this.provider.tokenSet.formatToken(withdraw.token, withdraw.amount);\n            const stringFee = this.provider.tokenSet.formatToken(withdraw.token, withdraw.fee);\n            const stringToken = this.provider.tokenSet.resolveTokenSymbol(withdraw.token);\n            const humanReadableTxInfo = `Withdraw ${stringAmount} ${stringToken}\\n` +\n                `To: ${withdraw.ethAddress.toLowerCase()}\\n` +\n                `Nonce: ${withdraw.nonce}\\n` +\n                `Fee: ${stringFee} ${stringToken}\\n` +\n                `Account Id: ${this.accountId}`;\n            const txMessageEthSignature = yield this.getEthMessageSignature(humanReadableTxInfo);\n            const signedWithdrawTransaction = this.signer.signSyncWithdraw(transactionData);\n            return {\n                tx: signedWithdrawTransaction,\n                ethereumSignature: txMessageEthSignature\n            };\n        });\n    }\n    withdrawFromSyncToEthereum(withdraw) {\n        return __awaiter(this, void 0, void 0, function* () {\n            withdraw.nonce = withdraw.nonce != null ? yield this.getNonce(withdraw.nonce) : yield this.getNonce();\n            if (withdraw.fee == null) {\n                const feeType = withdraw.fastProcessing === true ? 'FastWithdraw' : 'Withdraw';\n                const fullFee = yield this.provider.getTransactionFee(feeType, withdraw.ethAddress, withdraw.token);\n                withdraw.fee = fullFee.totalFee;\n            }\n            const signedWithdrawTransaction = yield this.signWithdrawFromSyncToEthereum(withdraw);\n            return submitSignedTransaction(signedWithdrawTransaction, this.provider, withdraw.fastProcessing);\n        });\n    }\n    isSigningKeySet() {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!this.signer) {\n                throw new Error('ZKSync signer is required for current pubkey calculation.');\n            }\n            const currentPubKeyHash = yield this.getCurrentPubKeyHash();\n            const signerPubKeyHash = this.signer.pubKeyHash();\n            return currentPubKeyHash === signerPubKeyHash;\n        });\n    }\n    signSetSigningKey(changePubKey) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!this.signer) {\n                throw new Error('ZKSync signer is required for current pubkey calculation.');\n            }\n            const feeTokenId = yield this.provider.tokenSet.resolveTokenId(changePubKey.feeToken);\n            const newPubKeyHash = this.signer.pubKeyHash();\n            yield this.setRequiredAccountIdFromServer('Set Signing Key');\n            const changePubKeyMessage = utils_1.getChangePubkeyMessage(newPubKeyHash, changePubKey.nonce, this.accountId);\n            const ethSignature = changePubKey.onchainAuth\n                ? null\n                : (yield this.getEthMessageSignature(changePubKeyMessage)).signature;\n            const changePubKeyTx = this.signer.signSyncChangePubKey({\n                accountId: this.accountId,\n                account: this.address(),\n                newPkHash: this.signer.pubKeyHash(),\n                nonce: changePubKey.nonce,\n                feeTokenId,\n                fee: ethers_1.BigNumber.from(changePubKey.fee).toString()\n            });\n            changePubKeyTx.ethSignature = ethSignature;\n            return {\n                tx: changePubKeyTx\n            };\n        });\n    }\n    setSigningKey(changePubKey) {\n        return __awaiter(this, void 0, void 0, function* () {\n            changePubKey.nonce =\n                changePubKey.nonce != null ? yield this.getNonce(changePubKey.nonce) : yield this.getNonce();\n            if (changePubKey.onchainAuth == null) {\n                changePubKey.onchainAuth = false;\n            }\n            if (changePubKey.fee == null) {\n                changePubKey.fee = 0;\n                const feeType = {\n                    ChangePubKey: {\n                        onchainPubkeyAuth: changePubKey.onchainAuth\n                    }\n                };\n                const fullFee = yield this.provider.getTransactionFee(feeType, this.address(), changePubKey.feeToken);\n                changePubKey.fee = fullFee.totalFee;\n            }\n            const txData = yield this.signSetSigningKey(changePubKey);\n            const currentPubKeyHash = yield this.getCurrentPubKeyHash();\n            if (currentPubKeyHash === txData.tx.newPkHash) {\n                throw new Error('Current signing key is already set');\n            }\n            return submitSignedTransaction(txData, this.provider);\n        });\n    }\n    isOnchainAuthSigningKeySet(nonce = 'committed') {\n        return __awaiter(this, void 0, void 0, function* () {\n            const mainZkSyncContract = new ethers_1.Contract(this.provider.contractAddress.mainContract, utils_1.SYNC_MAIN_CONTRACT_INTERFACE, this.ethSigner);\n            const numNonce = yield this.getNonce(nonce);\n            try {\n                const onchainAuthFact = yield mainZkSyncContract.authFacts(this.address(), numNonce);\n                return onchainAuthFact !== '0x0000000000000000000000000000000000000000000000000000000000000000';\n            }\n            catch (e) {\n                this.modifyEthersError(e);\n            }\n        });\n    }\n    onchainAuthSigningKey(nonce = 'committed', ethTxOptions) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!this.signer) {\n                throw new Error('ZKSync signer is required for current pubkey calculation.');\n            }\n            const currentPubKeyHash = yield this.getCurrentPubKeyHash();\n            const newPubKeyHash = this.signer.pubKeyHash();\n            if (currentPubKeyHash === newPubKeyHash) {\n                throw new Error('Current PubKeyHash is the same as new');\n            }\n            const numNonce = yield this.getNonce(nonce);\n            const mainZkSyncContract = new ethers_1.Contract(this.provider.contractAddress.mainContract, utils_1.SYNC_MAIN_CONTRACT_INTERFACE, this.ethSigner);\n            try {\n                return mainZkSyncContract.setAuthPubkeyHash(newPubKeyHash.replace('sync:', '0x'), numNonce, Object.assign({ gasLimit: ethers_1.BigNumber.from('200000') }, ethTxOptions));\n            }\n            catch (e) {\n                this.modifyEthersError(e);\n            }\n        });\n    }\n    getCurrentPubKeyHash() {\n        return __awaiter(this, void 0, void 0, function* () {\n            return (yield this.provider.getState(this.address())).committed.pubKeyHash;\n        });\n    }\n    getNonce(nonce = 'committed') {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (nonce === 'committed') {\n                return (yield this.provider.getState(this.address())).committed.nonce;\n            }\n            else if (typeof nonce === 'number') {\n                return nonce;\n            }\n        });\n    }\n    getAccountId() {\n        return __awaiter(this, void 0, void 0, function* () {\n            return (yield this.provider.getState(this.address())).id;\n        });\n    }\n    address() {\n        return this.cachedAddress;\n    }\n    getAccountState() {\n        return __awaiter(this, void 0, void 0, function* () {\n            return this.provider.getState(this.address());\n        });\n    }\n    getBalance(token, type = 'committed') {\n        return __awaiter(this, void 0, void 0, function* () {\n            const accountState = yield this.getAccountState();\n            const tokenSymbol = this.provider.tokenSet.resolveTokenSymbol(token);\n            let balance;\n            if (type === 'committed') {\n                balance = accountState.committed.balances[tokenSymbol] || '0';\n            }\n            else {\n                balance = accountState.verified.balances[tokenSymbol] || '0';\n            }\n            return ethers_1.BigNumber.from(balance);\n        });\n    }\n    getEthereumBalance(token) {\n        return __awaiter(this, void 0, void 0, function* () {\n            let balance;\n            if (utils_1.isTokenETH(token)) {\n                balance = yield this.ethSigner.provider.getBalance(this.cachedAddress);\n            }\n            else {\n                const erc20contract = new ethers_1.Contract(this.provider.tokenSet.resolveTokenAddress(token), utils_1.IERC20_INTERFACE, this.ethSigner);\n                try {\n                    balance = yield erc20contract.balanceOf(this.cachedAddress);\n                }\n                catch (e) {\n                    this.modifyEthersError(e);\n                }\n            }\n            return balance;\n        });\n    }\n    isERC20DepositsApproved(token) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (utils_1.isTokenETH(token)) {\n                throw Error('ETH token does not need approval.');\n            }\n            const tokenAddress = this.provider.tokenSet.resolveTokenAddress(token);\n            const erc20contract = new ethers_1.Contract(tokenAddress, utils_1.IERC20_INTERFACE, this.ethSigner);\n            try {\n                const currentAllowance = yield erc20contract.allowance(this.address(), this.provider.contractAddress.mainContract);\n                return ethers_1.BigNumber.from(currentAllowance).gte(utils_1.ERC20_APPROVE_TRESHOLD);\n            }\n            catch (e) {\n                this.modifyEthersError(e);\n            }\n        });\n    }\n    approveERC20TokenDeposits(token) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (utils_1.isTokenETH(token)) {\n                throw Error('ETH token does not need approval.');\n            }\n            const tokenAddress = this.provider.tokenSet.resolveTokenAddress(token);\n            const erc20contract = new ethers_1.Contract(tokenAddress, utils_1.IERC20_INTERFACE, this.ethSigner);\n            try {\n                return erc20contract.approve(this.provider.contractAddress.mainContract, utils_1.MAX_ERC20_APPROVE_AMOUNT);\n            }\n            catch (e) {\n                this.modifyEthersError(e);\n            }\n        });\n    }\n    depositToSyncFromEthereum(deposit) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const gasPrice = yield this.ethSigner.provider.getGasPrice();\n            const mainZkSyncContract = new ethers_1.Contract(this.provider.contractAddress.mainContract, utils_1.SYNC_MAIN_CONTRACT_INTERFACE, this.ethSigner);\n            let ethTransaction;\n            if (utils_1.isTokenETH(deposit.token)) {\n                try {\n                    ethTransaction = yield mainZkSyncContract.depositETH(deposit.depositTo, Object.assign({ value: ethers_1.BigNumber.from(deposit.amount), gasLimit: ethers_1.BigNumber.from('200000'), gasPrice }, deposit.ethTxOptions));\n                }\n                catch (e) {\n                    console.log(\"deposit error\");\n                    console.log(e);\n                    this.modifyEthersError(e);\n                }\n                console.log(\"deposit no error\");\n            }\n            else {\n                console.log(\"else no error\");\n                const tokenAddress = this.provider.tokenSet.resolveTokenAddress(deposit.token);\n                // ERC20 token deposit\n                const erc20contract = new ethers_1.Contract(tokenAddress, utils_1.IERC20_INTERFACE, this.ethSigner);\n                let nonce;\n                if (deposit.approveDepositAmountForERC20) {\n                    try {\n                        const approveTx = yield erc20contract.approve(this.provider.contractAddress.mainContract, deposit.amount);\n                        console.log(\"approveTx.nonce\");\n                        console.log(approveTx.nonce);\n                        nonce = approveTx.nonce + 1;\n                    }\n                    catch (e) {\n                        console.log(\"nonce error\");\n                        console.log(e);\n                        this.modifyEthersError(e);\n                    }\n                }\n                console.log(\"nonce\");\n                console.log(nonce);\n                const args = [\n                    tokenAddress,\n                    deposit.amount,\n                    deposit.depositTo,\n                    Object.assign({ nonce,\n                        gasPrice }, deposit.ethTxOptions)\n                ];\n                console.log(\"nonce2\");\n                // We set gas limit only if user does not set it using ethTxOptions.\n                const txRequest = args[args.length - 1];\n                if (txRequest.gasLimit == null) {\n                    try {\n                        const gasEstimate = yield mainZkSyncContract.estimateGas.depositERC20(...args).then((estimate) => estimate, (_err) => ethers_1.BigNumber.from('0'));\n                        txRequest.gasLimit = gasEstimate.gte(utils_1.ERC20_DEPOSIT_GAS_LIMIT)\n                            ? gasEstimate\n                            : utils_1.ERC20_DEPOSIT_GAS_LIMIT;\n                        args[args.length - 1] = txRequest;\n                    }\n                    catch (e) {\n                        console.log(\"e error\");\n                        console.log(e);\n                        this.modifyEthersError(e);\n                    }\n                }\n                try {\n                    ethTransaction = yield mainZkSyncContract.depositERC20(...args);\n                }\n                catch (e) {\n                    this.modifyEthersError(e);\n                }\n            }\n            return new ETHOperation(ethTransaction, this.provider);\n        });\n    }\n    emergencyWithdraw(withdraw) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const gasPrice = yield this.ethSigner.provider.getGasPrice();\n            const ethProxy = new provider_1.ETHProxy(this.ethSigner.provider, this.provider.contractAddress);\n            let accountId;\n            if (withdraw.accountId != null) {\n                accountId = withdraw.accountId;\n            }\n            else if (this.accountId !== undefined) {\n                accountId = this.accountId;\n            }\n            else {\n                const accountState = yield this.getAccountState();\n                if (!accountState.id) {\n                    throw new Error(\"Can't resolve account id from the zkSync node\");\n                }\n                accountId = accountState.id;\n            }\n            const mainZkSyncContract = new ethers_1.Contract(ethProxy.contractAddress.mainContract, utils_1.SYNC_MAIN_CONTRACT_INTERFACE, this.ethSigner);\n            const tokenAddress = this.provider.tokenSet.resolveTokenAddress(withdraw.token);\n            try {\n                const ethTransaction = yield mainZkSyncContract.fullExit(accountId, tokenAddress, Object.assign({ gasLimit: ethers_1.BigNumber.from('500000'), gasPrice }, withdraw.ethTxOptions));\n                return new ETHOperation(ethTransaction, this.provider);\n            }\n            catch (e) {\n                this.modifyEthersError(e);\n            }\n        });\n    }\n    modifyEthersError(error) {\n        if (this.ethSigner instanceof ethers_1.ethers.providers.JsonRpcSigner) {\n            // List of errors that can be caused by user's actions, which have to be forwarded as-is.\n            const correct_errors = [\n                EthersErrorCode.NONCE_EXPIRED,\n                EthersErrorCode.INSUFFICIENT_FUNDS,\n                EthersErrorCode.REPLACEMENT_UNDERPRICED,\n                EthersErrorCode.UNPREDICTABLE_GAS_LIMIT\n            ];\n            if (!correct_errors.includes(error.code)) {\n                // This is an error which we don't expect\n                error.message = `Ethereum smart wallet JSON RPC server returned the following error while executing an operation: \"${error.message}\". Please contact your smart wallet support for help.`;\n            }\n        }\n        throw error;\n    }\n    setRequiredAccountIdFromServer(actionName) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (this.accountId === undefined) {\n                const accountIdFromServer = yield this.getAccountId();\n                if (accountIdFromServer == null) {\n                    throw new Error(`Failed to ${actionName}: Account does not exist in the zkSync network`);\n                }\n                else {\n                    this.accountId = accountIdFromServer;\n                }\n            }\n        });\n    }\n}\nexports.Wallet = Wallet;\nclass ETHOperation {\n    constructor(ethTx, zkSyncProvider) {\n        this.ethTx = ethTx;\n        this.zkSyncProvider = zkSyncProvider;\n        this.state = 'Sent';\n    }\n    awaitEthereumTxCommit() {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (this.state !== 'Sent')\n                return;\n            const txReceipt = yield this.ethTx.wait();\n            for (const log of txReceipt.logs) {\n                try {\n                    const priorityQueueLog = utils_1.SYNC_MAIN_CONTRACT_INTERFACE.parseLog(log);\n                    if (priorityQueueLog && priorityQueueLog.args.serialId != null) {\n                        this.priorityOpId = priorityQueueLog.args.serialId;\n                    }\n                }\n                catch (_a) { }\n            }\n            if (!this.priorityOpId) {\n                throw new Error('Failed to parse tx logs');\n            }\n            this.state = 'Mined';\n            return txReceipt;\n        });\n    }\n    awaitReceipt() {\n        return __awaiter(this, void 0, void 0, function* () {\n            this.throwErrorIfFailedState();\n            yield this.awaitEthereumTxCommit();\n            if (this.state !== 'Mined')\n                return;\n            const receipt = yield this.zkSyncProvider.notifyPriorityOp(this.priorityOpId.toNumber(), 'COMMIT');\n            if (!receipt.executed) {\n                this.setErrorState(new ZKSyncTxError('Priority operation failed', receipt));\n                this.throwErrorIfFailedState();\n            }\n            this.state = 'Committed';\n            return receipt;\n        });\n    }\n    awaitVerifyReceipt() {\n        return __awaiter(this, void 0, void 0, function* () {\n            yield this.awaitReceipt();\n            if (this.state !== 'Committed')\n                return;\n            const receipt = yield this.zkSyncProvider.notifyPriorityOp(this.priorityOpId.toNumber(), 'VERIFY');\n            this.state = 'Verified';\n            return receipt;\n        });\n    }\n    setErrorState(error) {\n        this.state = 'Failed';\n        this.error = error;\n    }\n    throwErrorIfFailedState() {\n        if (this.state === 'Failed')\n            throw this.error;\n    }\n}\nclass Transaction {\n    constructor(txData, txHash, sidechainProvider) {\n        this.txData = txData;\n        this.txHash = txHash;\n        this.sidechainProvider = sidechainProvider;\n        this.state = 'Sent';\n    }\n    awaitReceipt() {\n        return __awaiter(this, void 0, void 0, function* () {\n            this.throwErrorIfFailedState();\n            if (this.state !== 'Sent')\n                return;\n            const receipt = yield this.sidechainProvider.notifyTransaction(this.txHash, 'COMMIT');\n            if (!receipt.success) {\n                this.setErrorState(new ZKSyncTxError(`zkSync transaction failed: ${receipt.failReason}`, receipt));\n                this.throwErrorIfFailedState();\n            }\n            this.state = 'Committed';\n            return receipt;\n        });\n    }\n    awaitVerifyReceipt() {\n        return __awaiter(this, void 0, void 0, function* () {\n            yield this.awaitReceipt();\n            const receipt = yield this.sidechainProvider.notifyTransaction(this.txHash, 'VERIFY');\n            this.state = 'Verified';\n            return receipt;\n        });\n    }\n    setErrorState(error) {\n        this.state = 'Failed';\n        this.error = error;\n    }\n    throwErrorIfFailedState() {\n        if (this.state === 'Failed')\n            throw this.error;\n    }\n}\nfunction submitSignedTransaction(signedTx, provider, fastProcessing) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const transactionHash = yield provider.submitTx(signedTx.tx, signedTx.ethereumSignature, fastProcessing);\n        return new Transaction(signedTx, transactionHash, provider);\n    });\n}\nexports.submitSignedTransaction = submitSignedTransaction;\n","'use strict';\n\nvar requirePromise = require('./requirePromise');\n\nvar implementation = require('./implementation');\n\nmodule.exports = function getPolyfill() {\n\trequirePromise();\n\treturn typeof Promise.prototype['finally'] === 'function' ? Promise.prototype['finally'] : implementation;\n};\n","'use strict';\n\nvar has = require('has');\n\nvar assertRecord = require('../helpers/assertRecord');\n\nvar Type = require('./Type');\n\n// https://www.ecma-international.org/ecma-262/6.0/#sec-isaccessordescriptor\n\nmodule.exports = function IsAccessorDescriptor(Desc) {\n\tif (typeof Desc === 'undefined') {\n\t\treturn false;\n\t}\n\n\tassertRecord(Type, 'Property Descriptor', 'Desc', Desc);\n\n\tif (!has(Desc, '[[Get]]') && !has(Desc, '[[Set]]')) {\n\t\treturn false;\n\t}\n\n\treturn true;\n};\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.WSTransport = exports.HTTPTransport = exports.JRPCError = exports.AbstractJSONRPCTransport = void 0;\nconst axios_1 = __importDefault(require(\"axios\"));\nconst WebSocketAsPromised = require(\"websocket-as-promised\");\nconst websocket = __importStar(require(\"websocket\"));\nconst W3CWebSocket = websocket.w3cwebsocket;\nclass AbstractJSONRPCTransport {\n    subscriptionsSupported() {\n        return false;\n    }\n    subscribe(subMethod, subParams, unsubMethod, cb) {\n        return __awaiter(this, void 0, void 0, function* () {\n            throw new Error('subscription are not supported for this transport');\n        });\n    }\n}\nexports.AbstractJSONRPCTransport = AbstractJSONRPCTransport;\n// Has jrpcError field which is JRPC error object.\n// https://www.jsonrpc.org/specification#error_object\nclass JRPCError extends Error {\n    constructor(message, jrpcError) {\n        super(message);\n        this.jrpcError = jrpcError;\n    }\n}\nexports.JRPCError = JRPCError;\nclass Subscription {\n    constructor(unsubscribe) {\n        this.unsubscribe = unsubscribe;\n    }\n}\nclass HTTPTransport extends AbstractJSONRPCTransport {\n    constructor(address) {\n        super();\n        this.address = address;\n    }\n    // JSON RPC request\n    request(method, params = null) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const request = {\n                id: 1,\n                jsonrpc: '2.0',\n                method,\n                params\n            };\n            const response = yield axios_1.default.post(this.address, request).then((resp) => {\n                return resp.data;\n            });\n            if ('result' in response) {\n                return response.result;\n            }\n            else if ('error' in response) {\n                throw new JRPCError(`zkSync API response error: code ${response.error.code}; message: ${response.error.message}`, response.error);\n            }\n            else {\n                throw new Error('Unknown JRPC Error');\n            }\n        });\n    }\n    disconnect() {\n        return __awaiter(this, void 0, void 0, function* () { });\n    }\n}\nexports.HTTPTransport = HTTPTransport;\nclass WSTransport extends AbstractJSONRPCTransport {\n    constructor(address) {\n        super();\n        this.address = address;\n        this.ws = new WebSocketAsPromised(address, {\n            createWebSocket: (url) => new W3CWebSocket(url),\n            packMessage: (data) => JSON.stringify(data),\n            unpackMessage: (data) => JSON.parse(data),\n            attachRequestId: (data, requestId) => Object.assign({ id: requestId }, data),\n            extractRequestId: (data) => data && data.id\n        });\n        this.subscriptionCallback = new Map();\n        // Call all subscription callbacks\n        this.ws.onUnpackedMessage.addListener((data) => {\n            if (data.params && data.params.subscription) {\n                const params = data.params;\n                if (this.subscriptionCallback.has(params.subscription)) {\n                    this.subscriptionCallback.get(params.subscription)(params.result);\n                }\n            }\n        });\n    }\n    static connect(address = 'ws://127.0.0.1:3031') {\n        return __awaiter(this, void 0, void 0, function* () {\n            const transport = new WSTransport(address);\n            yield transport.ws.open();\n            return transport;\n        });\n    }\n    subscriptionsSupported() {\n        return true;\n    }\n    subscribe(subMethod, subParams, unsubMethod, cb) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const req = { jsonrpc: '2.0', method: subMethod, params: subParams };\n            const sub = yield this.ws.sendRequest(req);\n            if (sub.error) {\n                throw new JRPCError('Subscription failed', sub.error);\n            }\n            const subId = sub.result;\n            this.subscriptionCallback.set(subId, cb);\n            const unsubscribe = () => __awaiter(this, void 0, void 0, function* () {\n                const unsubRep = yield this.ws.sendRequest({\n                    jsonrpc: '2.0',\n                    method: unsubMethod,\n                    params: [subId]\n                });\n                if (unsubRep.error) {\n                    throw new JRPCError(`Unsubscribe failed: ${subId}, ${JSON.stringify(unsubRep.error)}`, unsubRep.error);\n                }\n                if (unsubRep.result !== true) {\n                    throw new Error(`Unsubscription failed, returned false: ${subId}`);\n                }\n                this.subscriptionCallback.delete(subId);\n            });\n            return new Subscription(unsubscribe);\n        });\n    }\n    // JSON RPC request\n    request(method, params = null) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const request = {\n                jsonrpc: '2.0',\n                method,\n                params\n            };\n            const response = yield this.ws.sendRequest(request, { requestId: 1 });\n            if ('result' in response) {\n                return response.result;\n            }\n            else if ('error' in response) {\n                throw new JRPCError(`zkSync API response error: code ${response.error.code}; message: ${response.error.message}`, response.error);\n            }\n            else {\n                throw new Error('Unknown JRPC Error');\n            }\n        });\n    }\n    disconnect() {\n        return __awaiter(this, void 0, void 0, function* () {\n            yield this.ws.close();\n        });\n    }\n}\nexports.WSTransport = WSTransport;\n","'use strict';\n\nvar assertRecord = require('../helpers/assertRecord');\n\nvar Type = require('./Type');\n\n// https://www.ecma-international.org/ecma-262/6.0/#sec-frompropertydescriptor\n\nmodule.exports = function FromPropertyDescriptor(Desc) {\n\tif (typeof Desc === 'undefined') {\n\t\treturn Desc;\n\t}\n\n\tassertRecord(Type, 'Property Descriptor', 'Desc', Desc);\n\n\tvar obj = {};\n\tif ('[[Value]]' in Desc) {\n\t\tobj.value = Desc['[[Value]]'];\n\t}\n\tif ('[[Writable]]' in Desc) {\n\t\tobj.writable = Desc['[[Writable]]'];\n\t}\n\tif ('[[Get]]' in Desc) {\n\t\tobj.get = Desc['[[Get]]'];\n\t}\n\tif ('[[Set]]' in Desc) {\n\t\tobj.set = Desc['[[Set]]'];\n\t}\n\tif ('[[Enumerable]]' in Desc) {\n\t\tobj.enumerable = Desc['[[Enumerable]]'];\n\t}\n\tif ('[[Configurable]]' in Desc) {\n\t\tobj.configurable = Desc['[[Configurable]]'];\n\t}\n\treturn obj;\n};\n","'use strict';\n\nvar bind = require('function-bind');\n\nmodule.exports = bind.call(Function.call, Object.prototype.hasOwnProperty);\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n","'use strict';\n\nvar keysShim;\nif (!Object.keys) {\n\t// modified from https://github.com/es-shims/es5-shim\n\tvar has = Object.prototype.hasOwnProperty;\n\tvar toStr = Object.prototype.toString;\n\tvar isArgs = require('./isArguments'); // eslint-disable-line global-require\n\tvar isEnumerable = Object.prototype.propertyIsEnumerable;\n\tvar hasDontEnumBug = !isEnumerable.call({ toString: null }, 'toString');\n\tvar hasProtoEnumBug = isEnumerable.call(function () {}, 'prototype');\n\tvar dontEnums = [\n\t\t'toString',\n\t\t'toLocaleString',\n\t\t'valueOf',\n\t\t'hasOwnProperty',\n\t\t'isPrototypeOf',\n\t\t'propertyIsEnumerable',\n\t\t'constructor'\n\t];\n\tvar equalsConstructorPrototype = function (o) {\n\t\tvar ctor = o.constructor;\n\t\treturn ctor && ctor.prototype === o;\n\t};\n\tvar excludedKeys = {\n\t\t$applicationCache: true,\n\t\t$console: true,\n\t\t$external: true,\n\t\t$frame: true,\n\t\t$frameElement: true,\n\t\t$frames: true,\n\t\t$innerHeight: true,\n\t\t$innerWidth: true,\n\t\t$onmozfullscreenchange: true,\n\t\t$onmozfullscreenerror: true,\n\t\t$outerHeight: true,\n\t\t$outerWidth: true,\n\t\t$pageXOffset: true,\n\t\t$pageYOffset: true,\n\t\t$parent: true,\n\t\t$scrollLeft: true,\n\t\t$scrollTop: true,\n\t\t$scrollX: true,\n\t\t$scrollY: true,\n\t\t$self: true,\n\t\t$webkitIndexedDB: true,\n\t\t$webkitStorageInfo: true,\n\t\t$window: true\n\t};\n\tvar hasAutomationEqualityBug = (function () {\n\t\t/* global window */\n\t\tif (typeof window === 'undefined') { return false; }\n\t\tfor (var k in window) {\n\t\t\ttry {\n\t\t\t\tif (!excludedKeys['$' + k] && has.call(window, k) && window[k] !== null && typeof window[k] === 'object') {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tequalsConstructorPrototype(window[k]);\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}());\n\tvar equalsConstructorPrototypeIfNotBuggy = function (o) {\n\t\t/* global window */\n\t\tif (typeof window === 'undefined' || !hasAutomationEqualityBug) {\n\t\t\treturn equalsConstructorPrototype(o);\n\t\t}\n\t\ttry {\n\t\t\treturn equalsConstructorPrototype(o);\n\t\t} catch (e) {\n\t\t\treturn false;\n\t\t}\n\t};\n\n\tkeysShim = function keys(object) {\n\t\tvar isObject = object !== null && typeof object === 'object';\n\t\tvar isFunction = toStr.call(object) === '[object Function]';\n\t\tvar isArguments = isArgs(object);\n\t\tvar isString = isObject && toStr.call(object) === '[object String]';\n\t\tvar theKeys = [];\n\n\t\tif (!isObject && !isFunction && !isArguments) {\n\t\t\tthrow new TypeError('Object.keys called on a non-object');\n\t\t}\n\n\t\tvar skipProto = hasProtoEnumBug && isFunction;\n\t\tif (isString && object.length > 0 && !has.call(object, 0)) {\n\t\t\tfor (var i = 0; i < object.length; ++i) {\n\t\t\t\ttheKeys.push(String(i));\n\t\t\t}\n\t\t}\n\n\t\tif (isArguments && object.length > 0) {\n\t\t\tfor (var j = 0; j < object.length; ++j) {\n\t\t\t\ttheKeys.push(String(j));\n\t\t\t}\n\t\t} else {\n\t\t\tfor (var name in object) {\n\t\t\t\tif (!(skipProto && name === 'prototype') && has.call(object, name)) {\n\t\t\t\t\ttheKeys.push(String(name));\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (hasDontEnumBug) {\n\t\t\tvar skipConstructor = equalsConstructorPrototypeIfNotBuggy(object);\n\n\t\t\tfor (var k = 0; k < dontEnums.length; ++k) {\n\t\t\t\tif (!(skipConstructor && dontEnums[k] === 'constructor') && has.call(object, dontEnums[k])) {\n\t\t\t\t\ttheKeys.push(dontEnums[k]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn theKeys;\n\t};\n}\nmodule.exports = keysShim;\n","'use strict';\n\nmodule.exports = function requirePromise() {\n\tif (typeof Promise !== 'function') {\n\t\tthrow new TypeError('`Promise.prototype.finally` requires a global `Promise` be available.');\n\t}\n};\n","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ETHProxy = exports.Provider = exports.getDefaultProvider = void 0;\nconst transport_1 = require(\"./transport\");\nconst ethers_1 = require(\"ethers\");\nconst utils_1 = require(\"./utils\");\nfunction getDefaultProvider(network, transport = 'WS') {\n    return __awaiter(this, void 0, void 0, function* () {\n        if (network === 'localhost') {\n            if (transport === 'WS') {\n                return yield Provider.newWebsocketProvider('ws://127.0.0.1:3031');\n            }\n            else if (transport === 'HTTP') {\n                return yield Provider.newHttpProvider('http://127.0.0.1:3030');\n            }\n        }\n        else if (network === 'ropsten') {\n            if (transport === 'WS') {\n                return yield Provider.newWebsocketProvider('wss://ropsten-api.zksync.io/jsrpc-ws');\n            }\n            else if (transport === 'HTTP') {\n                return yield Provider.newHttpProvider('https://ropsten-api.zksync.io/jsrpc');\n            }\n        }\n        else if (network === 'rinkeby') {\n            if (transport === 'WS') {\n                return yield Provider.newWebsocketProvider('wss://rinkeby-api.zksync.io/jsrpc-ws');\n            }\n            else if (transport === 'HTTP') {\n                return yield Provider.newHttpProvider('https://rinkeby-api.zksync.io/jsrpc');\n            }\n        }\n        else if (network === 'mainnet') {\n            if (transport === 'WS') {\n                return yield Provider.newWebsocketProvider('wss://api.zksync.io/jsrpc-ws');\n            }\n            else if (transport === 'HTTP') {\n                return yield Provider.newHttpProvider('https://api.zksync.io/jsrpc');\n            }\n        }\n        else {\n            throw new Error(`Ethereum network ${network} is not supported`);\n        }\n    });\n}\nexports.getDefaultProvider = getDefaultProvider;\nclass Provider {\n    constructor(transport) {\n        this.transport = transport;\n        // For HTTP provider\n        this.pollIntervalMilliSecs = 500;\n    }\n    static newWebsocketProvider(address) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const transport = yield transport_1.WSTransport.connect(address);\n            const provider = new Provider(transport);\n            provider.contractAddress = yield provider.getContractAddress();\n            provider.tokenSet = new utils_1.TokenSet(yield provider.getTokens());\n            return provider;\n        });\n    }\n    static newHttpProvider(address = 'http://127.0.0.1:3030', pollIntervalMilliSecs) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const transport = new transport_1.HTTPTransport(address);\n            const provider = new Provider(transport);\n            if (pollIntervalMilliSecs) {\n                provider.pollIntervalMilliSecs = pollIntervalMilliSecs;\n            }\n            provider.contractAddress = yield provider.getContractAddress();\n            provider.tokenSet = new utils_1.TokenSet(yield provider.getTokens());\n            return provider;\n        });\n    }\n    // return transaction hash (e.g. sync-tx:dead..beef)\n    submitTx(tx, signature, fastProcessing) {\n        return __awaiter(this, void 0, void 0, function* () {\n            return yield this.transport.request('tx_submit', [tx, signature, fastProcessing]);\n        });\n    }\n    // Requests `zkSync` server to execute several transactions together.\n    // return transaction hash (e.g. sync-tx:dead..beef)\n    submitTxsBatch(transactions, ethSignature) {\n        return __awaiter(this, void 0, void 0, function* () {\n            return yield this.transport.request('submit_txs_batch', [transactions, ethSignature]);\n        });\n    }\n    getContractAddress() {\n        return __awaiter(this, void 0, void 0, function* () {\n            return yield this.transport.request('contract_address', null);\n        });\n    }\n    getTokens() {\n        return __awaiter(this, void 0, void 0, function* () {\n            return yield this.transport.request('tokens', null);\n        });\n    }\n    getState(address) {\n        return __awaiter(this, void 0, void 0, function* () {\n            return yield this.transport.request('account_info', [address]);\n        });\n    }\n    // get transaction status by its hash (e.g. 0xdead..beef)\n    getTxReceipt(txHash) {\n        return __awaiter(this, void 0, void 0, function* () {\n            return yield this.transport.request('tx_info', [txHash]);\n        });\n    }\n    getPriorityOpStatus(serialId) {\n        return __awaiter(this, void 0, void 0, function* () {\n            return yield this.transport.request('ethop_info', [serialId]);\n        });\n    }\n    getConfirmationsForEthOpAmount() {\n        return __awaiter(this, void 0, void 0, function* () {\n            return yield this.transport.request('get_confirmations_for_eth_op_amount', []);\n        });\n    }\n    getEthTxForWithdrawal(withdrawal_hash) {\n        return __awaiter(this, void 0, void 0, function* () {\n            return yield this.transport.request('get_eth_tx_for_withdrawal', [withdrawal_hash]);\n        });\n    }\n    notifyPriorityOp(serialId, action) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (this.transport.subscriptionsSupported()) {\n                return yield new Promise((resolve) => {\n                    const startTime = new Date().getTime();\n                    const subscribe = this.transport.subscribe('ethop_subscribe', [serialId, action], 'ethop_unsubscribe', (resp) => {\n                        subscribe\n                            .then((sub) => sub.unsubscribe())\n                            .catch((err) => console.log(`WebSocket connection closed with reason: ${err}`));\n                        resolve(resp);\n                    });\n                });\n            }\n            else {\n                while (true) {\n                    const priorOpStatus = yield this.getPriorityOpStatus(serialId);\n                    const notifyDone = action === 'COMMIT'\n                        ? priorOpStatus.block && priorOpStatus.block.committed\n                        : priorOpStatus.block && priorOpStatus.block.verified;\n                    if (notifyDone) {\n                        return priorOpStatus;\n                    }\n                    else {\n                        yield utils_1.sleep(this.pollIntervalMilliSecs);\n                    }\n                }\n            }\n        });\n    }\n    notifyTransaction(hash, action) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (this.transport.subscriptionsSupported()) {\n                return yield new Promise((resolve) => {\n                    const subscribe = this.transport.subscribe('tx_subscribe', [hash, action], 'tx_unsubscribe', (resp) => {\n                        subscribe\n                            .then((sub) => sub.unsubscribe())\n                            .catch((err) => console.log(`WebSocket connection closed with reason: ${err}`));\n                        resolve(resp);\n                    });\n                });\n            }\n            else {\n                while (true) {\n                    const transactionStatus = yield this.getTxReceipt(hash);\n                    const notifyDone = action == 'COMMIT'\n                        ? transactionStatus.block && transactionStatus.block.committed\n                        : transactionStatus.block && transactionStatus.block.verified;\n                    if (notifyDone) {\n                        return transactionStatus;\n                    }\n                    else {\n                        yield utils_1.sleep(this.pollIntervalMilliSecs);\n                    }\n                }\n            }\n        });\n    }\n    getTransactionFee(txType, address, tokenLike) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const transactionFee = yield this.transport.request('get_tx_fee', [txType, address.toString(), tokenLike]);\n            return {\n                feeType: transactionFee.feeType,\n                gasTxAmount: ethers_1.BigNumber.from(transactionFee.gasTxAmount),\n                gasPriceWei: ethers_1.BigNumber.from(transactionFee.gasPriceWei),\n                gasFee: ethers_1.BigNumber.from(transactionFee.gasFee),\n                zkpFee: ethers_1.BigNumber.from(transactionFee.zkpFee),\n                totalFee: ethers_1.BigNumber.from(transactionFee.totalFee)\n            };\n        });\n    }\n    getTransactionsBatchFee(txTypes, addresses, tokenLike) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const batchFee = yield this.transport.request('get_txs_batch_fee_in_wei', [txTypes, addresses, tokenLike]);\n            return ethers_1.BigNumber.from(batchFee.totalFee);\n        });\n    }\n    getTokenPrice(tokenLike) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const tokenPrice = yield this.transport.request('get_token_price', [tokenLike]);\n            return parseFloat(tokenPrice);\n        });\n    }\n    disconnect() {\n        return __awaiter(this, void 0, void 0, function* () {\n            return yield this.transport.disconnect();\n        });\n    }\n}\nexports.Provider = Provider;\nclass ETHProxy {\n    constructor(ethersProvider, contractAddress) {\n        this.ethersProvider = ethersProvider;\n        this.contractAddress = contractAddress;\n        this.governanceContract = new ethers_1.Contract(this.contractAddress.govContract, utils_1.SYNC_GOV_CONTRACT_INTERFACE, this.ethersProvider);\n        this.mainContract = new ethers_1.Contract(this.contractAddress.mainContract, utils_1.SYNC_MAIN_CONTRACT_INTERFACE, this.ethersProvider);\n    }\n    resolveTokenId(token) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (utils_1.isTokenETH(token)) {\n                return 0;\n            }\n            else {\n                const tokenId = yield this.governanceContract.tokenIds(token);\n                if (tokenId == 0) {\n                    throw new Error(`ERC20 token ${token} is not supported`);\n                }\n                return tokenId;\n            }\n        });\n    }\n}\nexports.ETHProxy = ETHProxy;\n","'use strict';\n\nvar GetIntrinsic = require('../GetIntrinsic');\n\nvar $TypeError = GetIntrinsic('%TypeError%');\nvar $SyntaxError = GetIntrinsic('%SyntaxError%');\n\nvar has = require('has');\n\nvar predicates = {\n\t// https://ecma-international.org/ecma-262/6.0/#sec-property-descriptor-specification-type\n\t'Property Descriptor': function isPropertyDescriptor(Type, Desc) {\n\t\tif (Type(Desc) !== 'Object') {\n\t\t\treturn false;\n\t\t}\n\t\tvar allowed = {\n\t\t\t'[[Configurable]]': true,\n\t\t\t'[[Enumerable]]': true,\n\t\t\t'[[Get]]': true,\n\t\t\t'[[Set]]': true,\n\t\t\t'[[Value]]': true,\n\t\t\t'[[Writable]]': true\n\t\t};\n\n\t\tfor (var key in Desc) { // eslint-disable-line\n\t\t\tif (has(Desc, key) && !allowed[key]) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\tvar isData = has(Desc, '[[Value]]');\n\t\tvar IsAccessor = has(Desc, '[[Get]]') || has(Desc, '[[Set]]');\n\t\tif (isData && IsAccessor) {\n\t\t\tthrow new $TypeError('Property Descriptors may not be both accessor and data descriptors');\n\t\t}\n\t\treturn true;\n\t}\n};\n\nmodule.exports = function assertRecord(Type, recordType, argumentName, value) {\n\tvar predicate = predicates[recordType];\n\tif (typeof predicate !== 'function') {\n\t\tthrow new $SyntaxError('unknown record type: ' + recordType);\n\t}\n\tif (!predicate(Type, value)) {\n\t\tthrow new $TypeError(argumentName + ' must be a ' + recordType);\n\t}\n};\n","/**\n * @ignore\n */\nconst defaults = require('./defaults');\nconst {isPromise, createErrorType, tryCall} = require('./utils');\n\n/**\n * @typicalname pc\n */\nclass PromiseController {\n  /**\n   * Creates promise controller. Unlike original Promise, it does not immediately call any function.\n   * Instead it has [.call()](#PromiseController+call) method that calls provided function\n   * and stores `resolve / reject` methods for future access.\n   *\n   * @param {Options} [options]\n   */\n  constructor(options) {\n    this._options = Object.assign({}, defaults, options);\n    this._resolve = null;\n    this._reject = null;\n    this._isPending = false;\n    this._isFulfilled = false;\n    this._isRejected = false;\n    this._value = undefined;\n    this._promise = null;\n    this._timer = null;\n  }\n\n  /**\n   * Returns promise itself.\n   *\n   * @returns {Promise}\n   */\n  get promise() {\n    return this._promise;\n  }\n\n  /**\n   * Returns value with that promise was settled (fulfilled or rejected).\n   *\n   * @returns {*}\n   */\n  get value() {\n    return this._value;\n  }\n\n  /**\n   * Returns true if promise is pending.\n   *\n   * @returns {Boolean}\n   */\n  get isPending() {\n    return this._isPending;\n  }\n\n  /**\n   * Returns true if promise is fulfilled.\n   *\n   * @returns {Boolean}\n   */\n  get isFulfilled() {\n    return this._isFulfilled;\n  }\n\n  /**\n   * Returns true if promise rejected.\n   *\n   * @returns {Boolean}\n   */\n  get isRejected() {\n    return this._isRejected;\n  }\n\n  /**\n   * Returns true if promise is fulfilled or rejected.\n   *\n   * @returns {Boolean}\n   */\n  get isSettled() {\n    return this._isFulfilled || this._isRejected;\n  }\n\n  /**\n   * Calls `fn` and returns promise OR just returns existing promise from previous `call()` if it is still pending.\n   * To fulfill returned promise you should use\n   * {@link PromiseController#resolve} / {@link PromiseController#reject} methods.\n   * If `fn` itself returns promise, then external promise is attached to it and fulfills together.\n   * If no `fn` passed - promiseController is initialized as well.\n   *\n   * @param {Function} [fn] function to be called.\n   * @returns {Promise}\n   */\n  call(fn) {\n    if (!this._isPending) {\n      this.reset();\n      this._createPromise();\n      this._createTimer();\n      this._callFn(fn);\n    }\n    return this._promise;\n  }\n\n  /**\n   * Resolves pending promise with specified `value`.\n   *\n   * @param {*} [value]\n   */\n  resolve(value) {\n    if (this._isPending) {\n      if (isPromise(value)) {\n        this._tryAttachToPromise(value);\n      } else {\n        this._settle(value);\n        this._isFulfilled = true;\n        this._resolve(value);\n      }\n    }\n  }\n\n  /**\n   * Rejects pending promise with specified `value`.\n   *\n   * @param {*} [value]\n   */\n  reject(value) {\n    if (this._isPending) {\n      this._settle(value);\n      this._isRejected = true;\n      this._reject(value);\n    }\n  }\n\n  /**\n   * Resets to initial state.\n   * If promise is pending it will be rejected with {@link PromiseController.ResetError}.\n   */\n  reset() {\n    if (this._isPending) {\n      const message = tryCall(this._options.resetReason);\n      const error = new PromiseController.ResetError(message);\n      this.reject(error);\n    }\n    this._promise = null;\n    this._isPending = false;\n    this._isFulfilled = false;\n    this._isRejected = false;\n    this._value = undefined;\n    this._clearTimer();\n  }\n\n  /**\n   * Re-assign one or more options.\n   *\n   * @param {Options} options\n   */\n  configure(options) {\n    Object.assign(this._options, options);\n  }\n\n  _createPromise() {\n    this._promise = new Promise((resolve, reject) => {\n      this._isPending = true;\n      this._resolve = resolve;\n      this._reject = reject;\n    });\n  }\n\n  _handleTimeout() {\n    const messageTpl = tryCall(this._options.timeoutReason);\n    const message = typeof messageTpl === 'string' ? messageTpl.replace('{timeout}', this._options.timeout) : '';\n    const error = new PromiseController.TimeoutError(message);\n    this.reject(error);\n  }\n\n  _createTimer() {\n    if (this._options.timeout) {\n      this._timer = setTimeout(() => this._handleTimeout(), this._options.timeout);\n    }\n  }\n\n  _clearTimer() {\n    if (this._timer) {\n      clearTimeout(this._timer);\n      this._timer = null;\n    }\n  }\n\n  _settle(value) {\n    this._isPending = false;\n    this._value = value;\n    this._clearTimer();\n  }\n\n  _callFn(fn) {\n    if (typeof fn === 'function') {\n      try {\n        const result = fn();\n        this._tryAttachToPromise(result);\n      } catch (e) {\n        this.reject(e);\n      }\n    }\n  }\n\n  _tryAttachToPromise(p) {\n    if (isPromise(p)) {\n      p.then(value => this.resolve(value), e => this.reject(e));\n    }\n  }\n}\n\n/**\n * Error for rejection in case of timeout.\n * @type {PromiseController.TimeoutError}\n */\nPromiseController.TimeoutError = createErrorType('TimeoutError');\n\n/**\n * Error for rejection in case of call `.reset()` while promise is pending.\n * @type {PromiseController.ResetError}\n */\nPromiseController.ResetError = createErrorType('ResetError');\n\nmodule.exports = PromiseController;\n","'use strict';\n\nvar toStr = Object.prototype.toString;\n\nmodule.exports = function isArguments(value) {\n\tvar str = toStr.call(value);\n\tvar isArgs = str === '[object Arguments]';\n\tif (!isArgs) {\n\t\tisArgs = str !== '[object Array]' &&\n\t\t\tvalue !== null &&\n\t\t\ttypeof value === 'object' &&\n\t\t\ttypeof value.length === 'number' &&\n\t\t\tvalue.length >= 0 &&\n\t\t\ttoStr.call(value.callee) === '[object Function]';\n\t}\n\treturn isArgs;\n};\n","/**\n * Default options.\n */\n\n/**\n * @typedef {Object} Options\n * @property {Function} [createWebSocket=url => new WebSocket(url)] - custom function for WebSocket construction.\n  *\n * @property {Function} [packMessage=noop] - packs message for sending. For example, `data => JSON.stringify(data)`.\n *\n * @property {Function} [unpackMessage=noop] - unpacks received message. For example, `data => JSON.parse(data)`.\n *\n * @property {Function} [attachRequestId=noop] - injects request id into data.\n * For example, `(data, requestId) => Object.assign({requestId}, data)`.\n *\n * @property {Function} [extractRequestId=noop] - extracts request id from received data.\n * For example, `data => data.requestId`.\n *\n * @property {Function} [extractMessageData=event => event.data] - extracts data from event object.\n *\n * @property {Number} timeout=0 - timeout for opening connection and sending messages.\n *\n * @property {Number} connectionTimeout=0 - special timeout for opening connection, by default equals to `timeout`.\n *\n * @defaults\n * please see [options.js](https://github.com/vitalets/websocket-as-promised/blob/master/src/options.js)\n */\n\nmodule.exports = {\n  /**\n   * See {@link Options.createWebSocket}\n   *\n   * @param {String} url\n   * @returns {WebSocket}\n   */\n  createWebSocket: url => new WebSocket(url),\n\n  /**\n   * See {@link Options.packMessage}\n   *\n   * @param {*} data\n   * @returns {String|ArrayBuffer|Blob}\n   */\n  packMessage: null,\n\n  /**\n   * See {@link Options.unpackMessage}\n   *\n   * @param {String|ArrayBuffer|Blob} data\n   * @returns {*}\n   */\n  unpackMessage: null,\n\n  /**\n   * See {@link Options.attachRequestId}\n   *\n   * @param {*} data\n   * @param {String|Number} requestId\n   * @returns {*}\n   */\n  attachRequestId: null,\n\n  /**\n   * See {@link Options.extractRequestId}\n   *\n   * @param {*} data\n   * @returns {String|Number|undefined}\n   */\n  extractRequestId: null,\n\n  /**\n   * See {@link Options.extractMessageData}\n   *\n   * @param {*} event\n   * @returns {*}\n   */\n  extractMessageData: event => event.data,\n\n  /**\n   * See {@link Options.timeout}\n   */\n  timeout: 0,\n\n  /**\n   * See {@link Options.connectionTimeout}\n   */\n  connectionTimeout: 0,\n};\n","module.exports = function isBuffer(arg) {\n  return arg && typeof arg === 'object'\n    && typeof arg.copy === 'function'\n    && typeof arg.fill === 'function'\n    && typeof arg.readUInt8 === 'function';\n}","'use strict';\n\nvar slice = Array.prototype.slice;\nvar isArgs = require('./isArguments');\n\nvar origKeys = Object.keys;\nvar keysShim = origKeys ? function keys(o) { return origKeys(o); } : require('./implementation');\n\nvar originalKeys = Object.keys;\n\nkeysShim.shim = function shimObjectKeys() {\n\tif (Object.keys) {\n\t\tvar keysWorksWithArguments = (function () {\n\t\t\t// Safari 5.0 bug\n\t\t\tvar args = Object.keys(arguments);\n\t\t\treturn args && args.length === arguments.length;\n\t\t}(1, 2));\n\t\tif (!keysWorksWithArguments) {\n\t\t\tObject.keys = function keys(object) { // eslint-disable-line func-name-matching\n\t\t\t\tif (isArgs(object)) {\n\t\t\t\t\treturn originalKeys(slice.call(object));\n\t\t\t\t}\n\t\t\t\treturn originalKeys(object);\n\t\t\t};\n\t\t}\n\t} else {\n\t\tObject.keys = keysShim;\n\t}\n\treturn Object.keys || keysShim;\n};\n\nmodule.exports = keysShim;\n","'use strict';\n\nvar $isNaN = require('../helpers/isNaN');\n\n// http://www.ecma-international.org/ecma-262/5.1/#sec-9.12\n\nmodule.exports = function SameValue(x, y) {\n\tif (x === y) { // 0 === -0, but they are not identical.\n\t\tif (x === 0) { return 1 / x === 1 / y; }\n\t\treturn true;\n\t}\n\treturn $isNaN(x) && $isNaN(y);\n};\n","\nexports.throwIf = (condition, message) => {\n  if (condition) {\n    throw new Error(message);\n  }\n};\n","'use strict';\n\n/* globals\n\tAtomics,\n\tSharedArrayBuffer,\n*/\n\nvar undefined;\n\nvar $TypeError = TypeError;\n\nvar $gOPD = Object.getOwnPropertyDescriptor;\nif ($gOPD) {\n\ttry {\n\t\t$gOPD({}, '');\n\t} catch (e) {\n\t\t$gOPD = null; // this is IE 8, which has a broken gOPD\n\t}\n}\n\nvar throwTypeError = function () { throw new $TypeError(); };\nvar ThrowTypeError = $gOPD\n\t? (function () {\n\t\ttry {\n\t\t\t// eslint-disable-next-line no-unused-expressions, no-caller, no-restricted-properties\n\t\t\targuments.callee; // IE 8 does not throw here\n\t\t\treturn throwTypeError;\n\t\t} catch (calleeThrows) {\n\t\t\ttry {\n\t\t\t\t// IE 8 throws on Object.getOwnPropertyDescriptor(arguments, '')\n\t\t\t\treturn $gOPD(arguments, 'callee').get;\n\t\t\t} catch (gOPDthrows) {\n\t\t\t\treturn throwTypeError;\n\t\t\t}\n\t\t}\n\t}())\n\t: throwTypeError;\n\nvar hasSymbols = require('has-symbols')();\n\nvar getProto = Object.getPrototypeOf || function (x) { return x.__proto__; }; // eslint-disable-line no-proto\n\nvar generator; // = function * () {};\nvar generatorFunction = generator ? getProto(generator) : undefined;\nvar asyncFn; // async function() {};\nvar asyncFunction = asyncFn ? asyncFn.constructor : undefined;\nvar asyncGen; // async function * () {};\nvar asyncGenFunction = asyncGen ? getProto(asyncGen) : undefined;\nvar asyncGenIterator = asyncGen ? asyncGen() : undefined;\n\nvar TypedArray = typeof Uint8Array === 'undefined' ? undefined : getProto(Uint8Array);\n\nvar INTRINSICS = {\n\t'%Array%': Array,\n\t'%ArrayBuffer%': typeof ArrayBuffer === 'undefined' ? undefined : ArrayBuffer,\n\t'%ArrayBufferPrototype%': typeof ArrayBuffer === 'undefined' ? undefined : ArrayBuffer.prototype,\n\t'%ArrayIteratorPrototype%': hasSymbols ? getProto([][Symbol.iterator]()) : undefined,\n\t'%ArrayPrototype%': Array.prototype,\n\t'%ArrayProto_entries%': Array.prototype.entries,\n\t'%ArrayProto_forEach%': Array.prototype.forEach,\n\t'%ArrayProto_keys%': Array.prototype.keys,\n\t'%ArrayProto_values%': Array.prototype.values,\n\t'%AsyncFromSyncIteratorPrototype%': undefined,\n\t'%AsyncFunction%': asyncFunction,\n\t'%AsyncFunctionPrototype%': asyncFunction ? asyncFunction.prototype : undefined,\n\t'%AsyncGenerator%': asyncGen ? getProto(asyncGenIterator) : undefined,\n\t'%AsyncGeneratorFunction%': asyncGenFunction,\n\t'%AsyncGeneratorPrototype%': asyncGenFunction ? asyncGenFunction.prototype : undefined,\n\t'%AsyncIteratorPrototype%': asyncGenIterator && hasSymbols && Symbol.asyncIterator ? asyncGenIterator[Symbol.asyncIterator]() : undefined,\n\t'%Atomics%': typeof Atomics === 'undefined' ? undefined : Atomics,\n\t'%Boolean%': Boolean,\n\t'%BooleanPrototype%': Boolean.prototype,\n\t'%DataView%': typeof DataView === 'undefined' ? undefined : DataView,\n\t'%DataViewPrototype%': typeof DataView === 'undefined' ? undefined : DataView.prototype,\n\t'%Date%': Date,\n\t'%DatePrototype%': Date.prototype,\n\t'%decodeURI%': decodeURI,\n\t'%decodeURIComponent%': decodeURIComponent,\n\t'%encodeURI%': encodeURI,\n\t'%encodeURIComponent%': encodeURIComponent,\n\t'%Error%': Error,\n\t'%ErrorPrototype%': Error.prototype,\n\t'%eval%': eval, // eslint-disable-line no-eval\n\t'%EvalError%': EvalError,\n\t'%EvalErrorPrototype%': EvalError.prototype,\n\t'%Float32Array%': typeof Float32Array === 'undefined' ? undefined : Float32Array,\n\t'%Float32ArrayPrototype%': typeof Float32Array === 'undefined' ? undefined : Float32Array.prototype,\n\t'%Float64Array%': typeof Float64Array === 'undefined' ? undefined : Float64Array,\n\t'%Float64ArrayPrototype%': typeof Float64Array === 'undefined' ? undefined : Float64Array.prototype,\n\t'%Function%': Function,\n\t'%FunctionPrototype%': Function.prototype,\n\t'%Generator%': generator ? getProto(generator()) : undefined,\n\t'%GeneratorFunction%': generatorFunction,\n\t'%GeneratorPrototype%': generatorFunction ? generatorFunction.prototype : undefined,\n\t'%Int8Array%': typeof Int8Array === 'undefined' ? undefined : Int8Array,\n\t'%Int8ArrayPrototype%': typeof Int8Array === 'undefined' ? undefined : Int8Array.prototype,\n\t'%Int16Array%': typeof Int16Array === 'undefined' ? undefined : Int16Array,\n\t'%Int16ArrayPrototype%': typeof Int16Array === 'undefined' ? undefined : Int8Array.prototype,\n\t'%Int32Array%': typeof Int32Array === 'undefined' ? undefined : Int32Array,\n\t'%Int32ArrayPrototype%': typeof Int32Array === 'undefined' ? undefined : Int32Array.prototype,\n\t'%isFinite%': isFinite,\n\t'%isNaN%': isNaN,\n\t'%IteratorPrototype%': hasSymbols ? getProto(getProto([][Symbol.iterator]())) : undefined,\n\t'%JSON%': typeof JSON === 'object' ? JSON : undefined,\n\t'%JSONParse%': typeof JSON === 'object' ? JSON.parse : undefined,\n\t'%Map%': typeof Map === 'undefined' ? undefined : Map,\n\t'%MapIteratorPrototype%': typeof Map === 'undefined' || !hasSymbols ? undefined : getProto(new Map()[Symbol.iterator]()),\n\t'%MapPrototype%': typeof Map === 'undefined' ? undefined : Map.prototype,\n\t'%Math%': Math,\n\t'%Number%': Number,\n\t'%NumberPrototype%': Number.prototype,\n\t'%Object%': Object,\n\t'%ObjectPrototype%': Object.prototype,\n\t'%ObjProto_toString%': Object.prototype.toString,\n\t'%ObjProto_valueOf%': Object.prototype.valueOf,\n\t'%parseFloat%': parseFloat,\n\t'%parseInt%': parseInt,\n\t'%Promise%': typeof Promise === 'undefined' ? undefined : Promise,\n\t'%PromisePrototype%': typeof Promise === 'undefined' ? undefined : Promise.prototype,\n\t'%PromiseProto_then%': typeof Promise === 'undefined' ? undefined : Promise.prototype.then,\n\t'%Promise_all%': typeof Promise === 'undefined' ? undefined : Promise.all,\n\t'%Promise_reject%': typeof Promise === 'undefined' ? undefined : Promise.reject,\n\t'%Promise_resolve%': typeof Promise === 'undefined' ? undefined : Promise.resolve,\n\t'%Proxy%': typeof Proxy === 'undefined' ? undefined : Proxy,\n\t'%RangeError%': RangeError,\n\t'%RangeErrorPrototype%': RangeError.prototype,\n\t'%ReferenceError%': ReferenceError,\n\t'%ReferenceErrorPrototype%': ReferenceError.prototype,\n\t'%Reflect%': typeof Reflect === 'undefined' ? undefined : Reflect,\n\t'%RegExp%': RegExp,\n\t'%RegExpPrototype%': RegExp.prototype,\n\t'%Set%': typeof Set === 'undefined' ? undefined : Set,\n\t'%SetIteratorPrototype%': typeof Set === 'undefined' || !hasSymbols ? undefined : getProto(new Set()[Symbol.iterator]()),\n\t'%SetPrototype%': typeof Set === 'undefined' ? undefined : Set.prototype,\n\t'%SharedArrayBuffer%': typeof SharedArrayBuffer === 'undefined' ? undefined : SharedArrayBuffer,\n\t'%SharedArrayBufferPrototype%': typeof SharedArrayBuffer === 'undefined' ? undefined : SharedArrayBuffer.prototype,\n\t'%String%': String,\n\t'%StringIteratorPrototype%': hasSymbols ? getProto(''[Symbol.iterator]()) : undefined,\n\t'%StringPrototype%': String.prototype,\n\t'%Symbol%': hasSymbols ? Symbol : undefined,\n\t'%SymbolPrototype%': hasSymbols ? Symbol.prototype : undefined,\n\t'%SyntaxError%': SyntaxError,\n\t'%SyntaxErrorPrototype%': SyntaxError.prototype,\n\t'%ThrowTypeError%': ThrowTypeError,\n\t'%TypedArray%': TypedArray,\n\t'%TypedArrayPrototype%': TypedArray ? TypedArray.prototype : undefined,\n\t'%TypeError%': $TypeError,\n\t'%TypeErrorPrototype%': $TypeError.prototype,\n\t'%Uint8Array%': typeof Uint8Array === 'undefined' ? undefined : Uint8Array,\n\t'%Uint8ArrayPrototype%': typeof Uint8Array === 'undefined' ? undefined : Uint8Array.prototype,\n\t'%Uint8ClampedArray%': typeof Uint8ClampedArray === 'undefined' ? undefined : Uint8ClampedArray,\n\t'%Uint8ClampedArrayPrototype%': typeof Uint8ClampedArray === 'undefined' ? undefined : Uint8ClampedArray.prototype,\n\t'%Uint16Array%': typeof Uint16Array === 'undefined' ? undefined : Uint16Array,\n\t'%Uint16ArrayPrototype%': typeof Uint16Array === 'undefined' ? undefined : Uint16Array.prototype,\n\t'%Uint32Array%': typeof Uint32Array === 'undefined' ? undefined : Uint32Array,\n\t'%Uint32ArrayPrototype%': typeof Uint32Array === 'undefined' ? undefined : Uint32Array.prototype,\n\t'%URIError%': URIError,\n\t'%URIErrorPrototype%': URIError.prototype,\n\t'%WeakMap%': typeof WeakMap === 'undefined' ? undefined : WeakMap,\n\t'%WeakMapPrototype%': typeof WeakMap === 'undefined' ? undefined : WeakMap.prototype,\n\t'%WeakSet%': typeof WeakSet === 'undefined' ? undefined : WeakSet,\n\t'%WeakSetPrototype%': typeof WeakSet === 'undefined' ? undefined : WeakSet.prototype\n};\n\nvar bind = require('function-bind');\nvar $replace = bind.call(Function.call, String.prototype.replace);\n\n/* adapted from https://github.com/lodash/lodash/blob/4.17.15/dist/lodash.js#L6735-L6744 */\nvar rePropName = /[^%.[\\]]+|\\[(?:(-?\\d+(?:\\.\\d+)?)|([\"'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|%$))/g;\nvar reEscapeChar = /\\\\(\\\\)?/g; /** Used to match backslashes in property paths. */\nvar stringToPath = function stringToPath(string) {\n\tvar result = [];\n\t$replace(string, rePropName, function (match, number, quote, subString) {\n\t\tresult[result.length] = quote ? $replace(subString, reEscapeChar, '$1') : (number || match);\n\t});\n\treturn result;\n};\n/* end adaptation */\n\nvar getBaseIntrinsic = function getBaseIntrinsic(name, allowMissing) {\n\tif (!(name in INTRINSICS)) {\n\t\tthrow new SyntaxError('intrinsic ' + name + ' does not exist!');\n\t}\n\n\t// istanbul ignore if // hopefully this is impossible to test :-)\n\tif (typeof INTRINSICS[name] === 'undefined' && !allowMissing) {\n\t\tthrow new $TypeError('intrinsic ' + name + ' exists, but is not available. Please file an issue!');\n\t}\n\n\treturn INTRINSICS[name];\n};\n\nmodule.exports = function GetIntrinsic(name, allowMissing) {\n\tif (typeof name !== 'string' || name.length === 0) {\n\t\tthrow new TypeError('intrinsic name must be a non-empty string');\n\t}\n\tif (arguments.length > 1 && typeof allowMissing !== 'boolean') {\n\t\tthrow new TypeError('\"allowMissing\" argument must be a boolean');\n\t}\n\n\tvar parts = stringToPath(name);\n\n\tvar value = getBaseIntrinsic('%' + (parts.length > 0 ? parts[0] : '') + '%', allowMissing);\n\tfor (var i = 1; i < parts.length; i += 1) {\n\t\tif (value != null) {\n\t\t\tif ($gOPD && (i + 1) >= parts.length) {\n\t\t\t\tvar desc = $gOPD(value, parts[i]);\n\t\t\t\tif (!allowMissing && !(parts[i] in value)) {\n\t\t\t\t\tthrow new $TypeError('base intrinsic for ' + name + ' exists, but the property is not available.');\n\t\t\t\t}\n\t\t\t\t// By convention, when a data property is converted to an accessor\n\t\t\t\t// property to emulate a data property that does not suffer from\n\t\t\t\t// the override mistake, that accessor's getter is marked with\n\t\t\t\t// an `originalValue` property. Here, when we detect this, we\n\t\t\t\t// uphold the illusion by pretending to see that original data\n\t\t\t\t// property, i.e., returning the value rather than the getter\n\t\t\t\t// itself.\n\t\t\t\tvalue = desc && 'get' in desc && !('originalValue' in desc.get) ? desc.get : value[parts[i]];\n\t\t\t} else {\n\t\t\t\tvalue = value[parts[i]];\n\t\t\t}\n\t\t}\n\t}\n\treturn value;\n};\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.wallet = exports.crypto = exports.utils = exports.types = exports.getDefaultProvider = exports.closestPackableTransactionAmount = exports.closestPackableTransactionFee = exports.ETHProxy = exports.Provider = exports.Signer = exports.Wallet = void 0;\nconst wallet_1 = require(\"./wallet\");\nObject.defineProperty(exports, \"Wallet\", { enumerable: true, get: function () { return wallet_1.Wallet; } });\nconst provider_1 = require(\"./provider\");\nObject.defineProperty(exports, \"Provider\", { enumerable: true, get: function () { return provider_1.Provider; } });\nObject.defineProperty(exports, \"ETHProxy\", { enumerable: true, get: function () { return provider_1.ETHProxy; } });\nObject.defineProperty(exports, \"getDefaultProvider\", { enumerable: true, get: function () { return provider_1.getDefaultProvider; } });\nconst signer_1 = require(\"./signer\");\nObject.defineProperty(exports, \"Signer\", { enumerable: true, get: function () { return signer_1.Signer; } });\nconst utils_1 = require(\"./utils\");\nObject.defineProperty(exports, \"closestPackableTransactionAmount\", { enumerable: true, get: function () { return utils_1.closestPackableTransactionAmount; } });\nObject.defineProperty(exports, \"closestPackableTransactionFee\", { enumerable: true, get: function () { return utils_1.closestPackableTransactionFee; } });\nconst wallet = __importStar(require(\"./wallet\"));\nexports.wallet = wallet;\nconst types = __importStar(require(\"./types\"));\nexports.types = types;\nconst utils = __importStar(require(\"./utils\"));\nexports.utils = utils;\nconst crypto = __importStar(require(\"./crypto\"));\nexports.crypto = crypto;\n","'use strict';\n\nvar has = require('has');\n\nvar GetIntrinsic = require('../GetIntrinsic');\n\nvar $TypeError = GetIntrinsic('%TypeError%');\n\nvar Type = require('./Type');\nvar ToBoolean = require('./ToBoolean');\nvar IsCallable = require('./IsCallable');\n\n// https://ecma-international.org/ecma-262/5.1/#sec-8.10.5\n\nmodule.exports = function ToPropertyDescriptor(Obj) {\n\tif (Type(Obj) !== 'Object') {\n\t\tthrow new $TypeError('ToPropertyDescriptor requires an object');\n\t}\n\n\tvar desc = {};\n\tif (has(Obj, 'enumerable')) {\n\t\tdesc['[[Enumerable]]'] = ToBoolean(Obj.enumerable);\n\t}\n\tif (has(Obj, 'configurable')) {\n\t\tdesc['[[Configurable]]'] = ToBoolean(Obj.configurable);\n\t}\n\tif (has(Obj, 'value')) {\n\t\tdesc['[[Value]]'] = Obj.value;\n\t}\n\tif (has(Obj, 'writable')) {\n\t\tdesc['[[Writable]]'] = ToBoolean(Obj.writable);\n\t}\n\tif (has(Obj, 'get')) {\n\t\tvar getter = Obj.get;\n\t\tif (typeof getter !== 'undefined' && !IsCallable(getter)) {\n\t\t\tthrow new $TypeError('getter must be a function');\n\t\t}\n\t\tdesc['[[Get]]'] = getter;\n\t}\n\tif (has(Obj, 'set')) {\n\t\tvar setter = Obj.set;\n\t\tif (typeof setter !== 'undefined' && !IsCallable(setter)) {\n\t\t\tthrow new $TypeError('setter must be a function');\n\t\t}\n\t\tdesc['[[Set]]'] = setter;\n\t}\n\n\tif ((has(desc, '[[Get]]') || has(desc, '[[Set]]')) && (has(desc, '[[Value]]') || has(desc, '[[Writable]]'))) {\n\t\tthrow new $TypeError('Invalid property descriptor. Cannot both specify accessors and a value or writable attribute');\n\t}\n\treturn desc;\n};\n","'use strict';\n\nvar keys = require('object-keys');\nvar hasSymbols = typeof Symbol === 'function' && typeof Symbol('foo') === 'symbol';\n\nvar toStr = Object.prototype.toString;\nvar concat = Array.prototype.concat;\nvar origDefineProperty = Object.defineProperty;\n\nvar isFunction = function (fn) {\n\treturn typeof fn === 'function' && toStr.call(fn) === '[object Function]';\n};\n\nvar arePropertyDescriptorsSupported = function () {\n\tvar obj = {};\n\ttry {\n\t\torigDefineProperty(obj, 'x', { enumerable: false, value: obj });\n\t\t// eslint-disable-next-line no-unused-vars, no-restricted-syntax\n\t\tfor (var _ in obj) { // jscs:ignore disallowUnusedVariables\n\t\t\treturn false;\n\t\t}\n\t\treturn obj.x === obj;\n\t} catch (e) { /* this is IE 8. */\n\t\treturn false;\n\t}\n};\nvar supportsDescriptors = origDefineProperty && arePropertyDescriptorsSupported();\n\nvar defineProperty = function (object, name, value, predicate) {\n\tif (name in object && (!isFunction(predicate) || !predicate())) {\n\t\treturn;\n\t}\n\tif (supportsDescriptors) {\n\t\torigDefineProperty(object, name, {\n\t\t\tconfigurable: true,\n\t\t\tenumerable: false,\n\t\t\tvalue: value,\n\t\t\twritable: true\n\t\t});\n\t} else {\n\t\tobject[name] = value;\n\t}\n};\n\nvar defineProperties = function (object, map) {\n\tvar predicates = arguments.length > 2 ? arguments[2] : {};\n\tvar props = keys(map);\n\tif (hasSymbols) {\n\t\tprops = concat.call(props, Object.getOwnPropertySymbols(map));\n\t}\n\tfor (var i = 0; i < props.length; i += 1) {\n\t\tdefineProperty(object, props[i], map[props[i]], predicates[props[i]]);\n\t}\n};\n\ndefineProperties.supportsDescriptors = !!supportsDescriptors;\n\nmodule.exports = defineProperties;\n","'use strict';\n\nvar GetIntrinsic = require('../GetIntrinsic');\n\nvar has = require('has');\nvar $TypeError = GetIntrinsic('%TypeError%');\n\nmodule.exports = function IsPropertyDescriptor(ES, Desc) {\n\tif (ES.Type(Desc) !== 'Object') {\n\t\treturn false;\n\t}\n\tvar allowed = {\n\t\t'[[Configurable]]': true,\n\t\t'[[Enumerable]]': true,\n\t\t'[[Get]]': true,\n\t\t'[[Set]]': true,\n\t\t'[[Value]]': true,\n\t\t'[[Writable]]': true\n\t};\n\n\tfor (var key in Desc) { // eslint-disable-line no-restricted-syntax\n\t\tif (has(Desc, key) && !allowed[key]) {\n\t\t\treturn false;\n\t\t}\n\t}\n\n\tif (ES.IsDataDescriptor(Desc) && ES.IsAccessorDescriptor(Desc)) {\n\t\tthrow new $TypeError('Property Descriptors may not be both accessor and data descriptors');\n\t}\n\treturn true;\n};\n"],"sourceRoot":""}